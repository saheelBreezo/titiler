{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"A lightweight Cloud Optimized GeoTIFF dynamic tile server. Documentation : devseed.com/titiler/ Source Code : developmentseed/titiler Titiler, pronounced tee-tiler ( ti is the diminutive version of the french petit which means small), is a lightweight server to create map tiles dynamically from Cloud Optimized GeoTIFF ( COG ). This project is the descendant of cogeo-tiler and cogeo-mosaic-tiler . Features \u00b6 Multiple TileMatrixSets via morecantile . By default, output map tiles are in the standard Web Mercator projection used by most mapping libraries, but support for alternative projections is available. Cloud Optimized GeoTIFF support SpatioTemporal Asset Catalog support Mosaic support (via MosaicJSON ) OGC WMTS support AWS Lambda / ECS deployment options Installation \u00b6 $ pip install -U pip $ pip install titiler [ \"server\" ] # Or from sources $ git clone https://github.com/developmentseed/titiler.git $ cd titiler && pip install -e . [ \"server\" ] Launch Application $ pip install -e . $ uvicorn titiler.main:app --reload Or with Docker $ git clone https://github.com/developmentseed/titiler.git $ cd titiler $ docker-compose build $ docker-compose up Project structure \u00b6 titiler/ - titiler python module. \u251c\u2500\u2500 custom/ - Custom colormap and TMS grids. \u251c\u2500\u2500 endpoints - API routes. \u2502 \u251c\u2500\u2500 cog.py - COG related endpoints. \u2502 \u251c\u2500\u2500 stac.py - STAC related endpoints. \u2502 \u251c\u2500\u2500 mosaic.py - MosaicJSON related endpoints. \u2502 \u251c\u2500\u2500 factory.py - TiTiler Router Factories. \u2502 \u2514\u2500\u2500 tms.py - TileMatrixSets endpoints. \u251c\u2500\u2500 models/ - pydantic models for this application. \u251c\u2500\u2500 ressources/ - application resources (enums, constants, etc.). \u251c\u2500\u2500 templates/ - html/xml models. \u251c\u2500\u2500 dependencies.py - API dependencies. \u251c\u2500\u2500 errors.py - API custom error handling. \u251c\u2500\u2500 main.py - FastAPI application creation and configuration. \u251c\u2500\u2500 settings.py - application configuration. \u251c\u2500\u2500 utils.py - utility functions. \u2502 stack/ \u251c\u2500\u2500 app.py - AWS Stack definition (vpc, cluster, ecs, alb ...) \u251c\u2500\u2500 config.py - Optional parameters for the stack definition [EDIT THIS] \u2502 Dockerfiles/ \u251c\u2500\u2500 ecs/ \u2502 \u2514\u2500\u2500 Dockerfile - Dockerfile to build the ECS service image. \u251c\u2500\u2500 lambda/ \u2502 \u2514\u2500\u2500 Dockerfile - Dockerfile to build the Lambda service image. \u2502 lambda/ \u2502 \u2514\u2500\u2500 handler.py - Mangum adaptor for AWS Lambda. \u2502 docs/ - Project documentation. Contribution & Development \u00b6 See CONTRIBUTING.md License \u00b6 See LICENSE Authors \u00b6 Created by Development Seed Changes \u00b6 See CHANGES.md .","title":"TiTiler"},{"location":"#features","text":"Multiple TileMatrixSets via morecantile . By default, output map tiles are in the standard Web Mercator projection used by most mapping libraries, but support for alternative projections is available. Cloud Optimized GeoTIFF support SpatioTemporal Asset Catalog support Mosaic support (via MosaicJSON ) OGC WMTS support AWS Lambda / ECS deployment options","title":"Features"},{"location":"#installation","text":"$ pip install -U pip $ pip install titiler [ \"server\" ] # Or from sources $ git clone https://github.com/developmentseed/titiler.git $ cd titiler && pip install -e . [ \"server\" ] Launch Application $ pip install -e . $ uvicorn titiler.main:app --reload Or with Docker $ git clone https://github.com/developmentseed/titiler.git $ cd titiler $ docker-compose build $ docker-compose up","title":"Installation"},{"location":"#project-structure","text":"titiler/ - titiler python module. \u251c\u2500\u2500 custom/ - Custom colormap and TMS grids. \u251c\u2500\u2500 endpoints - API routes. \u2502 \u251c\u2500\u2500 cog.py - COG related endpoints. \u2502 \u251c\u2500\u2500 stac.py - STAC related endpoints. \u2502 \u251c\u2500\u2500 mosaic.py - MosaicJSON related endpoints. \u2502 \u251c\u2500\u2500 factory.py - TiTiler Router Factories. \u2502 \u2514\u2500\u2500 tms.py - TileMatrixSets endpoints. \u251c\u2500\u2500 models/ - pydantic models for this application. \u251c\u2500\u2500 ressources/ - application resources (enums, constants, etc.). \u251c\u2500\u2500 templates/ - html/xml models. \u251c\u2500\u2500 dependencies.py - API dependencies. \u251c\u2500\u2500 errors.py - API custom error handling. \u251c\u2500\u2500 main.py - FastAPI application creation and configuration. \u251c\u2500\u2500 settings.py - application configuration. \u251c\u2500\u2500 utils.py - utility functions. \u2502 stack/ \u251c\u2500\u2500 app.py - AWS Stack definition (vpc, cluster, ecs, alb ...) \u251c\u2500\u2500 config.py - Optional parameters for the stack definition [EDIT THIS] \u2502 Dockerfiles/ \u251c\u2500\u2500 ecs/ \u2502 \u2514\u2500\u2500 Dockerfile - Dockerfile to build the ECS service image. \u251c\u2500\u2500 lambda/ \u2502 \u2514\u2500\u2500 Dockerfile - Dockerfile to build the Lambda service image. \u2502 lambda/ \u2502 \u2514\u2500\u2500 handler.py - Mangum adaptor for AWS Lambda. \u2502 docs/ - Project documentation.","title":"Project structure"},{"location":"#contribution-development","text":"See CONTRIBUTING.md","title":"Contribution &amp; Development"},{"location":"#license","text":"See LICENSE","title":"License"},{"location":"#authors","text":"Created by Development Seed","title":"Authors"},{"location":"#changes","text":"See CHANGES.md .","title":"Changes"},{"location":"contributing/","text":"Development - Contributing \u00b6 Issues and pull requests are more than welcome: github.com/developmentseed/titiler/issues dev install $ git clone https://github.com/developmentseed/titiler.git $ cd titiler $ pip install -e . [ dev ] Python3.7 only This repo is set to use pre-commit to run isort , flake8 , pydocstring , black (\"uncompromising Python code formatter\") and mypy when committing new code. $ pre-commit install Docs \u00b6 $ git clone https://github.com/developmentseed/titiler.git $ cd titiler $ pip install -e . [ \"docs\" ] Hot-reloading docs: $ mkdocs serve To manually deploy docs (note you should never need to do this because Github Actions deploys automatically for new commits.): $ mkdocs gh-deploy","title":"Development - Contributing"},{"location":"contributing/#development-contributing","text":"Issues and pull requests are more than welcome: github.com/developmentseed/titiler/issues dev install $ git clone https://github.com/developmentseed/titiler.git $ cd titiler $ pip install -e . [ dev ] Python3.7 only This repo is set to use pre-commit to run isort , flake8 , pydocstring , black (\"uncompromising Python code formatter\") and mypy when committing new code. $ pre-commit install","title":"Development - Contributing"},{"location":"contributing/#docs","text":"$ git clone https://github.com/developmentseed/titiler.git $ cd titiler $ pip install -e . [ \"docs\" ] Hot-reloading docs: $ mkdocs serve To manually deploy docs (note you should never need to do this because Github Actions deploys automatically for new commits.): $ mkdocs gh-deploy","title":"Docs"},{"location":"intro/","text":"Default App \u00b6 TiTiler comes with a default (complete) application with support of COG, STAC and MosaicJSON. You can start the application locally by doing: $ pip install titiler [ server ] $ uvicorn titiler.main:app --reload > INFO: Uvicorn running on http://127.0.0.1:8000 ( Press CTRL+C to quit ) > INFO: Started reloader process [ 45592 ] Default endpoints documentation: /cog - Cloud Optimized GeoTIFF /mosaicjson - MosaicJSON /stac - Spatio Temporal Asset Catalog /tms - TileMatrixSets Create your own App \u00b6 TiTiler has been developed so users can build their own app using only portions they need. Using TilerFactory s , you can create customized applications with only the endpoints you need. from titiler.endpoints.factory import TilerFactory from titiler.errors import DEFAULT_STATUS_CODES , add_exception_handlers from fastapi import FastAPI from starlette.requests import Request from starlette.responses import HTMLResponse app = FastAPI ( title = \"My super app\" , openapi_url = \"/api/openapi.json\" , description = \"It's something great\" , ) cog = TilerFactory ( router_prefix = \"cog\" ) app . include_router ( cog . router , prefix = \"/cog\" , tags = [ \"Cloud Optimized GeoTIFF\" ]) add_exception_handlers ( app , DEFAULT_STATUS_CODES )","title":"Intro"},{"location":"intro/#default-app","text":"TiTiler comes with a default (complete) application with support of COG, STAC and MosaicJSON. You can start the application locally by doing: $ pip install titiler [ server ] $ uvicorn titiler.main:app --reload > INFO: Uvicorn running on http://127.0.0.1:8000 ( Press CTRL+C to quit ) > INFO: Started reloader process [ 45592 ] Default endpoints documentation: /cog - Cloud Optimized GeoTIFF /mosaicjson - MosaicJSON /stac - Spatio Temporal Asset Catalog /tms - TileMatrixSets","title":"Default App"},{"location":"intro/#create-your-own-app","text":"TiTiler has been developed so users can build their own app using only portions they need. Using TilerFactory s , you can create customized applications with only the endpoints you need. from titiler.endpoints.factory import TilerFactory from titiler.errors import DEFAULT_STATUS_CODES , add_exception_handlers from fastapi import FastAPI from starlette.requests import Request from starlette.responses import HTMLResponse app = FastAPI ( title = \"My super app\" , openapi_url = \"/api/openapi.json\" , description = \"It's something great\" , ) cog = TilerFactory ( router_prefix = \"cog\" ) app . include_router ( cog . router , prefix = \"/cog\" , tags = [ \"Cloud Optimized GeoTIFF\" ]) add_exception_handlers ( app , DEFAULT_STATUS_CODES )","title":"Create your own App"},{"location":"release-notes/","text":"Release Notes \u00b6 Next (TBD) - Master \u00b6 refactor CacheControl Middleware rename headers value X-Server-Timings to Server-Timing . add total;dur={} in response header Server-Timing , using new titiler.middleware.TotalTimeMiddleware middleware (113) from titiler.middleware import CacheControlMiddleware , TotalTimeMiddleware from fastapi import FastAPI app . add_middleware ( CacheControlMiddleware , cachecontrol = \"public, max-age=3600\" ) app . add_middleware ( TotalTimeMiddleware ) 0.1.0-alpha.5 (2020-09-22) \u00b6 exclude tests/ an stack/ in titiler python package. add EPSG6933 in TMS breaking changes * [FACTORY] the additional_dependency should be a Callable which return a dict. ```python @dataclass # type: ignore class BaseFactory(metaclass=abc.ABCMeta): \"\"\"BaseTiler Factory.\"\"\" ... # provide custom dependency additional_dependency: Callable[..., Dict] = field(default=lambda: dict()) ``` ```python def AssetsParams( assets: Optional[str] = Query( None, title=\"Asset indexes\", description=\"comma (',') delimited asset names (might not be an available options of some readers)\", ) ) -> Dict: \"\"\"Assets Dependency.\"\"\" kwargs = {} if assets: kwargs[\"assets\"] = assets.split(\",\") return kwargs ``` [FACTORY] remove _ prefix in factory methods (e.g _tile -> tile ) [FACTORY] refactor dependencies to better align with rio_tiler.io.BaseReader method definition. Example: In the metadata , the MetadataParams will be used to pass pmin and pmax because they are the only required parameters for the metadata method. All other params will be passed to a kwargs dict. @dataclass class MetadataParams ( DefaultDependency ): \"\"\"Common Metadada parameters.\"\"\" # Required params pmin : float = Query ( 2.0 , description = \"Minimum percentile\" ) pmax : float = Query ( 98.0 , description = \"Maximum percentile\" ) # Optional parameters bidx : Optional [ str ] = Query ( None , title = \"Band indexes\" , description = \"comma (',') delimited band indexes\" , ) ... def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . bidx is not None : self . kwargs [ \"indexes\" ] = tuple ( int ( s ) for s in re . findall ( r \"\\d+\" , self . bidx ) ) ... # metadata method in factory def metadata ( src_path = Depends ( self . path_dependency ), metadata_params = Depends ( self . metadata_dependency ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return metadata.\"\"\" reader = src_path . reader or self . reader with reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . metadata ( metadata_params . pmin , metadata_params . pmax , ** metadata_params . kwargs , ** kwargs , ) return info * [FACTORY] refactor dependencies definition @dataclass # type: ignore class BaseFactory ( metaclass = abc . ABCMeta ): \"\"\"BaseTiler Factory.\"\"\" reader : default_readers_type = field ( default = COGReader ) reader_options : Dict = field ( default_factory = dict ) # FastAPI router router : APIRouter = field ( default_factory = APIRouter ) # Path Dependency path_dependency : Type [ PathParams ] = field ( default = PathParams ) # Rasterio Dataset Options (nodata, unscale, resampling) dataset_dependency : default_deps_type = field ( default = DatasetParams ) # Indexes/Expression Dependencies layer_dependency : default_deps_type = field ( default = BidxExprParams ) # Image rendering Dependencies render_dependency : default_deps_type = field ( default = RenderParams ) # TileMatrixSet dependency tms_dependency : Callable [ ... , TileMatrixSet ] = WebMercatorTMSParams # provide custom dependency additional_dependency : Callable [ ... , Dict ] = field ( default = lambda : dict ()) remove PathParams.reader attribute. This option was not used and would have been technically difficult to use. @dataclass class PathParams : \"\"\"Create dataset path from args\"\"\" url : str = Query ( ... , description = \"Dataset URL\" ) 0.1.0-alpha.4 (2020-09-14) \u00b6 Update .npy output format to follow the numpyTile format (#103) import numpy import requests from io import BytesIO endpoint = ... url = \"https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif\" r = requests . get ( f \" { endpoint } /cog/tiles/14/10818/9146.npy\" , params = { \"url\" : url , } ) data = numpy . load ( BytesIO ( r . content )) print ( data . shape ) > ( 4 , 256 , 256 ) Add titiler.custom.routing.apiroute_factory . This function enable the creation of custom fastapi.routing.APIRoute class with rasterio.Env() block. from fastapi import FastAPI , APIRouter from rasterio._env import get_gdal_config from titiler.custom.routing import apiroute_factory app = FastAPI () route_class = apiroute_factory ({ \"GDAL_DISABLE_READDIR_ON_OPEN\" : \"FALSE\" }) router = APIRouter ( route_class = route_class ) @router . get ( \"/simple\" ) def simple (): \"\"\"should return FALSE.\"\"\" res = get_gdal_config ( \"GDAL_DISABLE_READDIR_ON_OPEN\" ) return { \"env\" : res } app . include_router ( router ) Note: This has only be tested for python 3.6 and 3.7. 0.1.0-alpha.3 (2020-09-03) \u00b6 add custom url_for method in TilerFactory to retrieve prefixed endpoint URL (#95) remove magic titiler.dependencies.PathParams mosaicid path translation, where a user could pass url=mosaicid:// to the endpoint. switch to pydantic.BaseSettings for FastAPI application setting management. List of Settings: name : str = \"titiler\" cors_origins : str = \"*\" cachecontrol : str = \"public, max-age=3600\" API Settings can now be set by adding a .env file in your local project or by setting environment variables (e.g API_CORS_ORIGIN=\"https://mywebsite.com/*\" ) 0.1.0-alpha.2 (2020-09-01) \u00b6 add Transform and CRS information in /part GeoTIFF output pin rio-tiler-crs to >=3.0b4,<3.1 and cogeo-mosaic to >=3.0a10,<3.1 0.1.0-alpha.1 (2020-09-01) \u00b6 rename titiler.models.cog.py to titiler.models.dataset.py remove cog* prefix to Bounds, Info and Metadata models allow Union[str, int] for key in Metadata.statistics (as defined in rio-tiler-pds) e.g Create a Landsat 8 Tiler from titiler.endpoints.factory import TilerFactory , MosaicTilerFactory from titiler.dependencies import BandsParams from rio_tiler_pds.landsat.aws.landsat8 import L8Reader # Not in TiTiler dependencies from fastapi import FastAPI app = FastAPI ( title = \"Landsat Tiler\" , openapi_url = \"/api/v1/openapi.json\" ) scene = TilerFactory ( reader = L8Reader , additional_dependency = BandsParams , router_prefix = \"scenes\" ) mosaic = MosaicTilerFactory ( dataset_reader = L8Reader , additional_dependency = BandsParams , add_update = False , add_create = False , router_prefix = \"mosaic\" , ) app . include_router ( scene . router , prefix = \"/scenes\" , tags = [ \"Scenes\" ]) app . include_router ( mosaic . router , prefix = \"/mosaic\" , tags = [ \"Mosaic\" ]) 0.1a0 (2020-08-31) \u00b6 First release on pypi Tiler Factory \u00b6 For this release we created new Tiler Factories class which handle creation of FastAPI routers for a given rio_tiler Readers . from titiler.endpoints.factory import TilerFactory from rio_tiler.io import COGReader , STACReader from fastapi import FastAPI app = FastAPI () cog = TilerFactory () app . include_router ( cog . router , tags = [ \"Cloud Optimized GeoTIFF\" ]) Readers / TileMatrixSets \u00b6 The titiler.endpoints.factory.TilerFactory class will create a tiler with Web Mercator as uniq supported Tile Matrix Set. For other TMS support, tiler needs to be created with titiler.endpoints.factory.TMSTilerFactory and with a TMS friendly reader (e.g rio_tiler_crs.COGReader ). Simple tiler with only Web Mercator support from rio_tiler.io import COGReader from titiler.endpoints import factory from titiler.dependencies import WebMercatorTMSParams app = factory . TilerFactory ( reader = COGReader ) assert app . tms_dependency == WebMercatorTMSParams Tiler with more TMS support (from morecantile) from rio_tiler_crs import COGReader from titiler.endpoints import factory from titiler.dependencies import TMSParams app = factory . TMSTilerFactory ( reader = COGReader ) assert app . tms_dependency == TMSParams Other changes \u00b6 add mosaic support (#17 author @geospatial-jeff) update to rio-tiler-crs>=3.0b* and rio-tiler>=2.0b* Pin fastapi version to 0.60.1 Remove titiler.core in favor of starlette settings (#55, author @geospatial-jeff) Add fastapi exception handlers (#56, author @geospatial-jeff) Remove intermediary routers (#57, author @geospatial-jeff) Remove /titiler/api submodule (e.g titiler.api.utils -> titiler.utils) Add Cache-Control middleware. Endpoints do not define any cache-control headers. (part of #43, co-author with @geospatial-jeff) Add 'X-Assets' in response headers for mosaic tiles (#51) add cog validation via rio-cogeo (co-author with @geospatial-jeff, #37) Breaking changes \u00b6 default tiler to Web Mercator only removed cache layer for tiles updated html templates template_dir = pkg_resources . resource_filename ( \"titiler\" , \"templates\" ) templates = Jinja2Templates ( directory = template_dir ) cog_template = templates . TemplateResponse ( name = \"cog_index.html\" , context = { \"request\" : request , \"tilejson\" : request . url_for ( \"cog_tilejson\" ), \"metadata\" : request . url_for ( \"cog_metadata\" ), }, media_type = \"text/html\" , ) stac_template = templates . TemplateResponse ( name = \"stac_index.html\" , context = { \"request\" : request , \"tilejson\" : request . url_for ( \"stac_tilejson\" ), \"metadata\" : request . url_for ( \"stac_info\" ), }, media_type = \"text/html\" , ) Pre Pypi releases \u00b6 2.1.2 (2020-06-24) \u00b6 add width & height parameters in API docs to force output size for part/preview endpoints. add resampling_method in API docs. link: developmentseed/titiler@725da5f 2.1.1 (2020-06-22) \u00b6 add minimum fastapi version (0.54.0) and update docker config link: developmentseed/titiler@95b98a3 2.1.0 (2020-06-11) \u00b6 add /preview , /crop , /point endpoints link: developmentseed/titiler@8b63fc6 2.0.0 (2020-06-09) \u00b6 support STAC items (#16) better API documentation via response models update UI ( /stac/viewer , /cog/viewer ) re-order OpenAPI route tags update documentation link: developmentseed/titiler@fa2cb78 1.0.0 (2020-06-04) \u00b6 Initial release link: developmentseed/titiler@f4fdc02","title":"Release Notes"},{"location":"release-notes/#release-notes","text":"","title":"Release Notes"},{"location":"release-notes/#next-tbd-master","text":"refactor CacheControl Middleware rename headers value X-Server-Timings to Server-Timing . add total;dur={} in response header Server-Timing , using new titiler.middleware.TotalTimeMiddleware middleware (113) from titiler.middleware import CacheControlMiddleware , TotalTimeMiddleware from fastapi import FastAPI app . add_middleware ( CacheControlMiddleware , cachecontrol = \"public, max-age=3600\" ) app . add_middleware ( TotalTimeMiddleware )","title":"Next (TBD) - Master"},{"location":"release-notes/#010-alpha5-2020-09-22","text":"exclude tests/ an stack/ in titiler python package. add EPSG6933 in TMS breaking changes * [FACTORY] the additional_dependency should be a Callable which return a dict. ```python @dataclass # type: ignore class BaseFactory(metaclass=abc.ABCMeta): \"\"\"BaseTiler Factory.\"\"\" ... # provide custom dependency additional_dependency: Callable[..., Dict] = field(default=lambda: dict()) ``` ```python def AssetsParams( assets: Optional[str] = Query( None, title=\"Asset indexes\", description=\"comma (',') delimited asset names (might not be an available options of some readers)\", ) ) -> Dict: \"\"\"Assets Dependency.\"\"\" kwargs = {} if assets: kwargs[\"assets\"] = assets.split(\",\") return kwargs ``` [FACTORY] remove _ prefix in factory methods (e.g _tile -> tile ) [FACTORY] refactor dependencies to better align with rio_tiler.io.BaseReader method definition. Example: In the metadata , the MetadataParams will be used to pass pmin and pmax because they are the only required parameters for the metadata method. All other params will be passed to a kwargs dict. @dataclass class MetadataParams ( DefaultDependency ): \"\"\"Common Metadada parameters.\"\"\" # Required params pmin : float = Query ( 2.0 , description = \"Minimum percentile\" ) pmax : float = Query ( 98.0 , description = \"Maximum percentile\" ) # Optional parameters bidx : Optional [ str ] = Query ( None , title = \"Band indexes\" , description = \"comma (',') delimited band indexes\" , ) ... def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . bidx is not None : self . kwargs [ \"indexes\" ] = tuple ( int ( s ) for s in re . findall ( r \"\\d+\" , self . bidx ) ) ... # metadata method in factory def metadata ( src_path = Depends ( self . path_dependency ), metadata_params = Depends ( self . metadata_dependency ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return metadata.\"\"\" reader = src_path . reader or self . reader with reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . metadata ( metadata_params . pmin , metadata_params . pmax , ** metadata_params . kwargs , ** kwargs , ) return info * [FACTORY] refactor dependencies definition @dataclass # type: ignore class BaseFactory ( metaclass = abc . ABCMeta ): \"\"\"BaseTiler Factory.\"\"\" reader : default_readers_type = field ( default = COGReader ) reader_options : Dict = field ( default_factory = dict ) # FastAPI router router : APIRouter = field ( default_factory = APIRouter ) # Path Dependency path_dependency : Type [ PathParams ] = field ( default = PathParams ) # Rasterio Dataset Options (nodata, unscale, resampling) dataset_dependency : default_deps_type = field ( default = DatasetParams ) # Indexes/Expression Dependencies layer_dependency : default_deps_type = field ( default = BidxExprParams ) # Image rendering Dependencies render_dependency : default_deps_type = field ( default = RenderParams ) # TileMatrixSet dependency tms_dependency : Callable [ ... , TileMatrixSet ] = WebMercatorTMSParams # provide custom dependency additional_dependency : Callable [ ... , Dict ] = field ( default = lambda : dict ()) remove PathParams.reader attribute. This option was not used and would have been technically difficult to use. @dataclass class PathParams : \"\"\"Create dataset path from args\"\"\" url : str = Query ( ... , description = \"Dataset URL\" )","title":"0.1.0-alpha.5 (2020-09-22)"},{"location":"release-notes/#010-alpha4-2020-09-14","text":"Update .npy output format to follow the numpyTile format (#103) import numpy import requests from io import BytesIO endpoint = ... url = \"https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif\" r = requests . get ( f \" { endpoint } /cog/tiles/14/10818/9146.npy\" , params = { \"url\" : url , } ) data = numpy . load ( BytesIO ( r . content )) print ( data . shape ) > ( 4 , 256 , 256 ) Add titiler.custom.routing.apiroute_factory . This function enable the creation of custom fastapi.routing.APIRoute class with rasterio.Env() block. from fastapi import FastAPI , APIRouter from rasterio._env import get_gdal_config from titiler.custom.routing import apiroute_factory app = FastAPI () route_class = apiroute_factory ({ \"GDAL_DISABLE_READDIR_ON_OPEN\" : \"FALSE\" }) router = APIRouter ( route_class = route_class ) @router . get ( \"/simple\" ) def simple (): \"\"\"should return FALSE.\"\"\" res = get_gdal_config ( \"GDAL_DISABLE_READDIR_ON_OPEN\" ) return { \"env\" : res } app . include_router ( router ) Note: This has only be tested for python 3.6 and 3.7.","title":"0.1.0-alpha.4 (2020-09-14)"},{"location":"release-notes/#010-alpha3-2020-09-03","text":"add custom url_for method in TilerFactory to retrieve prefixed endpoint URL (#95) remove magic titiler.dependencies.PathParams mosaicid path translation, where a user could pass url=mosaicid:// to the endpoint. switch to pydantic.BaseSettings for FastAPI application setting management. List of Settings: name : str = \"titiler\" cors_origins : str = \"*\" cachecontrol : str = \"public, max-age=3600\" API Settings can now be set by adding a .env file in your local project or by setting environment variables (e.g API_CORS_ORIGIN=\"https://mywebsite.com/*\" )","title":"0.1.0-alpha.3 (2020-09-03)"},{"location":"release-notes/#010-alpha2-2020-09-01","text":"add Transform and CRS information in /part GeoTIFF output pin rio-tiler-crs to >=3.0b4,<3.1 and cogeo-mosaic to >=3.0a10,<3.1","title":"0.1.0-alpha.2 (2020-09-01)"},{"location":"release-notes/#010-alpha1-2020-09-01","text":"rename titiler.models.cog.py to titiler.models.dataset.py remove cog* prefix to Bounds, Info and Metadata models allow Union[str, int] for key in Metadata.statistics (as defined in rio-tiler-pds) e.g Create a Landsat 8 Tiler from titiler.endpoints.factory import TilerFactory , MosaicTilerFactory from titiler.dependencies import BandsParams from rio_tiler_pds.landsat.aws.landsat8 import L8Reader # Not in TiTiler dependencies from fastapi import FastAPI app = FastAPI ( title = \"Landsat Tiler\" , openapi_url = \"/api/v1/openapi.json\" ) scene = TilerFactory ( reader = L8Reader , additional_dependency = BandsParams , router_prefix = \"scenes\" ) mosaic = MosaicTilerFactory ( dataset_reader = L8Reader , additional_dependency = BandsParams , add_update = False , add_create = False , router_prefix = \"mosaic\" , ) app . include_router ( scene . router , prefix = \"/scenes\" , tags = [ \"Scenes\" ]) app . include_router ( mosaic . router , prefix = \"/mosaic\" , tags = [ \"Mosaic\" ])","title":"0.1.0-alpha.1 (2020-09-01)"},{"location":"release-notes/#01a0-2020-08-31","text":"First release on pypi","title":"0.1a0 (2020-08-31)"},{"location":"release-notes/#tiler-factory","text":"For this release we created new Tiler Factories class which handle creation of FastAPI routers for a given rio_tiler Readers . from titiler.endpoints.factory import TilerFactory from rio_tiler.io import COGReader , STACReader from fastapi import FastAPI app = FastAPI () cog = TilerFactory () app . include_router ( cog . router , tags = [ \"Cloud Optimized GeoTIFF\" ])","title":"Tiler Factory"},{"location":"release-notes/#readers-tilematrixsets","text":"The titiler.endpoints.factory.TilerFactory class will create a tiler with Web Mercator as uniq supported Tile Matrix Set. For other TMS support, tiler needs to be created with titiler.endpoints.factory.TMSTilerFactory and with a TMS friendly reader (e.g rio_tiler_crs.COGReader ). Simple tiler with only Web Mercator support from rio_tiler.io import COGReader from titiler.endpoints import factory from titiler.dependencies import WebMercatorTMSParams app = factory . TilerFactory ( reader = COGReader ) assert app . tms_dependency == WebMercatorTMSParams Tiler with more TMS support (from morecantile) from rio_tiler_crs import COGReader from titiler.endpoints import factory from titiler.dependencies import TMSParams app = factory . TMSTilerFactory ( reader = COGReader ) assert app . tms_dependency == TMSParams","title":"Readers / TileMatrixSets"},{"location":"release-notes/#other-changes","text":"add mosaic support (#17 author @geospatial-jeff) update to rio-tiler-crs>=3.0b* and rio-tiler>=2.0b* Pin fastapi version to 0.60.1 Remove titiler.core in favor of starlette settings (#55, author @geospatial-jeff) Add fastapi exception handlers (#56, author @geospatial-jeff) Remove intermediary routers (#57, author @geospatial-jeff) Remove /titiler/api submodule (e.g titiler.api.utils -> titiler.utils) Add Cache-Control middleware. Endpoints do not define any cache-control headers. (part of #43, co-author with @geospatial-jeff) Add 'X-Assets' in response headers for mosaic tiles (#51) add cog validation via rio-cogeo (co-author with @geospatial-jeff, #37)","title":"Other changes"},{"location":"release-notes/#breaking-changes","text":"default tiler to Web Mercator only removed cache layer for tiles updated html templates template_dir = pkg_resources . resource_filename ( \"titiler\" , \"templates\" ) templates = Jinja2Templates ( directory = template_dir ) cog_template = templates . TemplateResponse ( name = \"cog_index.html\" , context = { \"request\" : request , \"tilejson\" : request . url_for ( \"cog_tilejson\" ), \"metadata\" : request . url_for ( \"cog_metadata\" ), }, media_type = \"text/html\" , ) stac_template = templates . TemplateResponse ( name = \"stac_index.html\" , context = { \"request\" : request , \"tilejson\" : request . url_for ( \"stac_tilejson\" ), \"metadata\" : request . url_for ( \"stac_info\" ), }, media_type = \"text/html\" , )","title":"Breaking changes"},{"location":"release-notes/#pre-pypi-releases","text":"","title":"Pre Pypi releases"},{"location":"release-notes/#212-2020-06-24","text":"add width & height parameters in API docs to force output size for part/preview endpoints. add resampling_method in API docs. link: developmentseed/titiler@725da5f","title":"2.1.2 (2020-06-24)"},{"location":"release-notes/#211-2020-06-22","text":"add minimum fastapi version (0.54.0) and update docker config link: developmentseed/titiler@95b98a3","title":"2.1.1 (2020-06-22)"},{"location":"release-notes/#210-2020-06-11","text":"add /preview , /crop , /point endpoints link: developmentseed/titiler@8b63fc6","title":"2.1.0 (2020-06-11)"},{"location":"release-notes/#200-2020-06-09","text":"support STAC items (#16) better API documentation via response models update UI ( /stac/viewer , /cog/viewer ) re-order OpenAPI route tags update documentation link: developmentseed/titiler@fa2cb78","title":"2.0.0 (2020-06-09)"},{"location":"release-notes/#100-2020-06-04","text":"Initial release link: developmentseed/titiler@f4fdc02","title":"1.0.0 (2020-06-04)"},{"location":"concepts/customization/","text":"Example of STAC Tiler \u00b6 While a STAC tiler is included in the default TiTiler application, it provides an illustrative example of why one might need a custom tiler. The default factories create endpoints that expect basic input like indexes=[1, 2, 3] and resampling_method='nearest' but STAC needs more info. The STAC reader provided by rio-tiler and rio-tiler-crs needs an assets= option to specify which STAC asset(s) you want to read. We can add additional dependencies to endpoint by using the additional_dependency options when creating the factory. from dataclasses import dataclass from titiler.endpoints.factory import TMSTilerFactory from rio_tiler_crs import STACReader from titiler.dependencies import DefaultDependency @dataclass class AssetsParams ( DefaultDependency ): \"\"\"Asset and Band indexes parameters.\"\"\" assets : Optional [ str ] = Query ( None , title = \"Asset indexes\" , description = \"comma (',') delimited asset names (might not be an available options of some readers)\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . assets is not None : self . kwargs [ \"assets\" ] = self . assets . split ( \",\" ) stac = TMSTilerFactory ( reader = STACReader , additional_dependency = AssetsParams , router_prefix = \"stac\" , ) With additional_dependency set to AssetsParams , each endpoint will now have assets as one of input function. While this is good, it's not enough. STACTiler metadata() and info() methods return a slightly different output that the usual COGReader (because of multiple assets). We then need to customize a bit more the tiler: from titiler.dependencies import DefaultDependency from titiler.endpoint.factory import TMSTilerFactory from titiler.models.cog import cogInfo , cogMetadata @dataclass class AssetsBidxParams ( DefaultDependency ): \"\"\"Asset and Band indexes parameters.\"\"\" assets : Optional [ str ] = Query ( None , title = \"Asset indexes\" , description = \"comma (',') delimited asset names (might not be an available options of some readers)\" , ) bidx : Optional [ str ] = Query ( None , title = \"Band indexes\" , description = \"comma (',') delimited band indexes\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . assets is not None : self . kwargs [ \"assets\" ] = self . assets . split ( \",\" ) if self . bidx is not None : self . kwargs [ \"indexes\" ] = tuple ( int ( s ) for s in re . findall ( r \"\\d+\" , self . bidx ) ) @dataclass class AssetsBidxExprParams ( DefaultDependency ): \"\"\"Assets, Band Indexes and Expression parameters.\"\"\" assets : Optional [ str ] = Query ( None , title = \"Asset indexes\" , description = \"comma (',') delimited asset names (might not be an available options of some readers)\" , ) expression : Optional [ str ] = Query ( None , title = \"Band Math expression\" , description = \"rio-tiler's band math expression (e.g B1/B2)\" , ) bidx : Optional [ str ] = Query ( None , title = \"Band indexes\" , description = \"comma (',') delimited band indexes\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . assets is not None : self . kwargs [ \"assets\" ] = self . assets . split ( \",\" ) if self . expression is not None : self . kwargs [ \"expression\" ] = self . expression if self . bidx is not None : self . kwargs [ \"indexes\" ] = tuple ( int ( s ) for s in re . findall ( r \"\\d+\" , self . bidx ) ) # We create a Sub-Class from the TMSTilerFactory and update 2 methods. @dataclass class STACTiler ( TMSTilerFactory ): \"\"\"Custom Tiler Class for STAC.\"\"\" reader : Type [ STACReader ] = STACReader # We set the Reader to STACReader by default layer_dependency : Type [ DefaultDependency ] = AssetsBidxExprParams # Overwrite info method to return the list of assets when no assets is passed. # 2 changes from the _info in the original factory: # - response_model: # response_model=cogInfo -> response_model=Union[List[str], Dict[str, cogInfo]] # The output of STACTiler.info is a dict in form of {\"asset1\": {`\u001dcogIngo`}} # - Return list of assets if no `assets` option passed # This can be usefull in case we don't know the assets present in the STAC item. def info ( self ): \"\"\"Register /info endpoint.\"\"\" @self . router . get ( \"/info\" , response_model = Union [ List [ str ], Dict [ str , Info ]], response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's basic info.\" }}, ) def info ( src_path = Depends ( self . path_dependency ), asset_params = Depends ( AssetsBidxParams ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return basic info.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : # `Assets` is a required options for `info`, # if not set we return the list of assets if not asset_params . assets : return src_dst . assets info = src_dst . info ( ** asset_params . kwargs , ** kwargs ) return info # Overwrite _metadata method because the STACTiler output model is different # response_model=cogMetadata -> response_model=Dict[str, cogMetadata] # Same as for info(), we update the output model to match the output result from STACTiler.metadata def metadata ( self ): \"\"\"Register /metadata endpoint.\"\"\" @self . router . get ( \"/metadata\" , response_model = Dict [ str , Metadata ], response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's metadata.\" }}, ) def metadata ( src_path = Depends ( self . path_dependency ), asset_params = Depends ( AssetsBidxParams ), metadata_params = Depends ( self . metadata_dependency ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return metadata.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . metadata ( metadata_params . pmin , metadata_params . pmax , ** asset_params . kwargs , ** metadata_params . kwargs , ** kwargs , ) return info stac = STACTiler ( router_prefix = \"stac\" ) Custom PathParams for path_dependency \u00b6 One common customization could be to create your own path_dependency (used in all endpoints). Here an example which allow a mosaic to be passed by a layer name instead of a full S3 url. import os import re from titiler.dependencies import DefaultDependency from typing import Optional , Type from rio_tiler.io import BaseReader from fastapi import HTTPException , Query MOSAIC_BACKEND = os . getenv ( \"TITILER_MOSAIC_BACKEND\" ) MOSAIC_HOST = os . getenv ( \"TITILER_MOSAIC_HOST\" ) @dataclass class PathParams ( DefaultDependency ): \"\"\"Create dataset path from args\"\"\" mosaic : str = Query ( ... , description = \"mosaic name\" ) # We need url to match default PathParams signature # Because we set `init=False` those params won't appear in OpenAPI docs. url : Optional [ str ] = field ( init = False , default = None ) def __post_init__ ( self ,): \"\"\"Define dataset URL.\"\"\" # mosaic name should be in form of `{user}.{layername}` if not re . match ( self . mosaic , r \"^[a-zA-Z0-9-_]{1,32}\\.[a-zA-Z0-9-_]{1,32}$\" ): raise HTTPException ( status_code = 400 , detail = f \"Invalid mosaic name { self . mosaic } .\" , ) self . url = f \" { MOSAIC_BACKEND }{ MOSAIC_HOST } / { self . mosaic } .json.gz\" Custom TMS \u00b6 import morecantile from rasterio.crs import CRS from titiler.endpoint.factory import TMSTilerFactory # 1. Create Custom TMS EPSG6933 = morecantile . TileMatrixSet . custom ( ( - 17357881.81713629 , - 7324184.56362408 , 17357881.81713629 , 7324184.56362408 ), CRS . from_epsg ( 6933 ), identifier = \"EPSG6933\" , matrix_scale = [ 1 , 1 ], ) # 2. Register TMS morecantile . tms . register ( custom_tms . EPSG6933 ) # 3. Create ENUM with available TMS TileMatrixSetNames = Enum ( # type: ignore \"TileMatrixSetNames\" , [( a , a ) for a in sorted ( morecantile . tms . list ())] ) # 4. Create Custom TMS dependency def TMSParams ( TileMatrixSetId : TileMatrixSetNames = Query ( TileMatrixSetNames . WebMercatorQuad , # type: ignore description = \"TileMatrixSet Name (default: 'WebMercatorQuad')\" , ) ) -> morecantile . TileMatrixSet : \"\"\"TileMatrixSet Dependency.\"\"\" return morecantile . tms . get ( TileMatrixSetId . name ) # 5. Create Tiler COGTilerWithCustomTMS = TMSTilerFactory ( reader = COGReader , tms_dependency = TMSParams , )","title":"Customization"},{"location":"concepts/customization/#example-of-stac-tiler","text":"While a STAC tiler is included in the default TiTiler application, it provides an illustrative example of why one might need a custom tiler. The default factories create endpoints that expect basic input like indexes=[1, 2, 3] and resampling_method='nearest' but STAC needs more info. The STAC reader provided by rio-tiler and rio-tiler-crs needs an assets= option to specify which STAC asset(s) you want to read. We can add additional dependencies to endpoint by using the additional_dependency options when creating the factory. from dataclasses import dataclass from titiler.endpoints.factory import TMSTilerFactory from rio_tiler_crs import STACReader from titiler.dependencies import DefaultDependency @dataclass class AssetsParams ( DefaultDependency ): \"\"\"Asset and Band indexes parameters.\"\"\" assets : Optional [ str ] = Query ( None , title = \"Asset indexes\" , description = \"comma (',') delimited asset names (might not be an available options of some readers)\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . assets is not None : self . kwargs [ \"assets\" ] = self . assets . split ( \",\" ) stac = TMSTilerFactory ( reader = STACReader , additional_dependency = AssetsParams , router_prefix = \"stac\" , ) With additional_dependency set to AssetsParams , each endpoint will now have assets as one of input function. While this is good, it's not enough. STACTiler metadata() and info() methods return a slightly different output that the usual COGReader (because of multiple assets). We then need to customize a bit more the tiler: from titiler.dependencies import DefaultDependency from titiler.endpoint.factory import TMSTilerFactory from titiler.models.cog import cogInfo , cogMetadata @dataclass class AssetsBidxParams ( DefaultDependency ): \"\"\"Asset and Band indexes parameters.\"\"\" assets : Optional [ str ] = Query ( None , title = \"Asset indexes\" , description = \"comma (',') delimited asset names (might not be an available options of some readers)\" , ) bidx : Optional [ str ] = Query ( None , title = \"Band indexes\" , description = \"comma (',') delimited band indexes\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . assets is not None : self . kwargs [ \"assets\" ] = self . assets . split ( \",\" ) if self . bidx is not None : self . kwargs [ \"indexes\" ] = tuple ( int ( s ) for s in re . findall ( r \"\\d+\" , self . bidx ) ) @dataclass class AssetsBidxExprParams ( DefaultDependency ): \"\"\"Assets, Band Indexes and Expression parameters.\"\"\" assets : Optional [ str ] = Query ( None , title = \"Asset indexes\" , description = \"comma (',') delimited asset names (might not be an available options of some readers)\" , ) expression : Optional [ str ] = Query ( None , title = \"Band Math expression\" , description = \"rio-tiler's band math expression (e.g B1/B2)\" , ) bidx : Optional [ str ] = Query ( None , title = \"Band indexes\" , description = \"comma (',') delimited band indexes\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . assets is not None : self . kwargs [ \"assets\" ] = self . assets . split ( \",\" ) if self . expression is not None : self . kwargs [ \"expression\" ] = self . expression if self . bidx is not None : self . kwargs [ \"indexes\" ] = tuple ( int ( s ) for s in re . findall ( r \"\\d+\" , self . bidx ) ) # We create a Sub-Class from the TMSTilerFactory and update 2 methods. @dataclass class STACTiler ( TMSTilerFactory ): \"\"\"Custom Tiler Class for STAC.\"\"\" reader : Type [ STACReader ] = STACReader # We set the Reader to STACReader by default layer_dependency : Type [ DefaultDependency ] = AssetsBidxExprParams # Overwrite info method to return the list of assets when no assets is passed. # 2 changes from the _info in the original factory: # - response_model: # response_model=cogInfo -> response_model=Union[List[str], Dict[str, cogInfo]] # The output of STACTiler.info is a dict in form of {\"asset1\": {`\u001dcogIngo`}} # - Return list of assets if no `assets` option passed # This can be usefull in case we don't know the assets present in the STAC item. def info ( self ): \"\"\"Register /info endpoint.\"\"\" @self . router . get ( \"/info\" , response_model = Union [ List [ str ], Dict [ str , Info ]], response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's basic info.\" }}, ) def info ( src_path = Depends ( self . path_dependency ), asset_params = Depends ( AssetsBidxParams ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return basic info.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : # `Assets` is a required options for `info`, # if not set we return the list of assets if not asset_params . assets : return src_dst . assets info = src_dst . info ( ** asset_params . kwargs , ** kwargs ) return info # Overwrite _metadata method because the STACTiler output model is different # response_model=cogMetadata -> response_model=Dict[str, cogMetadata] # Same as for info(), we update the output model to match the output result from STACTiler.metadata def metadata ( self ): \"\"\"Register /metadata endpoint.\"\"\" @self . router . get ( \"/metadata\" , response_model = Dict [ str , Metadata ], response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's metadata.\" }}, ) def metadata ( src_path = Depends ( self . path_dependency ), asset_params = Depends ( AssetsBidxParams ), metadata_params = Depends ( self . metadata_dependency ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return metadata.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . metadata ( metadata_params . pmin , metadata_params . pmax , ** asset_params . kwargs , ** metadata_params . kwargs , ** kwargs , ) return info stac = STACTiler ( router_prefix = \"stac\" )","title":"Example of STAC Tiler"},{"location":"concepts/customization/#custom-pathparams-for-path_dependency","text":"One common customization could be to create your own path_dependency (used in all endpoints). Here an example which allow a mosaic to be passed by a layer name instead of a full S3 url. import os import re from titiler.dependencies import DefaultDependency from typing import Optional , Type from rio_tiler.io import BaseReader from fastapi import HTTPException , Query MOSAIC_BACKEND = os . getenv ( \"TITILER_MOSAIC_BACKEND\" ) MOSAIC_HOST = os . getenv ( \"TITILER_MOSAIC_HOST\" ) @dataclass class PathParams ( DefaultDependency ): \"\"\"Create dataset path from args\"\"\" mosaic : str = Query ( ... , description = \"mosaic name\" ) # We need url to match default PathParams signature # Because we set `init=False` those params won't appear in OpenAPI docs. url : Optional [ str ] = field ( init = False , default = None ) def __post_init__ ( self ,): \"\"\"Define dataset URL.\"\"\" # mosaic name should be in form of `{user}.{layername}` if not re . match ( self . mosaic , r \"^[a-zA-Z0-9-_]{1,32}\\.[a-zA-Z0-9-_]{1,32}$\" ): raise HTTPException ( status_code = 400 , detail = f \"Invalid mosaic name { self . mosaic } .\" , ) self . url = f \" { MOSAIC_BACKEND }{ MOSAIC_HOST } / { self . mosaic } .json.gz\"","title":"Custom PathParams for path_dependency"},{"location":"concepts/customization/#custom-tms","text":"import morecantile from rasterio.crs import CRS from titiler.endpoint.factory import TMSTilerFactory # 1. Create Custom TMS EPSG6933 = morecantile . TileMatrixSet . custom ( ( - 17357881.81713629 , - 7324184.56362408 , 17357881.81713629 , 7324184.56362408 ), CRS . from_epsg ( 6933 ), identifier = \"EPSG6933\" , matrix_scale = [ 1 , 1 ], ) # 2. Register TMS morecantile . tms . register ( custom_tms . EPSG6933 ) # 3. Create ENUM with available TMS TileMatrixSetNames = Enum ( # type: ignore \"TileMatrixSetNames\" , [( a , a ) for a in sorted ( morecantile . tms . list ())] ) # 4. Create Custom TMS dependency def TMSParams ( TileMatrixSetId : TileMatrixSetNames = Query ( TileMatrixSetNames . WebMercatorQuad , # type: ignore description = \"TileMatrixSet Name (default: 'WebMercatorQuad')\" , ) ) -> morecantile . TileMatrixSet : \"\"\"TileMatrixSet Dependency.\"\"\" return morecantile . tms . get ( TileMatrixSetId . name ) # 5. Create Tiler COGTilerWithCustomTMS = TMSTilerFactory ( reader = COGReader , tms_dependency = TMSParams , )","title":"Custom TMS"},{"location":"concepts/data_formats/","text":"Data Formats \u00b6 placeholder","title":"Data Formats"},{"location":"concepts/data_formats/#data-formats","text":"placeholder","title":"Data Formats"},{"location":"concepts/dependencies/","text":"If you are new the concept of Dependency Injection , please checkout this awesome tutorial: fastapi.tiangolo.com/tutorial/dependencies/ In titiler Factories , we use the dependencies to define the inputs for each endpoints (and thus the OpenAPI documention). Example: @dataclass class ImageParams : \"\"\"Common Image parameters.\"\"\" max_size : Optional [ int ] = Query ( 1024 , description = \"Maximum image size to read onto.\" ) height : Optional [ int ] = Query ( None , description = \"Force output image height.\" ) width : Optional [ int ] = Query ( None , description = \"Force output image width.\" ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" super () . __post_init__ () if self . width and self . height : self . max_size = None @router . get ( r \"/preview.png\" ) def preview ( url : str = Query ( ... , description = \"data set URL\" ), params : ImageParams = Depends (), ): with COGReader ( url ) as cog : data , mask = cog . preview ( max_size = params . max_size , width = params . width , height = params . height , ) The factories allow users to set multiple default dependencies. Here is the list of common dependencies and their default values: path_dependency : Set dataset path (url). @dataclass class PathParams ( DefaultDependency ): \"\"\"Create dataset path from args\"\"\" url : str = Query ( ... , description = \"Dataset URL\" ) tms_dependency : The TMS dependency set the available TMS for a tile endpoint. # Allow all morecantile TMS def TMSParams ( TileMatrixSetId : TileMatrixSetNames = Query ( TileMatrixSetNames . WebMercatorQuad , # type: ignore description = \"TileMatrixSet Name (default: 'WebMercatorQuad')\" , ) ) -> morecantile . TileMatrixSet : \"\"\"TileMatrixSet Dependency.\"\"\" return morecantile . tms . get ( TileMatrixSetId . name ) # or # Restrict the TMS to `WebMercatorQuad` only def WebMercatorTMSParams ( TileMatrixSetId : WebMercatorTileMatrixSetName = Query ( WebMercatorTileMatrixSetName . WebMercatorQuad , # type: ignore description = \"TileMatrixSet Name (default: 'WebMercatorQuad')\" , ) ) -> morecantile . TileMatrixSet : \"\"\"TileMatrixSet Dependency.\"\"\" return morecantile . tms . get ( TileMatrixSetId . name ) layer_dependency : Define band indexes or expression @dataclass class BidxExprParams ( DefaultDependency ): \"\"\"Band Indexes and Expression parameters.\"\"\" bidx : Optional [ str ] = Query ( None , title = \"Band indexes\" , description = \"comma (',') delimited band indexes\" , ) expression : Optional [ str ] = Query ( None , title = \"Band Math expression\" , description = \"rio-tiler's band math expression (e.g B1/B2)\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . bidx is not None : self . kwargs [ \"indexes\" ] = tuple ( int ( s ) for s in re . findall ( r \"\\d+\" , self . bidx ) ) if self . expression is not None : self . kwargs [ \"expression\" ] = self . expression dataset_dependency : Overwride nodata value, apply rescaling or change default resampling. @dataclass class DatasetParams ( DefaultDependency ): \"\"\"Low level WarpedVRT Optional parameters.\"\"\" nodata : Optional [ Union [ str , int , float ]] = Query ( None , title = \"Nodata value\" , description = \"Overwrite internal Nodata value\" ) unscale : Optional [ bool ] = Query ( None , title = \"Apply internal Scale/Offset\" , description = \"Apply internal Scale/Offset\" , ) resampling_method : ResamplingNames = Query ( ResamplingNames . nearest , description = \"Resampling method.\" # type: ignore ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . nodata is not None : self . kwargs [ \"nodata\" ] = ( numpy . nan if self . nodata == \"nan\" else float ( self . nodata ) ) if self . unscale is not None : self . kwargs [ \"unscale\" ] = self . unscale if self . resampling_method is not None : self . kwargs [ \"resampling_method\" ] = self . resampling_method . name render_dependency : Image rendering options. @dataclass class RenderParams ( DefaultDependency ): \"\"\"Image Rendering options.\"\"\" rescale : Optional [ str ] = Query ( None , title = \"Min/Max data Rescaling\" , description = \"comma (',') delimited Min,Max bounds\" , ) color_formula : Optional [ str ] = Query ( None , title = \"Color Formula\" , description = \"rio-color formula (info: https://github.com/mapbox/rio-color)\" , ) color_map : Optional [ ColorMapNames ] = Query ( None , description = \"rio-tiler's colormap name\" ) return_mask : bool = Query ( True , description = \"Add mask to the output data.\" ) colormap : Optional [ Dict [ int , Tuple [ int , int , int , int ]]] = field ( init = False ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" self . colormap = cmap . get ( self . color_map . value ) if self . color_map else None additional_dependency : Default dependency, will be passed are **kwargs to all endpoints. additional_dependency : Callable [ ... , Dict ] = field ( default = lambda : dict ()) For TMSTilerFactory and TilerFactory * metadata_dependency : rio_tiler.io.BaseReader.metadata() methods options @dataclass class MetadataParams ( DefaultDependency ): \"\"\"Common Metadada parameters.\"\"\" # Required params pmin : float = Query ( 2.0 , description = \"Minimum percentile\" ) pmax : float = Query ( 98.0 , description = \"Maximum percentile\" ) # Optional params max_size : Optional [ int ] = Query ( None , description = \"Maximum image size to read onto.\" ) histogram_bins : Optional [ int ] = Query ( None , description = \"Histogram bins.\" ) histogram_range : Optional [ str ] = Query ( None , description = \"comma (',') delimited Min,Max histogram bounds\" ) bounds : Optional [ str ] = Query ( None , descriptions = \"comma (',') delimited Bounding box coordinates from which to calculate image statistics.\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . max_size is not None : self . kwargs [ \"max_size\" ] = self . max_size if self . bounds : self . kwargs [ \"bounds\" ] = tuple ( map ( float , self . bounds . split ( \",\" ))) hist_options = {} if self . histogram_bins : hist_options . update ( dict ( bins = self . histogram_bins )) if self . histogram_range : hist_options . update ( dict ( range = list ( map ( float , self . histogram_range . split ( \",\" )))) ) if hist_options : self . kwargs [ \"hist_options\" ] = hist_options img_dependency : Used in Crop/Preview to define size of the output image. @dataclass class ImageParams ( DefaultDependency ): \"\"\"Common Preview/Crop parameters.\"\"\" max_size : Optional [ int ] = Query ( 1024 , description = \"Maximum image size to read onto.\" ) height : Optional [ int ] = Query ( None , description = \"Force output image height.\" ) width : Optional [ int ] = Query ( None , description = \"Force output image width.\" ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . width and self . height : self . max_size = None if self . width is not None : self . kwargs [ \"width\" ] = self . width if self . height is not None : self . kwargs [ \"height\" ] = self . height if self . max_size is not None : self . kwargs [ \"max_size\" ] = self . max_size","title":"Dependencies"},{"location":"concepts/dynamic_tiling/","text":"Dynamic Tiling \u00b6 placeholder","title":"Dynamic Tiling"},{"location":"concepts/dynamic_tiling/#dynamic-tiling","text":"placeholder","title":"Dynamic Tiling"},{"location":"concepts/tile_matrix_sets/","text":"Tile Matrix Sets \u00b6 placeholder","title":"Tile Matrix Sets"},{"location":"concepts/tile_matrix_sets/#tile-matrix-sets","text":"placeholder","title":"Tile Matrix Sets"},{"location":"concepts/tiler_factories/","text":"Tiler Factories \u00b6 Tiler factories are helper functions that let you create a customized FastAPI router. from titiler.endpoints.factory import TilerFactory tiler = TilerFactory () print ([ r . path for r in tiler . router . routes ]) > [ '/bounds' , '/info' , '/metadata' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} @ {scale} x. {format} ' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} @ {scale} x' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} . {format} ' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} ' , '/tiles/ {z} / {x} / {y} @ {scale} x. {format} ' , '/tiles/ {z} / {x} / {y} @ {scale} x' , '/tiles/ {z} / {x} / {y} . {format} ' , '/tiles/ {z} / {x} / {y} ' , '/ {TileMatrixSetId} /tilejson.json' , '/tilejson.json' , '/ {TileMatrixSetId} /WMTSCapabilities.xml' , '/WMTSCapabilities.xml' , '/point/ {lon} , {lat} ' , '/preview. {format} ' , '/preview' , ] Factories \u00b6 Router created with the Tiler Factories will have basic routes: /bounds /info /tiles/... /tilesjon.json /WMTSCapabilities.xml /point TilerFactory \u00b6 placeholder TMSTilerFactory \u00b6 placeholder MosaicTilerFactory \u00b6 placeholder Readers \u00b6 placeholder","title":"Tiler Factories"},{"location":"concepts/tiler_factories/#tiler-factories","text":"Tiler factories are helper functions that let you create a customized FastAPI router. from titiler.endpoints.factory import TilerFactory tiler = TilerFactory () print ([ r . path for r in tiler . router . routes ]) > [ '/bounds' , '/info' , '/metadata' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} @ {scale} x. {format} ' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} @ {scale} x' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} . {format} ' , '/tiles/ {TileMatrixSetId} / {z} / {x} / {y} ' , '/tiles/ {z} / {x} / {y} @ {scale} x. {format} ' , '/tiles/ {z} / {x} / {y} @ {scale} x' , '/tiles/ {z} / {x} / {y} . {format} ' , '/tiles/ {z} / {x} / {y} ' , '/ {TileMatrixSetId} /tilejson.json' , '/tilejson.json' , '/ {TileMatrixSetId} /WMTSCapabilities.xml' , '/WMTSCapabilities.xml' , '/point/ {lon} , {lat} ' , '/preview. {format} ' , '/preview' , ]","title":"Tiler Factories"},{"location":"concepts/tiler_factories/#factories","text":"Router created with the Tiler Factories will have basic routes: /bounds /info /tiles/... /tilesjon.json /WMTSCapabilities.xml /point","title":"Factories"},{"location":"concepts/tiler_factories/#tilerfactory","text":"placeholder","title":"TilerFactory"},{"location":"concepts/tiler_factories/#tmstilerfactory","text":"placeholder","title":"TMSTilerFactory"},{"location":"concepts/tiler_factories/#mosaictilerfactory","text":"placeholder","title":"MosaicTilerFactory"},{"location":"concepts/tiler_factories/#readers","text":"placeholder","title":"Readers"},{"location":"deployment/ecs/","text":"AWS ECS (Fargate) + ALB (Application Load Balancer) \u00b6 The TiTiler repository includes an example that uses AWS CDK to deploy TiTiler on AWS' Elastic Container Service (ECS). The example handles tasks such as generating a docker image and setting up an application load balancer (ALB) and ECS services. Install CDK and connect to your AWS account. This step is only necessary once per AWS account. $ git clone https://github.com/developmentseed/titiler.git $ cd titiler && pip install -e . [ \"\u001ddeploy\" ] $ npm install cdk -g $ cdk bootstrap # Deploys the CDK toolkit stack into an AWS environment # in specific region $ cdk bootstrap aws:// ${ AWS_ACCOUNT_ID } /eu-central-1 Generate CloudFormation template $ cdk synth # Synthesizes and prints the CloudFormation template for this stack Update settings (see settings.md ) export TITILER_PROJECT = \"mytiler\" export TITILER_STAGE = \"dev\" export TITILER_MIN_ECS_INSTANCES = 10 Available settings for ECS: min_ecs_instances : int = 5 max_ecs_instances : int = 50 # CPU value | Memory value # 256 (.25 vCPU) | 0.5 GB, 1 GB, 2 GB # 512 (.5 vCPU) | 1 GB, 2 GB, 3 GB, 4 GB # 1024 (1 vCPU) | 2 GB, 3 GB, 4 GB, 5 GB, 6 GB, 7 GB, 8 GB # 2048 (2 vCPU) | Between 4 GB and 16 GB in 1-GB increments # 4096 (4 vCPU) | Between 8 GB and 30 GB in 1-GB increments task_cpu : int = 256 task_memory : int = 512 Deploy # Deploys the stack(s) titiler-ecs-dev in stack/app.py $ cdk deploy titiler-ecs-dev","title":"AWS ECS (Fargate) + ALB (Application Load Balancer)"},{"location":"deployment/ecs/#aws-ecs-fargate-alb-application-load-balancer","text":"The TiTiler repository includes an example that uses AWS CDK to deploy TiTiler on AWS' Elastic Container Service (ECS). The example handles tasks such as generating a docker image and setting up an application load balancer (ALB) and ECS services. Install CDK and connect to your AWS account. This step is only necessary once per AWS account. $ git clone https://github.com/developmentseed/titiler.git $ cd titiler && pip install -e . [ \"\u001ddeploy\" ] $ npm install cdk -g $ cdk bootstrap # Deploys the CDK toolkit stack into an AWS environment # in specific region $ cdk bootstrap aws:// ${ AWS_ACCOUNT_ID } /eu-central-1 Generate CloudFormation template $ cdk synth # Synthesizes and prints the CloudFormation template for this stack Update settings (see settings.md ) export TITILER_PROJECT = \"mytiler\" export TITILER_STAGE = \"dev\" export TITILER_MIN_ECS_INSTANCES = 10 Available settings for ECS: min_ecs_instances : int = 5 max_ecs_instances : int = 50 # CPU value | Memory value # 256 (.25 vCPU) | 0.5 GB, 1 GB, 2 GB # 512 (.5 vCPU) | 1 GB, 2 GB, 3 GB, 4 GB # 1024 (1 vCPU) | 2 GB, 3 GB, 4 GB, 5 GB, 6 GB, 7 GB, 8 GB # 2048 (2 vCPU) | Between 4 GB and 16 GB in 1-GB increments # 4096 (4 vCPU) | Between 8 GB and 30 GB in 1-GB increments task_cpu : int = 256 task_memory : int = 512 Deploy # Deploys the stack(s) titiler-ecs-dev in stack/app.py $ cdk deploy titiler-ecs-dev","title":"AWS ECS (Fargate) + ALB (Application Load Balancer)"},{"location":"deployment/lambda/","text":"AWS Lambda \u00b6 The TiTiler repository includes an example that uses AWS CDK to deploy TiTiler on AWS Lambda, AWS' serverless compute service. TiTiler is built on top of FastAPI , a modern, fast, Python web framework for building APIs. It doesn't work natively with AWS Lambda and API Gateway because FastAPI understands HTTP requests, not API Gateway's event and context JSON objects. However, we can make our FastAPI application work on Lambda by wrapping it with the awesome mangum module, which translates API Gateway events into HTTP requests. from mangum import Mangum from titiler.main import app handler = Mangum ( app , enable_lifespan = False ) The Lambda stack is also deployed by the AWS CDK utility. Under the hood, CDK will create the deployment package required for AWS Lambda, upload it to AWS, and handle the creation of the Lambda and API Gateway resources. Install CDK and connect to your AWS account. This step is only necessary once per AWS account. $ git clone https://github.com/developmentseed/titiler.git $ cd titiler && pip install -e . [ \"\u001ddeploy\" ] $ npm install cdk -g $ cdk bootstrap # Deploys the CDK toolkit stack into an AWS environment # in specific region $ cdk bootstrap aws:// ${ AWS_ACCOUNT_ID } /eu-central-1 Pre-Generate CFN template $ cdk synth # Synthesizes and prints the CloudFormation template for this stack Update settings (see settings.md ) export TITILER_PROJECT = \"mytiler\" export TITILER_STAGE = \"dev\" export TITILER_MEMORY = 512 Available settings for AWS Lambda: timeout : int = 10 memory : int = 1536 # The maximum of concurrent executions you want to reserve for the function. # Default: - No specific limit - account limit. max_concurrent : Optional [ int ] Deploy $ cdk deploy titiler-lambda-dev # Deploys the stack(s) titiler-lambda-dev in stack/app.py # Deploy in specific region $ AWS_DEFAULT_REGION = eu-central-1 AWS_REGION = eu-central-1 cdk deploy titiler-lambda-dev","title":"AWS Lambda"},{"location":"deployment/lambda/#aws-lambda","text":"The TiTiler repository includes an example that uses AWS CDK to deploy TiTiler on AWS Lambda, AWS' serverless compute service. TiTiler is built on top of FastAPI , a modern, fast, Python web framework for building APIs. It doesn't work natively with AWS Lambda and API Gateway because FastAPI understands HTTP requests, not API Gateway's event and context JSON objects. However, we can make our FastAPI application work on Lambda by wrapping it with the awesome mangum module, which translates API Gateway events into HTTP requests. from mangum import Mangum from titiler.main import app handler = Mangum ( app , enable_lifespan = False ) The Lambda stack is also deployed by the AWS CDK utility. Under the hood, CDK will create the deployment package required for AWS Lambda, upload it to AWS, and handle the creation of the Lambda and API Gateway resources. Install CDK and connect to your AWS account. This step is only necessary once per AWS account. $ git clone https://github.com/developmentseed/titiler.git $ cd titiler && pip install -e . [ \"\u001ddeploy\" ] $ npm install cdk -g $ cdk bootstrap # Deploys the CDK toolkit stack into an AWS environment # in specific region $ cdk bootstrap aws:// ${ AWS_ACCOUNT_ID } /eu-central-1 Pre-Generate CFN template $ cdk synth # Synthesizes and prints the CloudFormation template for this stack Update settings (see settings.md ) export TITILER_PROJECT = \"mytiler\" export TITILER_STAGE = \"dev\" export TITILER_MEMORY = 512 Available settings for AWS Lambda: timeout : int = 10 memory : int = 1536 # The maximum of concurrent executions you want to reserve for the function. # Default: - No specific limit - account limit. max_concurrent : Optional [ int ] Deploy $ cdk deploy titiler-lambda-dev # Deploys the stack(s) titiler-lambda-dev in stack/app.py # Deploy in specific region $ AWS_DEFAULT_REGION = eu-central-1 AWS_REGION = eu-central-1 cdk deploy titiler-lambda-dev","title":"AWS Lambda"},{"location":"deployment/settings/","text":"Configuration/Settings \u00b6 Deployment settings are managed via pydantic.BaseSettings and stored in stack.config.py . Pydantic BaseSettings can receive input to overwrite the default value from .env file or from environment variables. Variables in .env or in environment variable need to be prefixed with STACK_ : STACK_NAME = \"my-tiler\" STACK_STAGE = \"dev\" STACK_BUCKETS = '[\"my-bucket*\", \"*\"]' STACK_MOSAIC_HOST = \"my-bucket/mosaics\" STACK_MEMORY = 3008 # Uncomment to allow lambda to access content on requester-payer # buckets #STACK_ADDITIONAL_ENV='{\"AWS_REQUEST_PAYER\":\"requester\"}' Default values from stack.config.py : name : str = \"titiler\" stage : str = \"production\" owner : Optional [ str ] client : Optional [ str ] additional_env : Dict = {} buckets : List = [] ## ECS min_ecs_instances : int = 5 max_ecs_instances : int = 50 # CPU value | Memory value # 256 (.25 vCPU) | 0.5 GB, 1 GB, 2 GB # 512 (.5 vCPU) | 1 GB, 2 GB, 3 GB, 4 GB # 1024 (1 vCPU) | 2 GB, 3 GB, 4 GB, 5 GB, 6 GB, 7 GB, 8 GB # 2048 (2 vCPU) | Between 4 GB and 16 GB in 1-GB increments # 4096 (4 vCPU) | Between 8 GB and 30 GB in 1-GB increments task_cpu : int = 256 task_memory : int = 512 ## LAMBDA timeout : int = 10 memory : int = 1536 # The maximum of concurrent executions you want to reserve for the function. # Default: - No specific limit - account limit. max_concurrent : Optional [ int ]","title":"Configuration/Settings"},{"location":"deployment/settings/#configurationsettings","text":"Deployment settings are managed via pydantic.BaseSettings and stored in stack.config.py . Pydantic BaseSettings can receive input to overwrite the default value from .env file or from environment variables. Variables in .env or in environment variable need to be prefixed with STACK_ : STACK_NAME = \"my-tiler\" STACK_STAGE = \"dev\" STACK_BUCKETS = '[\"my-bucket*\", \"*\"]' STACK_MOSAIC_HOST = \"my-bucket/mosaics\" STACK_MEMORY = 3008 # Uncomment to allow lambda to access content on requester-payer # buckets #STACK_ADDITIONAL_ENV='{\"AWS_REQUEST_PAYER\":\"requester\"}' Default values from stack.config.py : name : str = \"titiler\" stage : str = \"production\" owner : Optional [ str ] client : Optional [ str ] additional_env : Dict = {} buckets : List = [] ## ECS min_ecs_instances : int = 5 max_ecs_instances : int = 50 # CPU value | Memory value # 256 (.25 vCPU) | 0.5 GB, 1 GB, 2 GB # 512 (.5 vCPU) | 1 GB, 2 GB, 3 GB, 4 GB # 1024 (1 vCPU) | 2 GB, 3 GB, 4 GB, 5 GB, 6 GB, 7 GB, 8 GB # 2048 (2 vCPU) | Between 4 GB and 16 GB in 1-GB increments # 4096 (4 vCPU) | Between 8 GB and 30 GB in 1-GB increments task_cpu : int = 256 task_memory : int = 512 ## LAMBDA timeout : int = 10 memory : int = 1536 # The maximum of concurrent executions you want to reserve for the function. # Default: - No specific limit - account limit. max_concurrent : Optional [ int ]","title":"Configuration/Settings"},{"location":"endpoints/cog/","text":"Cloud Optimized GeoTIFF \u00b6 from titiler.endpoints import cog from fastapi import FastAPI app = FastAPI () # The COG Tiler is created with the TilerFactory with the `cog` prefix app . include_router ( cog . router , prefix = \"/cog\" , tags = [ \"Cloud Optimized GeoTIFF\" ]) Tiles - GET \u00b6 :endpoint:/cog/tiles/[{TileMatrixSetId}]/{z}/{x}/{y}[@{scale}x][.{format}] PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL z : Mercator tile's zoom level. x : Mercator tile's column. y : Mercator tile's row. scale : Tile size scale, default is set to 1 (256x256). OPTIONAL format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Example: https://myendpoint/cog/tiles/1/2/3?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tiles/1/2/3.jpg?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tiles/WorldCRS84Quad/1/2/3@2x.png?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tiles/WorldCRS84Quad/1/2/3?url=https://somewhere.com/mycog.tif&bidx=1&rescale=0,1000&color_map=cfastie Preview - GET \u00b6 :endpoint:/cog/preview[.{format}] PathParams: format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/cog/preview?url=https://somewhere.com/mycog.tif https://myendpoint/cog/preview.jpg?url=https://somewhere.com/mycog.tif https://myendpoint/cog/preview?url=https://somewhere.com/mycog.tif&bidx=1&rescale=0,1000&color_map=cfastie Crop / Part - GET \u00b6 :endpoint:/cog/crop/{minx},{miny},{maxx},{maxy}.{format} PathParams: minx,miny,maxx,maxy : Comma (',') delimited bounding box in WGS84. format : Output image format QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/cog/crop/0,0,10,10.png?url=https://somewhere.com/mycog.tif https://myendpoint/cog/crop/0,0,10,10.png?url=https://somewhere.com/mycog.tif&bidx=1&rescale=0,1000&color_map=cfastie Point - GET \u00b6 :endpoint:/cog/point/{lon},{lat} PathParams: lon,lat, : Comma (',') delimited point Longitude and Latitude WGS84. QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL Example: https://myendpoint/cog/point/0,0?url=https://somewhere.com/mycog.tif https://myendpoint/cog/point/0,0?url=https://somewhere.com/mycog.tif&bidx=1 TilesJSON - GET \u00b6 :endpoint:/cog/[{TileMatrixSetId}]/tilejson.json - Get tileJSON document PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED tile_format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. tile_scale : Tile size scale, default is set to 1 (256x256). OPTIONAL minzoom : Overwrite default minzoom. OPTIONAL maxzoom : Overwrite default maxzoom. OPTIONAL kwargs : Other options will be forwarded to the tiles url. Example: https://myendpoint/cog/tilejson.json?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tilejson.json?url=https://somewhere.com/mycog.tif&tile_format=png https://myendpoint/cog/WorldCRS84Quad/tilejson.json?url=https://somewhere.com/mycog.tif&tile_scale=2&bidx=1,2,3 Bounds - GET \u00b6 :endpoint:/cog/bounds - Get general image bounds QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED Example: https://myendpoint/cog/bounds?url=https://somewhere.com/mycog.tif Info - GET \u00b6 :endpoint:/cog/info - Get general raster info - QueryParams: - url : Cloud Optimized GeoTIFF URL. REQUIRED Example: https://myendpoint/cog/info?url=https://somewhere.com/mycog.tif Metadata - GET \u00b6 :endpoint:/cog/metadata - Get raster statistics QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL pmin : min percentile, default is 2. OPTIONAL pmax : max percentile, default is 98. OPTIONAL max_size : Max image size from which to calculate statistics, default is 1024. OPTIONAL histogram_bins : Histogram bins, default is 20. OPTIONAL histogram_range : Comma (',') delimited histogram bounds. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Example: https://myendpoint/cog/metadata?url=https://somewhere.com/mycog.tif&bidx=1,2,3 Demo - GET \u00b6 :endpoint:/cog/viewer - COG Viewer QueryParams: url : Cloud Optimized GeoTIFF URL. OPTIONAL Example: https://myendpoint/cog/viewer?url=https://somewhere.com/mycog.tif Validate - GET \u00b6 :endpoint:/cog/validate - COG Viewer QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED strict : Treat warnings as errors (bool, default is False). OPTIONAL Example: https://myendpoint/cog/validate?url=https://somewhere.com/mycog.tif","title":"Cloud Optimized GeoTIFF"},{"location":"endpoints/cog/#cloud-optimized-geotiff","text":"from titiler.endpoints import cog from fastapi import FastAPI app = FastAPI () # The COG Tiler is created with the TilerFactory with the `cog` prefix app . include_router ( cog . router , prefix = \"/cog\" , tags = [ \"Cloud Optimized GeoTIFF\" ])","title":"Cloud Optimized GeoTIFF"},{"location":"endpoints/cog/#tiles-get","text":":endpoint:/cog/tiles/[{TileMatrixSetId}]/{z}/{x}/{y}[@{scale}x][.{format}] PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL z : Mercator tile's zoom level. x : Mercator tile's column. y : Mercator tile's row. scale : Tile size scale, default is set to 1 (256x256). OPTIONAL format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Example: https://myendpoint/cog/tiles/1/2/3?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tiles/1/2/3.jpg?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tiles/WorldCRS84Quad/1/2/3@2x.png?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tiles/WorldCRS84Quad/1/2/3?url=https://somewhere.com/mycog.tif&bidx=1&rescale=0,1000&color_map=cfastie","title":"Tiles - GET"},{"location":"endpoints/cog/#preview-get","text":":endpoint:/cog/preview[.{format}] PathParams: format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/cog/preview?url=https://somewhere.com/mycog.tif https://myendpoint/cog/preview.jpg?url=https://somewhere.com/mycog.tif https://myendpoint/cog/preview?url=https://somewhere.com/mycog.tif&bidx=1&rescale=0,1000&color_map=cfastie","title":"Preview - GET"},{"location":"endpoints/cog/#crop-part-get","text":":endpoint:/cog/crop/{minx},{miny},{maxx},{maxy}.{format} PathParams: minx,miny,maxx,maxy : Comma (',') delimited bounding box in WGS84. format : Output image format QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/cog/crop/0,0,10,10.png?url=https://somewhere.com/mycog.tif https://myendpoint/cog/crop/0,0,10,10.png?url=https://somewhere.com/mycog.tif&bidx=1&rescale=0,1000&color_map=cfastie","title":"Crop / Part - GET"},{"location":"endpoints/cog/#point-get","text":":endpoint:/cog/point/{lon},{lat} PathParams: lon,lat, : Comma (',') delimited point Longitude and Latitude WGS84. QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL Example: https://myendpoint/cog/point/0,0?url=https://somewhere.com/mycog.tif https://myendpoint/cog/point/0,0?url=https://somewhere.com/mycog.tif&bidx=1","title":"Point - GET"},{"location":"endpoints/cog/#tilesjson-get","text":":endpoint:/cog/[{TileMatrixSetId}]/tilejson.json - Get tileJSON document PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED tile_format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. tile_scale : Tile size scale, default is set to 1 (256x256). OPTIONAL minzoom : Overwrite default minzoom. OPTIONAL maxzoom : Overwrite default maxzoom. OPTIONAL kwargs : Other options will be forwarded to the tiles url. Example: https://myendpoint/cog/tilejson.json?url=https://somewhere.com/mycog.tif https://myendpoint/cog/tilejson.json?url=https://somewhere.com/mycog.tif&tile_format=png https://myendpoint/cog/WorldCRS84Quad/tilejson.json?url=https://somewhere.com/mycog.tif&tile_scale=2&bidx=1,2,3","title":"TilesJSON - GET"},{"location":"endpoints/cog/#bounds-get","text":":endpoint:/cog/bounds - Get general image bounds QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED Example: https://myendpoint/cog/bounds?url=https://somewhere.com/mycog.tif","title":"Bounds - GET"},{"location":"endpoints/cog/#info-get","text":":endpoint:/cog/info - Get general raster info - QueryParams: - url : Cloud Optimized GeoTIFF URL. REQUIRED Example: https://myendpoint/cog/info?url=https://somewhere.com/mycog.tif","title":"Info - GET"},{"location":"endpoints/cog/#metadata-get","text":":endpoint:/cog/metadata - Get raster statistics QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL pmin : min percentile, default is 2. OPTIONAL pmax : max percentile, default is 98. OPTIONAL max_size : Max image size from which to calculate statistics, default is 1024. OPTIONAL histogram_bins : Histogram bins, default is 20. OPTIONAL histogram_range : Comma (',') delimited histogram bounds. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Example: https://myendpoint/cog/metadata?url=https://somewhere.com/mycog.tif&bidx=1,2,3","title":"Metadata - GET"},{"location":"endpoints/cog/#demo-get","text":":endpoint:/cog/viewer - COG Viewer QueryParams: url : Cloud Optimized GeoTIFF URL. OPTIONAL Example: https://myendpoint/cog/viewer?url=https://somewhere.com/mycog.tif","title":"Demo - GET"},{"location":"endpoints/cog/#validate-get","text":":endpoint:/cog/validate - COG Viewer QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED strict : Treat warnings as errors (bool, default is False). OPTIONAL Example: https://myendpoint/cog/validate?url=https://somewhere.com/mycog.tif","title":"Validate - GET"},{"location":"endpoints/mosaic/","text":"MosaicJSON \u00b6 placeholder","title":"MosaicJSON"},{"location":"endpoints/mosaic/#mosaicjson","text":"placeholder","title":"MosaicJSON"},{"location":"endpoints/stac/","text":"SpatioTemporal Asset Catalog \u00b6 from titiler.endpoints import stac from fastapi import FastAPI app = FastAPI () # The STAC Tiler is created with the TilerFactory with the `stac` prefix app . include_router ( stac . router , prefix = \"/stac\" , tags = [ \"SpatioTemporal Asset Catalog\" ]) Tiles - GET \u00b6 :endpoint:/stac/tiles/[{TileMatrixSetId}]/{z}/{x}/{y}[@{scale}x][.{format}] PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL z : Mercator tiles's zoom level. x : Mercator tiles's column. y : Mercator tiles's row. scale : Tile size scale, default is set to 1 (256x256). OPTIONAL format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL* bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . assets OR * expression** is required Example: https://myendpoint/stac/tiles/1/2/3?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tiles/1/2/3.jpg?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tiles/WorldCRS84Quad/1/2/3@2x.png?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tiles/WorldCRS84Quad/1/2/3?url=https://somewhere.com/item.json&expression=B01/B02&rescale=0,1000&color_map=cfastie Preview - GET \u00b6 :endpoint:/stac/preview[.{format}] PathParams: format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL assets OR * expression** is required Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/stac/preview?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/preview.jpg?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/preview?url=https://somewhere.com/item.json&assets=B01&rescale=0,1000&color_map=cfastie Crop / Part - GET \u00b6 :endpoint:/stac/crop/{minx},{miny},{maxx},{maxy}.{format} PathParams: minx,miny,maxx,maxy : Comma (',') delimited bounding box in WGS84. format : Output image format QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . assets OR * expression** is required Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/stac/crop/0,0,10,10.png?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/crop/0,0,10,10.png?url=https://somewhere.com/item.json&assets=B01&rescale=0,1000&color_map=cfastie Point - GET \u00b6 :endpoint:/cog/point/{lon},{lat} PathParams: lon,lat, : Comma (',') delimited point Longitude and Latitude WGS84. QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL assets OR * expression** is required Example: https://myendpoint/stac/point/0,0?url=https://somewhere.com/item.json&assets=B01 TilesJSON - GET \u00b6 :endpoint:/stac/[{TileMatrixSetId}]/tilejson.json - Get tileJSON document PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL* tile_format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. tile_scale : Tile size scale, default is set to 1 (256x256). OPTIONAL minzoom : Overwrite default minzoom, default is set to 0 by stac-tiler. OPTIONAL maxzoom : Overwrite default maxzoom, default is set to 24 by stac-tiler. OPTIONAL kwargs : Other options will be forwarded to the tiles url. assets OR * expression** is required Example: https://myendpoint/stac/tilejson.json?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tilejson.json?url=https://somewhere.com/item.json&assets=B01&tile_format=png https://myendpoint/stac/WorldCRS84Quad/tilejson.json?url=https://somewhere.com/item.json&tile_scale=2&expression=B01/B02 Bounds - GET \u00b6 :endpoint:/stac/bounds - Return the bounds of the STAC item. QueryParams: url : STAC Item URL. REQUIRED Example: https://myendpoint/stac/bounds?url=https://somewhere.com/item.json Info - GET \u00b6 :endpoint:/stac/info - Return basic info on STAC item's COG. QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL Note: If assets is not provided, /stac/info will return the list of assets. Example: https://myendpoint/stac/info?url=https://somewhere.com/item.json&assets=B01 Metadata - GET \u00b6 :endpoint:/stac/metadata - Return metadata of STAC item's COG. QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. REQUIRED bidx : comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL pmin : min percentile, default is 2. OPTIONAL pmax : max percentile, default is 98. OPTIONAL max_size : Max image size from which to calculate statistics, default is 1024. OPTIONAL histogram_bins : Histogram bins, default is 20. OPTIONAL histogram_range : comma (',') delimited histogram bounds. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Example: https://myendpoint/stac/metadata?https://somewhere.com/item.json&assets=B01 Demo - GET \u00b6 :endpoint:/stac/viewer - STAC viewer QueryParams: url : STAC Item URL. OPTIONAL Example: https://myendpoint/stac/viewer?url=https://somewhere.com/item.json","title":"SpatioTemporal Asset Catalog"},{"location":"endpoints/stac/#spatiotemporal-asset-catalog","text":"from titiler.endpoints import stac from fastapi import FastAPI app = FastAPI () # The STAC Tiler is created with the TilerFactory with the `stac` prefix app . include_router ( stac . router , prefix = \"/stac\" , tags = [ \"SpatioTemporal Asset Catalog\" ])","title":"SpatioTemporal Asset Catalog"},{"location":"endpoints/stac/#tiles-get","text":":endpoint:/stac/tiles/[{TileMatrixSetId}]/{z}/{x}/{y}[@{scale}x][.{format}] PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL z : Mercator tiles's zoom level. x : Mercator tiles's column. y : Mercator tiles's row. scale : Tile size scale, default is set to 1 (256x256). OPTIONAL format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL* bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . assets OR * expression** is required Example: https://myendpoint/stac/tiles/1/2/3?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tiles/1/2/3.jpg?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tiles/WorldCRS84Quad/1/2/3@2x.png?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tiles/WorldCRS84Quad/1/2/3?url=https://somewhere.com/item.json&expression=B01/B02&rescale=0,1000&color_map=cfastie","title":"Tiles - GET"},{"location":"endpoints/stac/#preview-get","text":":endpoint:/stac/preview[.{format}] PathParams: format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. OPTIONAL QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL assets OR * expression** is required Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/stac/preview?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/preview.jpg?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/preview?url=https://somewhere.com/item.json&assets=B01&rescale=0,1000&color_map=cfastie","title":"Preview - GET"},{"location":"endpoints/stac/#crop-part-get","text":":endpoint:/stac/crop/{minx},{miny},{maxx},{maxy}.{format} PathParams: minx,miny,maxx,maxy : Comma (',') delimited bounding box in WGS84. format : Output image format QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL max_size : Max image size, default is 1024. OPTIONAL height : Force output image height. OPTIONAL width : Force output image width. OPTIONAL rescale : Comma (',') delimited Min,Max bounds. OPTIONAL color_formula : rio-color formula. OPTIONAL color_map : rio-tiler color map name. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . assets OR * expression** is required Note: if height and width are provided max_size will be ignored. Example: https://myendpoint/stac/crop/0,0,10,10.png?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/crop/0,0,10,10.png?url=https://somewhere.com/item.json&assets=B01&rescale=0,1000&color_map=cfastie","title":"Crop / Part - GET"},{"location":"endpoints/stac/#point-get","text":":endpoint:/cog/point/{lon},{lat} PathParams: lon,lat, : Comma (',') delimited point Longitude and Latitude WGS84. QueryParams: url : Cloud Optimized GeoTIFF URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL bidx : Comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL assets OR * expression** is required Example: https://myendpoint/stac/point/0,0?url=https://somewhere.com/item.json&assets=B01","title":"Point - GET"},{"location":"endpoints/stac/#tilesjson-get","text":":endpoint:/stac/[{TileMatrixSetId}]/tilejson.json - Get tileJSON document PathParams: TileMatrixSetId : TileMatrixSet name, default is WebMercatorQuad . OPTIONAL QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL* expression : rio-tiler's band math expression (e.g B1/B2). OPTIONAL* tile_format : Output image format, default is set to None and will be either JPEG or PNG depending on masked value. tile_scale : Tile size scale, default is set to 1 (256x256). OPTIONAL minzoom : Overwrite default minzoom, default is set to 0 by stac-tiler. OPTIONAL maxzoom : Overwrite default maxzoom, default is set to 24 by stac-tiler. OPTIONAL kwargs : Other options will be forwarded to the tiles url. assets OR * expression** is required Example: https://myendpoint/stac/tilejson.json?url=https://somewhere.com/item.json&assets=B01 https://myendpoint/stac/tilejson.json?url=https://somewhere.com/item.json&assets=B01&tile_format=png https://myendpoint/stac/WorldCRS84Quad/tilejson.json?url=https://somewhere.com/item.json&tile_scale=2&expression=B01/B02","title":"TilesJSON - GET"},{"location":"endpoints/stac/#bounds-get","text":":endpoint:/stac/bounds - Return the bounds of the STAC item. QueryParams: url : STAC Item URL. REQUIRED Example: https://myendpoint/stac/bounds?url=https://somewhere.com/item.json","title":"Bounds - GET"},{"location":"endpoints/stac/#info-get","text":":endpoint:/stac/info - Return basic info on STAC item's COG. QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. OPTIONAL Note: If assets is not provided, /stac/info will return the list of assets. Example: https://myendpoint/stac/info?url=https://somewhere.com/item.json&assets=B01","title":"Info - GET"},{"location":"endpoints/stac/#metadata-get","text":":endpoint:/stac/metadata - Return metadata of STAC item's COG. QueryParams: url : STAC Item URL. REQUIRED assets : Comma (',') delimited asset names. REQUIRED bidx : comma (',') delimited band indexes. OPTIONAL nodata : Overwrite internal Nodata value. OPTIONAL pmin : min percentile, default is 2. OPTIONAL pmax : max percentile, default is 98. OPTIONAL max_size : Max image size from which to calculate statistics, default is 1024. OPTIONAL histogram_bins : Histogram bins, default is 20. OPTIONAL histogram_range : comma (',') delimited histogram bounds. OPTIONAL resampling_method : rasterio resampling method. Default is nearest . Example: https://myendpoint/stac/metadata?https://somewhere.com/item.json&assets=B01","title":"Metadata - GET"},{"location":"endpoints/stac/#demo-get","text":":endpoint:/stac/viewer - STAC viewer QueryParams: url : STAC Item URL. OPTIONAL Example: https://myendpoint/stac/viewer?url=https://somewhere.com/item.json","title":"Demo - GET"},{"location":"endpoints/tms/","text":"TileMatrixSets \u00b6 :endpoint:/tileMatrixSets - Get the list of supported TileMatrixSet $ curl https://myendpoint/tileMatrixSets | jq { \"tileMatrixSets\": [ { \"id\": \"LINZAntarticaMapTilegrid\", \"title\": \"LINZ Antarctic Map Tile Grid (Ross Sea Region)\", \"links\": [ { \"href\": \"https://myendpoint/tileMatrixSets/LINZAntarticaMapTilegrid\", \"rel\": \"item\", \"type\": \"application/json\" } ] }, ... ] } :endpoint:/tileMatrixSets/{TileMatrixSetId} - Get the TileMatrixSet JSON document PathParams: TileMatrixSetId : TileMatrixSet name $ curl http://127.0.0.1:8000/tileMatrixSets/WebMercatorQuad | jq { \"type\": \"TileMatrixSetType\", \"title\": \"Google Maps Compatible for the World\", \"identifier\": \"WebMercatorQuad\", \"supportedCRS\": \"http://www.opengis.net/def/crs/EPSG/0/3857\", \"wellKnownScaleSet\": \"http://www.opengis.net/def/wkss/OGC/1.0/GoogleMapsCompatible\", \"boundingBox\": { \"type\": \"BoundingBoxType\", \"crs\": \"http://www.opengis.net/def/crs/EPSG/0/3857\", \"lowerCorner\": [ -20037508.3427892, -20037508.3427892 ], \"upperCorner\": [ 20037508.3427892, 20037508.3427892 ] }, \"tileMatrix\": [ { \"type\": \"TileMatrixType\", \"identifier\": \"0\", \"scaleDenominator\": 559082264.028717, \"topLeftCorner\": [ -20037508.3427892, 20037508.3427892 ], \"tileWidth\": 256, \"tileHeight\": 256, \"matrixWidth\": 1, \"matrixHeight\": 1 }, ...","title":"TileMatrixSets"},{"location":"endpoints/tms/#tilematrixsets","text":":endpoint:/tileMatrixSets - Get the list of supported TileMatrixSet $ curl https://myendpoint/tileMatrixSets | jq { \"tileMatrixSets\": [ { \"id\": \"LINZAntarticaMapTilegrid\", \"title\": \"LINZ Antarctic Map Tile Grid (Ross Sea Region)\", \"links\": [ { \"href\": \"https://myendpoint/tileMatrixSets/LINZAntarticaMapTilegrid\", \"rel\": \"item\", \"type\": \"application/json\" } ] }, ... ] } :endpoint:/tileMatrixSets/{TileMatrixSetId} - Get the TileMatrixSet JSON document PathParams: TileMatrixSetId : TileMatrixSet name $ curl http://127.0.0.1:8000/tileMatrixSets/WebMercatorQuad | jq { \"type\": \"TileMatrixSetType\", \"title\": \"Google Maps Compatible for the World\", \"identifier\": \"WebMercatorQuad\", \"supportedCRS\": \"http://www.opengis.net/def/crs/EPSG/0/3857\", \"wellKnownScaleSet\": \"http://www.opengis.net/def/wkss/OGC/1.0/GoogleMapsCompatible\", \"boundingBox\": { \"type\": \"BoundingBoxType\", \"crs\": \"http://www.opengis.net/def/crs/EPSG/0/3857\", \"lowerCorner\": [ -20037508.3427892, -20037508.3427892 ], \"upperCorner\": [ 20037508.3427892, 20037508.3427892 ] }, \"tileMatrix\": [ { \"type\": \"TileMatrixType\", \"identifier\": \"0\", \"scaleDenominator\": 559082264.028717, \"topLeftCorner\": [ -20037508.3427892, 20037508.3427892 ], \"tileWidth\": 256, \"tileHeight\": 256, \"matrixWidth\": 1, \"matrixHeight\": 1 }, ...","title":"TileMatrixSets"},{"location":"examples/Create_CustomSentinel2Tiler/","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } pre { line-height: 125%; margin: 0; } td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } .highlight-ipynb .hll { background-color: #ffffcc } .highlight-ipynb { background: #f8f8f8; } .highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */ .highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */ .highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: #666666 } /* Operator */ .highlight-ipynb .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight-ipynb .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */ .highlight-ipynb .ge { font-style: italic } /* Generic.Emph */ .highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */ .highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */ .highlight-ipynb .go { color: #888888 } /* Generic.Output */ .highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */ .highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */ .highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */ .highlight-ipynb .m { color: #666666 } /* Literal.Number */ .highlight-ipynb .s { color: #BA2121 } /* Literal.String */ .highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */ .highlight-ipynb .nb { color: #008000 } /* Name.Builtin */ .highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight-ipynb .no { color: #880000 } /* Name.Constant */ .highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */ .highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight-ipynb .nf { color: #0000FF } /* Name.Function */ .highlight-ipynb .nl { color: #A0A000 } /* Name.Label */ .highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight-ipynb .nv { color: #19177C } /* Name.Variable */ .highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */ .highlight-ipynb .mb { color: #666666 } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */ .highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */ .highlight-ipynb .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */ .highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */ .highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight-ipynb .fm { color: #0000FF } /* Name.Function.Magic */ .highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */ .highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */ .highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */ .highlight-ipynb .vm { color: #19177C } /* Name.Variable.Magic */ .highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */ .rendered_html a{text-decoration:inherit !important}.rendered_html :link{text-decoration:inherit !important}.rendered_html :visited{text-decoration:inherit !important}pre code{background-color:inherit !important}.highlight{color:#000000}.highlight code{color:#000000}.highlight .n{color:#333333}.highlight .p{color:#000000}.text_cell .prompt{display:none !important}div.input_prompt{padding:0.2em 0.4em}div.output_prompt{padding:0.4em}.text_cell{margin:0 !important;padding:0 !important;border:none !important}.text_cell_render{margin:0 !important;padding:0 !important;border:none !important}.rendered_html *+p{margin-top:inherit !important}.anchor-link{display:none !important}.code_cell{margin:0 !important;padding:5px 0 !important;border:none !important}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;box-pack:end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-flex}.celltoolbar .tags_button_container{display:-webkit-box;display:-ms-flexbox;display:flex}.celltoolbar .tags_button_container .tag-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;-webkit-box-shadow:none;box-shadow:none;width:inherit;font-size:13px;font-family:\"Helvetica Neue\", Helvetica, Arial, sans-serif;height:22px;line-height:22px;display:inline-block}div.input_area>div.highlight{margin:0.25em 0.4em !important}.code_cell pre{font-size:12px !important}.output_html table.dataframe{font-family:Arial, sans-serif;font-size:13px;line-height:20px}.output_html table.dataframe th,td{padding:4px;text-align:left}.bk-plot-wrapper tbody tr{background:none !important}.bk-plot-wrapper tbody tr:hover{background:none !important} /*# sourceMappingURL=jupyter-fixes.min.css.map */ MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Create Custom Sentinel-2 (COG) Tiler \u00b6 Sentinel 2 \u00b6 Thanks to Digital Earth Africa and in collaboration with Sinergise, Element 84, Amazon Web Services (AWS) and the Committee on Earth Observation Satellites (CEOS), Sentinel 2 (Level 2) data over Africa, usually stored as JPEG2000, has been translated to COG more important a STAC database and API has been setup. https://www.digitalearthafrica.org/news/operational-and-ready-use-satellite-data-now-available-across-africa The API is provided by @element84 and follows the latest specification: https://earth-search.aws.element84.com/v0 Requirements \u00b6 To be able to run this notebook you'll need the following requirements: rasterio ipyleaflet requests titiler uvicorn rio-tiler-pds cogeo-mosaic !pip install titiler[\"server\"] cogeo-mosaic ipyleaflet requests rio-tiler-pds 1. Create the CustomTiler \u00b6 In order to create our custom tiler we will use the rio-tiler-pds S2COGReader and the different Tiler Factories from titiler. \"\"\" Sentinel 2 (COG) Tiler. Based on rio-tiler-pds and titiler >>> pip install titiler rio-tiler-pds \"\"\" from dataclasses import dataclass , field from typing import Dict , Type , Optional , Sequence from titiler.endpoints.factory import TMSTilerFactory , MosaicTilerFactory from titiler.dependencies import DefaultDependency from titiler.models.dataset import Info , Metadata from rio_tiler_pds.sentinel.aws import S2COGReader from rio_tiler_pds.sentinel.utils import s2_sceneid_parser from fastapi import FastAPI , Depends , Query @dataclass class CustomPathParams : \"\"\"Create dataset path from args\"\"\" sceneid : str = Query ( ... , description = \"Landsat 8 Sceneid.\" ) scene_metadata : Dict = field ( init = False ) def __post_init__ ( self ,): \"\"\"Define dataset URL.\"\"\" self . url = self . sceneid self . scene_metadata = s2_sceneid_parser ( self . sceneid ) def BandsParams ( bands : str = Query ( ... , title = \"bands names\" , description = \"comma (',') delimited bands names.\" , ) ) -> Sequence [ str ]: \"\"\"Bands.\"\"\" return bands . split ( \",\" ) @dataclass class BandsExprParams ( DefaultDependency ): \"\"\"Band names and Expression parameters.\"\"\" bands : Optional [ str ] = Query ( None , title = \"bands names\" , description = \"comma (',') delimited bands names.\" , ) expression : Optional [ str ] = Query ( None , title = \"Band Math expression\" , description = \"rio-tiler's band math expression.\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . bands is not None : self . kwargs [ \"bands\" ] = self . bands . split ( \",\" ) if self . expression is not None : self . kwargs [ \"expression\" ] = self . expression @dataclass class S2COGTiler ( TMSTilerFactory ): \"\"\"Custom Tiler Class for STAC.\"\"\" reader : Type [ S2COGReader ] = field ( default = S2COGReader ) path_dependency : Type [ CustomPathParams ] = CustomPathParams layer_dependency : Type [ DefaultDependency ] = BandsExprParams def info ( self ): \"\"\"Register /info endpoint.\"\"\" @self . router . get ( \"/info\" , response_model = Info , response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's basic info.\" }}, ) def info ( src_path = Depends ( self . path_dependency ), bands = Depends ( BandsParams ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return basic info.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . info ( bands = bands , ** kwargs ) return info def metadata ( self ): \"\"\"Register /metadata endpoint.\"\"\" @self . router . get ( \"/metadata\" , response_model = Metadata , response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's metadata.\" }}, ) def metadata ( src_path = Depends ( self . path_dependency ), bands = Depends ( BandsParams ), metadata_params = Depends ( self . metadata_dependency ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return metadata.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . metadata ( metadata_params . pmin , metadata_params . pmax , bands = bands , ** metadata_params . kwargs , ** kwargs , ) return info app = FastAPI () scene_tiler = S2COGTiler ( router_prefix = \"scenes\" ) app . include_router ( scene_tiler . router , prefix = \"/scenes\" , tags = [ \"scenes\" ]) mosaic_tiler = MosaicTilerFactory ( router_prefix = \"mosaic\" , dataset_reader = S2COGReader , layer_dependency = BandsExprParams , add_update = False , add_create = False , ) app . include_router ( mosaic_tiler . router , prefix = \"/mosaic\" , tags = [ \"mosaic\" ]) 2. Launch the tiler \u00b6 Save the python code form 1. into a file named app.py and then start the server within another terminal $ uvicorn app:app 3. Search Data \u00b6 In [1]: import os import json import base64 import requests import datetime import itertools import urllib.parse import pathlib from io import BytesIO from functools import partial from concurrent import futures from rasterio.plot import reshape_as_image from rasterio.features import bounds as featureBounds from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: # Endpoint variables titiler_endpoint = \"http://127.0.0.1:8000\" stac_endpoint = \"https://earth-search.aws.element84.com/v0/search\" # Make sure both are up assert requests . get ( f \" { titiler_endpoint } /docs\" ) . status_code == 200 assert requests . get ( stac_endpoint ) . status_code == 200 More info: https://github.com/radiantearth/stac-api-spec for more documentation about the stac API AOI You can use geojson.io to define your search AOI In [3]: geojson = { \"type\" : \"FeatureCollection\" , \"features\" : [ { \"type\" : \"Feature\" , \"properties\" : {}, \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ - 2.83447265625 , 4.12728532324537 ], [ 2.120361328125 , 4.12728532324537 ], [ 2.120361328125 , 8.254982704877875 ], [ - 2.83447265625 , 8.254982704877875 ], [ - 2.83447265625 , 4.12728532324537 ] ] ] } } ] } bounds = featureBounds ( geojson ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 ) geo_json = GeoJSON ( data = geojson ) m . add_layer ( geo_json ) m var element = $('#abaf7a5a-b419-43be-af3f-8e50fb6b1cf9'); {\"model_id\": \"9ac780585652404b9b894105ec0a50a5\", \"version_major\": 2, \"version_minor\": 0} Define dates and other filters In [91]: start = datetime . datetime . strptime ( \"2019-01-01\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T00:00:00Z\" ) end = datetime . datetime . strptime ( \"2019-12-11\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T23:59:59Z\" ) # POST body query = { \"collections\" : [ \"sentinel-s2-l2a-cogs\" ], \"datetime\" : f \" { start } / { end } \" , \"query\" : { \"eo:cloud_cover\" : { \"lt\" : 3 }, \"sentinel:data_coverage\" : { \"gt\" : 10 } }, \"intersects\" : geojson [ \"features\" ][ 0 ][ \"geometry\" ], \"limit\" : 1000 , \"fields\" : { 'include' : [ 'id' , 'properties.datetime' , 'properties.eo:cloud_cover' ], # This will limit the size of returned body 'exclude' : [ 'assets' , 'links' ] # This will limit the size of returned body }, \"sortby\" : [ { \"field\" : \"properties.eo:cloud_cover\" , \"direction\" : \"desc\" }, ] } # POST Headers headers = { \"Content-Type\" : \"application/json\" , \"Accept-Encoding\" : \"gzip\" , \"Accept\" : \"application/geo+json\" , } data = requests . post ( stac_endpoint , headers = headers , json = query ) . json () print ( \"Results context:\" ) print ( data [ \"context\" ]) sceneid = [ f [ \"id\" ] for f in data [ \"features\" ]] cloudcover = [ f [ \"properties\" ][ \"eo:cloud_cover\" ] for f in data [ \"features\" ]] dates = [ f [ \"properties\" ][ \"datetime\" ][ 0 : 10 ] for f in data [ \"features\" ]] Results context: {'page': 1, 'limit': 1000, 'matched': 380, 'returned': 380} In [92]: data [ \"features\" ][ 0 ] Out[92]: {'bbox': [0.2927641695171779, 4.429965030479934, 1.2856914562725514, 5.4257779507944806], 'geometry': {'coordinates': [[[0.2967780962947474, 4.429965030479934], [0.2927641695171779, 5.422153918603194], [1.28314366979741, 5.4257779507944806], [1.2856914562725514, 4.43292307525344], [0.2967780962947474, 4.429965030479934]]], 'type': 'Polygon'}, 'id': 'S2B_31NBF_20190109_0_L2A', 'collection': 'sentinel-s2-l2a-cogs', 'type': 'Feature', 'properties': {'datetime': '2019-01-09T10:29:38Z', 'eo:cloud_cover': 2.98}} In [93]: m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 8 ) geo_json = GeoJSON ( data = data , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m var element = $('#1c265d5c-ce1a-40a3-adc8-3103f4c75a34'); {\"model_id\": \"49890eb94ca04c2a8a6d2d0baa0408a3\", \"version_major\": 2, \"version_minor\": 0} 4. Visualize One Item \u00b6 In [94]: # Print what band are available from rio_tiler_pds.sentinel.aws.sentinel2 import default_l2a_bands print ( default_l2a_bands ) ('B01', 'B02', 'B03', 'B04', 'B05', 'B06', 'B07', 'B08', 'B09', 'B11', 'B12', 'B8A') In [95]: # Fetch TileJSON # For this example we use the first `sceneid` return from the STAC API # and we sent the Bands to B04,B03,B02 which are red,green,blue data = requests . get ( f \" { titiler_endpoint } /scenes/tilejson.json?sceneid= { sceneid [ 4 ] } &bands=B04,B03,B02&rescale=0,2000\" ) . json () print ( data ) {'tilejson': '2.2.0', 'name': 'S2B_31NCG_20190926_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['http://127.0.0.1:8000/scenes/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?sceneid=S2B_31NCG_20190926_0_L2A&bands=B04%2CB03%2CB02&rescale=0%2C2000'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [1.1920033127639242, 5.337108286531346, 2.1859046942193197, 6.332392577649882], 'center': [1.688954003491622, 5.834750432090614, 8]} In [96]: bounds = data [ \"bounds\" ] m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = data [ \"tiles\" ][ 0 ], min_zoom = data [ \"minzoom\" ], max_zoom = data [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#e732fe00-a7d5-4309-8d3f-9b08415bea0f'); {\"model_id\": \"19f5612766a140f884b91e4f8a28c594\", \"version_major\": 2, \"version_minor\": 0} 5. Mosaic \u00b6 Working with 1 scene is great, but working with 10s is better. Lets see how to create mosaics and use it with our new tiler. 5.1 Create a MosaicJSON document \u00b6 To create a mosaicJSON, we can use developmentseed/cogeo-mosaic python module. Within this module there is a backend which is able to work with STAC API directly to create mosaicJSON. In [97]: from cogeo_mosaic.backends import MosaicBackend def custom_accessor ( feature ): \"\"\"Return feature identifier.\"\"\" return feature [ \"id\" ] with MosaicBackend ( \"stac+https://earth-search.aws.element84.com/v0/search\" , query , minzoom = 8 , maxzoom = 15 , backend_options = { \"accessor\" : custom_accessor }, ) as mosaic : print ( mosaic . metadata ) mosaic_doc = mosaic . mosaic_def . dict ( exclude_none = True ) {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 15, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8)} In [98]: mosaic_doc Out[98]: {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 15, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8), 'tiles': {'03333103': ['S2A_30PWQ_20191126_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2A_30PWQ_20190410_0_L2A'], '03333112': ['S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2A_30PWQ_20190226_0_L2A', 'S2A_30PWQ_20191123_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30PWQ_20191126_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2A_30PWQ_20191113_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2B_30PWQ_20190502_0_L2A', 'S2A_30PWQ_20190107_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2A_30PWQ_20190117_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2B_30PWQ_20191128_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30PWQ_20191029_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30PWQ_20190303_0_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2A_30PWQ_20190216_0_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2B_30PWQ_20190122_1_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30PWQ_20190211_0_L2A', 'S2B_30PWQ_20190102_0_L2A', 'S2A_30PWQ_20190318_0_L2A', 'S2B_30PWQ_20191208_0_L2A', 'S2B_30PWQ_20190313_0_L2A', 'S2A_30PWQ_20190410_0_L2A', 'S2B_30PWQ_20190201_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2B_30PWQ_20190512_0_L2A'], '03333113': ['S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2A_30PYQ_20190417_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2A_30PYQ_20190507_0_L2A', 'S2B_30PYQ_20190512_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2A_30PYQ_20190318_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30PYQ_20190117_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2B_30PYQ_20190313_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2B_30PYQ_20190122_1_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2B_30PYQ_20190122_0_L2A', 'S2A_30PYQ_20191123_0_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30PYQ_20190102_0_L2A', 'S2B_30PYQ_20190303_0_L2A', 'S2B_30PYQ_20190211_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2A_30PYQ_20190507_1_L2A', 'S2A_30PYQ_20190216_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A'], '12222002': ['S2B_30PZQ_20190218_0_L2A', 'S2B_31PCK_20190330_0_L2A', 'S2B_31PBK_20191105_0_L2A', 'S2A_31PBK_20190328_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2B_31PBK_20190221_0_L2A', 'S2B_31PBK_20191115_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2A_30PZQ_20190305_0_L2A', 'S2A_31PBK_20190213_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2A_31PBK_20190124_0_L2A', 'S2A_30PZQ_20190114_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2A_31PBK_20190117_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2B_31PBK_20191118_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2B_31PBK_20190412_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2A_31PBK_20190114_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2A_30PZQ_20190124_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PBK_20190507_0_L2A', 'S2B_31PBK_20190102_0_L2A', 'S2B_31PBK_20190112_0_L2A', 'S2A_31PBK_20191123_0_L2A', 'S2A_30PZQ_20190104_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2B_31PBK_20190303_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_30PZQ_20190213_0_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2B_31PBK_20190122_0_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2A_31PBK_20190104_0_L2A', 'S2A_30PZQ_20191130_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2B_31PBK_20190211_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A', 'S2A_31PBK_20190507_1_L2A', 'S2A_31PBK_20190216_0_L2A', 'S2A_31PBK_20191130_0_L2A'], '12222003': ['S2B_31PCK_20190330_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2A_31PDK_20190124_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A'], '12222012': ['S2A_31PDK_20190124_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A'], '03333121': ['S2A_30PWQ_20191126_0_L2A', 'S2B_30NWP_20190105_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2A_30NWP_20190130_0_L2A', 'S2B_30NWN_20190214_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2B_30NWP_20190326_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30NWP_20190214_0_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2A_30PWQ_20190410_0_L2A'], '03333130': ['S2A_30NWN_20191123_0_L2A', 'S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2A_30PWQ_20190226_0_L2A', 'S2B_30NXP_20191029_0_L2A', 'S2A_30NWN_20190226_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2A_30NWP_20190226_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NWN_20191113_0_L2A', 'S2A_30PWQ_20191123_0_L2A', 'S2B_30NWP_20191029_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30NXP_20190117_0_L2A', 'S2A_30NWP_20191123_0_L2A', 'S2A_30PWQ_20191126_0_L2A', 'S2B_30NXP_20190313_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2B_30NWP_20190105_0_L2A', 'S2A_30NWP_20190216_0_L2A', 'S2A_30NXP_20191123_0_L2A', 'S2A_30NXP_20190216_0_L2A', 'S2A_30NXP_20190507_0_L2A', 'S2A_30PWQ_20191113_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2A_30NWP_20190130_0_L2A', 'S2B_30PWQ_20190502_0_L2A', 'S2A_30PWQ_20190107_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2A_30NXP_20190226_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2B_30NWN_20190214_0_L2A', 'S2B_30NWP_20191208_0_L2A', 'S2A_30PWQ_20190117_0_L2A', 'S2B_30NWN_20190102_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2B_30NWP_20190313_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30NWP_20190512_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2B_30PWQ_20191128_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2B_30NWN_20190303_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2B_30PWQ_20191029_0_L2A', 'S2B_30NWP_20190326_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30PWQ_20190303_0_L2A', 'S2A_30NXP_20190507_1_L2A', 'S2B_30NWP_20190214_0_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30NXP_20190303_0_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2B_30NWP_20190303_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2A_30PWQ_20190216_0_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2B_30NWP_20190122_0_L2A', 'S2B_30PWQ_20190122_1_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30NXP_20190122_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30PWQ_20190211_0_L2A', 'S2B_30PWQ_20190102_0_L2A', 'S2A_30PWQ_20190318_0_L2A', 'S2B_30PWQ_20191208_0_L2A', 'S2B_30PWQ_20190313_0_L2A', 'S2B_30NXP_20190211_0_L2A', 'S2B_30NWN_20190211_0_L2A', 'S2A_30PWQ_20190410_0_L2A', 'S2B_30PWQ_20190201_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2A_30NWN_20190507_1_L2A', 'S2B_30NWP_20190211_0_L2A', 'S2B_30NWP_20190102_0_L2A', 'S2A_30NWP_20190507_1_L2A', 'S2B_30NXP_20190102_0_L2A', 'S2B_30PWQ_20190512_0_L2A'], '03333131': ['S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2A_30NZN_20190216_0_L2A', 'S2B_30NYP_20191029_0_L2A', 'S2B_30NXP_20191029_0_L2A', 'S2B_30NZP_20191118_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2A_30NZP_20190213_0_L2A', 'S2A_30PYQ_20190417_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2A_30NYN_20190117_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2B_30NYP_20191108_0_L2A', 'S2A_30NYN_20191123_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NYN_20190216_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NZP_20190313_0_L2A', 'S2A_30PYQ_20190507_0_L2A', 'S2B_30NYN_20191118_0_L2A', 'S2B_30PYQ_20190512_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2A_30NXP_20190117_0_L2A', 'S2A_30NZP_20190305_0_L2A', 'S2A_30PYQ_20190318_0_L2A', 'S2B_30NXP_20190313_0_L2A', 'S2A_30NZP_20190117_0_L2A', 'S2A_30NZP_20191123_0_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2B_30NYP_20190313_0_L2A', 'S2A_30NXP_20191123_0_L2A', 'S2A_30NXP_20190216_0_L2A', 'S2A_30NXP_20190507_0_L2A', 'S2B_30NZP_20191115_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2B_30NYP_20190112_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2B_30NZP_20191108_0_L2A', 'S2A_30NZP_20190507_0_L2A', 'S2A_30NZP_20190104_0_L2A', 'S2A_30NYN_20190226_0_L2A', 'S2A_30NYP_20190117_0_L2A', 'S2B_30NYN_20190211_0_L2A', 'S2B_30NYP_20190102_0_L2A', 'S2B_30NYN_20190122_0_L2A', 'S2A_30NYP_20190507_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2B_30NYP_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2B_30NZP_20190112_0_L2A', 'S2A_30NXP_20190226_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2A_30NYP_20190216_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2A_30PYQ_20190117_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2A_30NYP_20190226_0_L2A', 'S2B_30PYQ_20190313_0_L2A', 'S2A_30NYP_20191123_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2B_30PZQ_20190122_1_L2A', 'S2A_30NXP_20190507_1_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2B_30NXP_20190303_0_L2A', 'S2B_30NYP_20190122_0_L2A', 'S2A_30NZP_20190226_0_L2A', 'S2B_30PYQ_20190122_1_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2A_30NYP_20191113_1_L2A', 'S2B_30NZP_20190211_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZP_20190507_1_L2A', 'S2B_30PYQ_20190122_0_L2A', 'S2B_30NXP_20190122_0_L2A', 'S2A_30PYQ_20191123_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30NZP_20190122_1_L2A', 'S2B_30PYQ_20190102_0_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2B_30NXP_20190211_0_L2A', 'S2A_30NYP_20190507_1_L2A', 'S2B_30NYP_20190211_0_L2A', 'S2B_30PYQ_20190303_0_L2A', 'S2B_30PYQ_20190211_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2A_30NYN_20190507_1_L2A', 'S2A_30PYQ_20190507_1_L2A', 'S2A_30PYQ_20190216_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A', 'S2A_30NZP_20190216_0_L2A', 'S2B_30NZP_20190109_0_L2A', 'S2B_30NXP_20190102_0_L2A'], '12222020': ['S2A_30NZN_20190216_0_L2A', 'S2B_30PZQ_20190218_0_L2A', 'S2B_30NZP_20191118_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2B_31PCK_20190330_0_L2A', 'S2B_31PBK_20191105_0_L2A', 'S2A_31PBK_20190328_0_L2A', 'S2A_30NZP_20190213_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2B_31PBK_20190221_0_L2A', 'S2B_31PBK_20191115_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2A_30PZQ_20190305_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2A_31PBK_20190213_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2B_31NBH_20190129_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NZP_20190313_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2A_31PBK_20190124_0_L2A', 'S2A_30NZP_20190305_0_L2A', 'S2A_30PZQ_20190114_0_L2A', 'S2A_30NZP_20190117_0_L2A', 'S2A_30NZP_20191123_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2A_31PBK_20190117_0_L2A', 'S2A_31NBJ_20190305_0_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2A_31NCJ_20191210_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31PBK_20191118_0_L2A', 'S2A_31NCJ_20191130_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2B_31PBK_20190412_0_L2A', 'S2B_30NZP_20191115_0_L2A', 'S2B_31NBJ_20190109_0_L2A', 'S2A_31NBH_20190305_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2A_31PBK_20190114_0_L2A', 'S2A_31NCJ_20190404_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2B_30NZP_20191108_0_L2A', 'S2A_30NZP_20190507_0_L2A', 'S2A_30NZP_20190104_0_L2A', 'S2B_31NBH_20190109_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2B_30NZP_20190112_0_L2A', 'S2A_30PZQ_20190124_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PBK_20190507_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2B_31NBJ_20191115_0_L2A', 'S2A_31NCJ_20190305_0_L2A', 'S2B_31PBK_20190102_0_L2A', 'S2B_31PBK_20190112_0_L2A', 'S2A_31PBK_20191123_0_L2A', 'S2A_30PZQ_20190104_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2B_30PZQ_20190122_1_L2A', 'S2B_31PBK_20190303_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2A_31NCJ_20190213_0_L2A', 'S2A_31NCJ_20190104_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_30NZP_20190226_0_L2A', 'S2B_30NZP_20190211_0_L2A', 'S2B_31NCJ_20190109_0_L2A', 'S2A_30PZQ_20190213_0_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZP_20190507_1_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2A_31NBJ_20190104_0_L2A', 'S2B_31PBK_20190122_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2B_30NZP_20190122_1_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2A_31PBK_20190104_0_L2A', 'S2A_30PZQ_20191130_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2B_31PBK_20190211_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A', 'S2A_30NZP_20190216_0_L2A', 'S2B_30NZP_20190109_0_L2A', 'S2A_31PBK_20190507_1_L2A', 'S2A_31PBK_20190216_0_L2A', 'S2A_31PBK_20191130_0_L2A', 'S2A_31NBJ_20190524_0_L2A'], '12222021': ['S2B_31PCK_20190330_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2A_31PDK_20190124_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2A_31NCJ_20191210_0_L2A', 'S2B_31NDH_20190109_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2A_31NCJ_20191130_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2A_31NDJ_20190404_0_L2A', 'S2A_31NCJ_20190404_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31NDJ_20191130_0_L2A', 'S2A_31NCJ_20190305_0_L2A', 'S2B_31NDJ_20190109_0_L2A', 'S2A_31NCJ_20190213_0_L2A', 'S2A_31NCJ_20190104_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2B_31NCJ_20190109_0_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A', 'S2A_31NDJ_20190104_0_L2A'], '12222030': ['S2A_31PDK_20190124_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2A_31NDJ_20190404_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31NDJ_20191130_0_L2A', 'S2B_31NDJ_20190109_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A', 'S2A_31NDJ_20190104_0_L2A'], '03333123': ['S2A_30NWM_20190226_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWN_20190214_0_L2A'], '03333132': ['S2A_30NWN_20191123_0_L2A', 'S2B_30NXM_20190402_0_L2A', 'S2A_30NWN_20190226_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2A_30NWM_20190226_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NWN_20191113_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWN_20190214_0_L2A', 'S2B_30NWN_20190102_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2B_30NWN_20190303_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2B_30NWN_20190211_0_L2A', 'S2A_30NWN_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '03333133': ['S2B_30NXM_20190402_0_L2A', 'S2B_30NZM_20191029_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2A_30NZN_20190216_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2B_30NYM_20190122_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2A_30NYN_20190117_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30NYM_20191208_0_L2A', 'S2A_30NYN_20191123_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NYN_20190216_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NYN_20191118_0_L2A', 'S2B_30NZM_20190422_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2A_30NYN_20190318_1_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2B_30NYM_20190109_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2A_30NYN_20190226_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NYN_20190211_0_L2A', 'S2B_30NYN_20190122_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2B_30NZM_20190211_0_L2A', 'S2B_30NZM_20190122_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2A_30NYM_20190507_1_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2A_30NZM_20190226_0_L2A', 'S2A_30NYN_20190507_1_L2A', 'S2A_30NZM_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222022': ['S2B_31NCG_20190926_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2B_30NZM_20191029_0_L2A', 'S2A_30NZN_20190216_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_31NBG_20190812_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2B_31NBH_20190129_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2A_31NBH_20190305_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2B_31NBH_20190109_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2A_30NZM_20190226_0_L2A'], '12222023': ['S2A_31NDG_20191130_0_L2A', 'S2B_31NCG_20190926_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2A_31NDG_20190223_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_31NDG_20191107_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2B_31NDG_20190916_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190807_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2A_31NDG_20191210_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2B_31NDH_20190109_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '12222032': ['S2A_31NDG_20191107_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '03333301': ['S2B_30NWK_20190313_0_L2A', 'S2A_30NWM_20190226_0_L2A', 'S2B_30NWL_20190214_0_L2A', 'S2A_30NWK_20191103_0_L2A', 'S2B_30NWK_20191118_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2B_30NWK_20190830_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWK_20190611_0_L2A', 'S2B_30NWK_20190731_0_L2A', 'S2A_30NWL_20190507_1_L2A', 'S2A_30NWK_20190507_1_L2A'], '03333310': ['S2B_30NXM_20190402_0_L2A', 'S2B_30NWK_20190313_0_L2A', 'S2B_30NXK_20190102_0_L2A', 'S2A_30NWM_20190226_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NWL_20190214_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2A_30NWK_20191103_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NWK_20191118_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NWK_20190830_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWK_20190611_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2B_30NWK_20190731_0_L2A', 'S2A_30NWL_20190507_1_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NWK_20190507_1_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '03333311': ['S2A_30NZK_20191021_0_L2A', 'S2B_30NZK_20191115_0_L2A', 'S2B_30NXM_20190402_0_L2A', 'S2B_30NZM_20191029_0_L2A', 'S2A_30NYL_20191123_0_L2A', 'S2B_30NYL_20191118_0_L2A', 'S2B_30NYL_20191108_0_L2A', 'S2B_30NYL_20190728_0_L2A', 'S2A_30NZL_20191210_0_L2A', 'S2A_30NZL_20191130_0_L2A', 'S2B_30NZK_20190109_0_L2A', 'S2B_30NZL_20191115_1_L2A', 'S2A_30NYL_20191203_0_L2A', 'S2B_30NYM_20190122_0_L2A', 'S2B_30NXK_20190102_0_L2A', 'S2B_30NYL_20191208_0_L2A', 'S2A_30NYK_20191203_0_L2A', 'S2A_30NYL_20190723_0_L2A', 'S2B_30NYL_20190611_0_L2A', 'S2A_30NZK_20190213_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NYM_20191208_0_L2A', 'S2B_30NZL_20190916_0_L2A', 'S2A_30NZL_20191031_0_L2A', 'S2A_30NZL_20190305_0_L2A', 'S2A_30NYL_20190223_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2A_30NZL_20190213_0_L2A', 'S2B_30NZL_20190218_0_L2A', 'S2A_30NYL_20191210_0_L2A', 'S2A_30NYL_20190812_0_L2A', 'S2B_30NZM_20190422_0_L2A', 'S2B_30NYK_20190102_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NYK_20191118_0_L2A', 'S2B_30NZL_20191115_0_L2A', 'S2B_30NZK_20190218_0_L2A', 'S2A_30NYK_20190517_0_L2A', 'S2B_30NYL_20190109_0_L2A', 'S2B_30NYK_20190611_0_L2A', 'S2B_30NYL_20190218_0_L2A', 'S2A_30NYK_20191123_0_L2A', 'S2B_30NYM_20190109_0_L2A', 'S2B_30NYL_20191105_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2A_30NZK_20191031_0_L2A', 'S2B_30NYL_20190618_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NYL_20190916_0_L2A', 'S2A_30NZK_20191130_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2B_30NZM_20190211_0_L2A', 'S2B_30NZM_20190122_0_L2A', 'S2A_30NZK_20190104_0_L2A', 'S2A_30NYL_20190305_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2A_30NZL_20190812_0_L2A', 'S2A_30NYM_20190507_1_L2A', 'S2B_30NZL_20191105_0_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NZM_20190226_0_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NYK_20190815_0_L2A', 'S2A_30NZM_20190507_1_L2A', 'S2A_30NYL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222200': ['S2B_31NBF_20190109_0_L2A', 'S2A_30NZK_20191021_0_L2A', 'S2B_31NCG_20190926_0_L2A', 'S2B_30NZK_20191115_0_L2A', 'S2B_31NCF_20190208_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2A_30NZL_20191210_0_L2A', 'S2A_30NZL_20191130_0_L2A', 'S2B_30NZK_20190109_0_L2A', 'S2A_31NBE_20190812_0_L2A', 'S2B_30NZL_20191115_1_L2A', 'S2B_31NBE_20190916_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2B_31NBF_20191115_1_L2A', 'S2A_31NBG_20190812_0_L2A', 'S2B_31NCF_20190109_0_L2A', 'S2A_30NZK_20190213_0_L2A', 'S2B_31NBF_20190916_0_L2A', 'S2A_31NCF_20191130_0_L2A', 'S2B_30NZL_20190916_0_L2A', 'S2A_30NZL_20191031_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2A_30NZL_20190305_0_L2A', 'S2A_31NCF_20191210_0_L2A', 'S2B_31NBF_20190218_0_L2A', 'S2A_30NZL_20190213_0_L2A', 'S2B_30NZL_20190218_0_L2A', 'S2A_31NBE_20191130_0_L2A', 'S2A_31NBF_20191130_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2B_31NBE_20190817_0_L2A', 'S2B_30NZL_20191115_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2B_30NZK_20190218_0_L2A', 'S2B_31NBE_20190330_0_L2A', 'S2B_31NBE_20191115_0_L2A', 'S2A_30NZK_20191031_0_L2A', 'S2B_31NBE_20190218_0_L2A', 'S2A_31NBF_20190812_0_L2A', 'S2A_31NCF_20190305_0_L2A', 'S2A_31NBE_20190104_0_L2A', 'S2B_31NBF_20191105_0_L2A', 'S2A_30NZK_20191130_0_L2A', 'S2B_31NBE_20190208_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2A_31NBE_20190305_0_L2A', 'S2B_31NBE_20191105_0_L2A', 'S2A_30NZK_20190104_0_L2A', 'S2A_30NZL_20190812_0_L2A', 'S2B_30NZL_20191105_0_L2A', 'S2A_31NCE_20190305_0_L2A', 'S2A_31NBE_20191031_0_L2A'], '12222201': ['S2A_31NDG_20191130_0_L2A', 'S2B_31NCG_20190926_0_L2A', 'S2B_31NCF_20190208_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2B_31NDF_20190327_0_L2A', 'S2A_31NDG_20190223_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2B_31NCF_20190109_0_L2A', 'S2A_31NDG_20191107_0_L2A', 'S2B_31NDF_20190923_0_L2A', 'S2A_31NCF_20191130_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2A_31NCF_20191210_0_L2A', 'S2B_31NDF_20190406_0_L2A', 'S2B_31NDG_20190916_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190807_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2A_31NDG_20191210_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2B_31NDF_20190218_0_L2A', 'S2A_31NDF_20191210_0_L2A', 'S2A_31NDF_20191107_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDF_20190101_0_L2A', 'S2A_31NCF_20190305_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2A_31NDF_20190223_0_L2A', 'S2B_31NDF_20191205_0_L2A', 'S2B_31NDF_20191013_0_L2A', 'S2A_31NDF_20190131_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2A_31NCE_20190305_0_L2A', 'S2B_31NDF_20190506_1_L2A', 'S2B_31NDF_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '12222210': ['S2B_31NDF_20190327_0_L2A', 'S2A_31NDG_20191107_0_L2A', 'S2B_31NDF_20190923_0_L2A', 'S2B_31NDF_20190406_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2A_31NDF_20191107_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDF_20190101_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2B_31NDF_20191013_0_L2A', 'S2A_31NDF_20190131_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2B_31NDF_20190506_1_L2A', 'S2B_31NDF_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '03333303': ['S2A_30NWK_20191103_0_L2A', 'S2B_30NWK_20190830_0_L2A'], '03333312': ['S2B_30NWK_20190313_0_L2A', 'S2B_30NXK_20190102_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2A_30NWK_20191103_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NWK_20191118_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2B_30NWK_20190830_0_L2A', 'S2B_30NWK_20190611_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2B_30NWK_20190731_0_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NWK_20190507_1_L2A'], '03333313': ['S2B_30NXK_20190102_0_L2A', 'S2A_30NYK_20191203_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2B_30NYK_20190102_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NYK_20191118_0_L2A', 'S2A_30NYK_20190517_0_L2A', 'S2B_30NYK_20190611_0_L2A', 'S2A_30NYK_20191123_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NYK_20190815_0_L2A'], '12222202': ['S2A_30NZK_20191021_0_L2A', 'S2B_30NZK_20191115_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2B_30NZK_20190109_0_L2A', 'S2A_31NBE_20190812_0_L2A', 'S2A_30NZK_20190213_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2A_31NBE_20191130_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2B_31NBE_20190817_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2B_31NBE_20190330_0_L2A', 'S2B_31NBE_20191115_0_L2A', 'S2A_30NZK_20191031_0_L2A', 'S2B_31NBE_20190218_0_L2A', 'S2A_31NBE_20190104_0_L2A', 'S2A_31NBE_20190305_0_L2A', 'S2B_31NBE_20191105_0_L2A', 'S2A_31NCE_20190305_0_L2A', 'S2A_31NBE_20191031_0_L2A'], '12222203': ['S2A_31NCE_20191021_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2A_31NCE_20190305_0_L2A']}} 5.2 Custom Filter \u00b6 As we can see in the mosaicJSON, each quadkey index has 10s scenes. Because we want to build a visual mosaic, we don't need as many assets and maybe 1 or 2 scene per quadkey will be enought to create mercator tiles. To reduce the number of scenes per quadkey we need to apply a custom filter while building the mosaic. In [99]: from typing import Dict , List , Sequence , Optional from pygeos import polygons import mercantile def optimized_filter ( tile : mercantile . Tile , # noqa dataset : Sequence [ Dict ], geoms : Sequence [ polygons ], minimum_tile_cover = None , # noqa tile_cover_sort = False , # noqa maximum_items_per_tile : Optional [ int ] = None , ) -> List : \"\"\"Optimized filter that keeps only one item per grid ID.\"\"\" gridid : List [ str ] = [] selected_dataset : List [ Dict ] = [] for item in dataset : grid = item [ \"id\" ] . split ( \"_\" )[ 1 ] if grid not in gridid : gridid . append ( grid ) selected_dataset . append ( item ) dataset = selected_dataset indices = list ( range ( len ( dataset ))) if maximum_items_per_tile : indices = indices [: maximum_items_per_tile ] return [ dataset [ ind ] for ind in indices ] with MosaicBackend ( \"stac+https://earth-search.aws.element84.com/v0/search\" , optquery , minzoom = 8 , maxzoom = 14 , backend_options = { \"accessor\" : custom_accessor , \"asset_filter\" : optimized_filter }, ) as mosaic : print ( mosaic . metadata ) mosaic_doc = mosaic . mosaic_def . dict ( exclude_none = True ) {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 14, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8)} In [100]: mosaic_doc Out[100]: {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 14, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8), 'tiles': {'03333103': ['S2B_30PWQ_20191201_0_L2A'], '03333112': ['S2A_30PXQ_20191203_0_L2A', 'S2B_30PWQ_20191201_0_L2A'], '03333113': ['S2A_30PXQ_20191203_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A'], '12222002': ['S2A_31PBK_20191210_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_30PZQ_20191123_0_L2A'], '12222003': ['S2A_31PCK_20191210_0_L2A', 'S2A_31PDK_20191210_0_L2A'], '12222012': ['S2A_31PDK_20191210_0_L2A'], '03333121': ['S2B_30PWQ_20191201_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2B_30NWP_20190326_0_L2A'], '03333130': ['S2B_30NWN_20191208_0_L2A', 'S2B_30NXN_20191208_0_L2A', 'S2B_30NXP_20191208_0_L2A', 'S2A_30PXQ_20191203_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2B_30NWP_20190326_0_L2A'], '03333131': ['S2B_30NXN_20191208_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2B_30NXP_20191208_0_L2A', 'S2A_30PXQ_20191203_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30NYP_20191128_0_L2A', 'S2B_30NZP_20191128_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A'], '12222020': ['S2A_31NCJ_20191210_0_L2A', 'S2A_31PBK_20191210_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2B_30NZP_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2B_31NBJ_20191115_0_L2A', 'S2B_31NCH_20190109_0_L2A'], '12222021': ['S2A_31NCJ_20191210_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31NDJ_20191205_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31NDH_20190109_0_L2A'], '12222030': ['S2A_31PDK_20191210_0_L2A', 'S2B_31NDJ_20191205_0_L2A'], '03333123': ['S2B_30NWN_20190326_0_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333132': ['S2B_30NWN_20191208_0_L2A', 'S2B_30NXN_20191208_0_L2A', 'S2A_30NXM_20190507_1_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333133': ['S2B_30NYM_20191208_0_L2A', 'S2B_30NXN_20191208_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222022': ['S2A_31NCG_20191210_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2A_31NBG_20190812_0_L2A', 'S2B_31NCH_20190109_0_L2A'], '12222023': ['S2A_31NCG_20191210_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31NDH_20190109_0_L2A'], '12222032': ['S2A_31NDG_20191207_0_L2A'], '03333301': ['S2A_30NWL_20190507_1_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333310': ['S2B_30NXK_20191208_0_L2A', 'S2A_30NWL_20190507_1_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333311': ['S2A_30NZL_20191210_0_L2A', 'S2B_30NXK_20191208_0_L2A', 'S2B_30NYL_20191208_0_L2A', 'S2B_30NYM_20191208_0_L2A', 'S2A_30NYK_20191203_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222200': ['S2A_30NZL_20191210_0_L2A', 'S2A_31NBF_20191210_0_L2A', 'S2A_31NCF_20191210_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2A_31NBG_20190812_0_L2A'], '12222201': ['S2A_31NCF_20191210_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_31NDF_20191207_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NCE_20191021_0_L2A'], '12222210': ['S2A_31NDF_20191207_0_L2A', 'S2A_31NDG_20191207_0_L2A'], '03333312': ['S2B_30NXK_20191208_0_L2A'], '03333313': ['S2B_30NXK_20191208_0_L2A', 'S2A_30NYK_20191203_0_L2A'], '12222202': ['S2A_31NCE_20191021_0_L2A'], '12222203': ['S2A_31NCE_20191021_0_L2A']}} 5.3 Save Mosaic \u00b6 In [101]: mosaic_file = \"mymosaic.json.gz\" with MosaicBackend ( mosaic_file , mosaic_def = mosaic_doc ) as mosaic : mosaic . write ( overwrite = True ) In [102]: # We need to pass absolute path to the tiler mosaic = str ( pathlib . Path ( mosaic_file ) . absolute ()) 5.4 Use It \u00b6 In [103]: data = requests . get ( f \" { titiler_endpoint } /mosaic/info?url=file:/// { mosaic } \" ) . json () print ( data ) {'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': [0.044313056455806965, 6.305019725812759, 8], 'minzoom': 8, 'maxzoom': 14, 'name': 'mosaic', 'quadkeys': ['03333103', '03333112', '03333113', '12222002', '12222003', '12222012', '03333121', '03333130', '03333131', '12222020', '12222021', '12222030', '03333123', '03333132', '03333133', '12222022', '12222023', '12222032', '03333301', '03333310', '03333311', '12222200', '12222201', '12222210', '03333312', '03333313', '12222202', '12222203']} In [104]: data = requests . get ( f \" { titiler_endpoint } /mosaic/tilejson.json?url=file:/// { mosaic } &bands=B01&rescale=0,1000\" ) . json () bounds = data [ \"bounds\" ] m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = data [ \"tiles\" ][ 0 ], min_zoom = data [ \"minzoom\" ], max_zoom = data [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#f6981fca-2720-4eb5-8e4a-e7ee1a64e5ea'); {\"model_id\": \"8c121b17752a4c0398e5a87bc2ee6fe4\", \"version_major\": 2, \"version_minor\": 0} In [ ]:","title":"Custom Sentinel 2 Tiler"},{"location":"examples/Create_CustomSentinel2Tiler/#create-custom-sentinel-2-cog-tiler","text":"","title":"Create Custom Sentinel-2 (COG) Tiler"},{"location":"examples/Create_CustomSentinel2Tiler/#sentinel-2","text":"Thanks to Digital Earth Africa and in collaboration with Sinergise, Element 84, Amazon Web Services (AWS) and the Committee on Earth Observation Satellites (CEOS), Sentinel 2 (Level 2) data over Africa, usually stored as JPEG2000, has been translated to COG more important a STAC database and API has been setup. https://www.digitalearthafrica.org/news/operational-and-ready-use-satellite-data-now-available-across-africa The API is provided by @element84 and follows the latest specification: https://earth-search.aws.element84.com/v0","title":"Sentinel 2"},{"location":"examples/Create_CustomSentinel2Tiler/#requirements","text":"To be able to run this notebook you'll need the following requirements: rasterio ipyleaflet requests titiler uvicorn rio-tiler-pds cogeo-mosaic !pip install titiler[\"server\"] cogeo-mosaic ipyleaflet requests rio-tiler-pds","title":"Requirements"},{"location":"examples/Create_CustomSentinel2Tiler/#1-create-the-customtiler","text":"In order to create our custom tiler we will use the rio-tiler-pds S2COGReader and the different Tiler Factories from titiler. \"\"\" Sentinel 2 (COG) Tiler. Based on rio-tiler-pds and titiler >>> pip install titiler rio-tiler-pds \"\"\" from dataclasses import dataclass , field from typing import Dict , Type , Optional , Sequence from titiler.endpoints.factory import TMSTilerFactory , MosaicTilerFactory from titiler.dependencies import DefaultDependency from titiler.models.dataset import Info , Metadata from rio_tiler_pds.sentinel.aws import S2COGReader from rio_tiler_pds.sentinel.utils import s2_sceneid_parser from fastapi import FastAPI , Depends , Query @dataclass class CustomPathParams : \"\"\"Create dataset path from args\"\"\" sceneid : str = Query ( ... , description = \"Landsat 8 Sceneid.\" ) scene_metadata : Dict = field ( init = False ) def __post_init__ ( self ,): \"\"\"Define dataset URL.\"\"\" self . url = self . sceneid self . scene_metadata = s2_sceneid_parser ( self . sceneid ) def BandsParams ( bands : str = Query ( ... , title = \"bands names\" , description = \"comma (',') delimited bands names.\" , ) ) -> Sequence [ str ]: \"\"\"Bands.\"\"\" return bands . split ( \",\" ) @dataclass class BandsExprParams ( DefaultDependency ): \"\"\"Band names and Expression parameters.\"\"\" bands : Optional [ str ] = Query ( None , title = \"bands names\" , description = \"comma (',') delimited bands names.\" , ) expression : Optional [ str ] = Query ( None , title = \"Band Math expression\" , description = \"rio-tiler's band math expression.\" , ) def __post_init__ ( self ): \"\"\"Post Init.\"\"\" if self . bands is not None : self . kwargs [ \"bands\" ] = self . bands . split ( \",\" ) if self . expression is not None : self . kwargs [ \"expression\" ] = self . expression @dataclass class S2COGTiler ( TMSTilerFactory ): \"\"\"Custom Tiler Class for STAC.\"\"\" reader : Type [ S2COGReader ] = field ( default = S2COGReader ) path_dependency : Type [ CustomPathParams ] = CustomPathParams layer_dependency : Type [ DefaultDependency ] = BandsExprParams def info ( self ): \"\"\"Register /info endpoint.\"\"\" @self . router . get ( \"/info\" , response_model = Info , response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's basic info.\" }}, ) def info ( src_path = Depends ( self . path_dependency ), bands = Depends ( BandsParams ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return basic info.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . info ( bands = bands , ** kwargs ) return info def metadata ( self ): \"\"\"Register /metadata endpoint.\"\"\" @self . router . get ( \"/metadata\" , response_model = Metadata , response_model_exclude = { \"minzoom\" , \"maxzoom\" , \"center\" }, response_model_exclude_none = True , responses = { 200 : { \"description\" : \"Return dataset's metadata.\" }}, ) def metadata ( src_path = Depends ( self . path_dependency ), bands = Depends ( BandsParams ), metadata_params = Depends ( self . metadata_dependency ), kwargs : Dict = Depends ( self . additional_dependency ), ): \"\"\"Return metadata.\"\"\" with self . reader ( src_path . url , ** self . reader_options ) as src_dst : info = src_dst . metadata ( metadata_params . pmin , metadata_params . pmax , bands = bands , ** metadata_params . kwargs , ** kwargs , ) return info app = FastAPI () scene_tiler = S2COGTiler ( router_prefix = \"scenes\" ) app . include_router ( scene_tiler . router , prefix = \"/scenes\" , tags = [ \"scenes\" ]) mosaic_tiler = MosaicTilerFactory ( router_prefix = \"mosaic\" , dataset_reader = S2COGReader , layer_dependency = BandsExprParams , add_update = False , add_create = False , ) app . include_router ( mosaic_tiler . router , prefix = \"/mosaic\" , tags = [ \"mosaic\" ])","title":"1. Create the CustomTiler"},{"location":"examples/Create_CustomSentinel2Tiler/#2-launch-the-tiler","text":"Save the python code form 1. into a file named app.py and then start the server within another terminal $ uvicorn app:app","title":"2. Launch the tiler"},{"location":"examples/Create_CustomSentinel2Tiler/#3-search-data","text":"In [1]: import os import json import base64 import requests import datetime import itertools import urllib.parse import pathlib from io import BytesIO from functools import partial from concurrent import futures from rasterio.plot import reshape_as_image from rasterio.features import bounds as featureBounds from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: # Endpoint variables titiler_endpoint = \"http://127.0.0.1:8000\" stac_endpoint = \"https://earth-search.aws.element84.com/v0/search\" # Make sure both are up assert requests . get ( f \" { titiler_endpoint } /docs\" ) . status_code == 200 assert requests . get ( stac_endpoint ) . status_code == 200 More info: https://github.com/radiantearth/stac-api-spec for more documentation about the stac API AOI You can use geojson.io to define your search AOI In [3]: geojson = { \"type\" : \"FeatureCollection\" , \"features\" : [ { \"type\" : \"Feature\" , \"properties\" : {}, \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ - 2.83447265625 , 4.12728532324537 ], [ 2.120361328125 , 4.12728532324537 ], [ 2.120361328125 , 8.254982704877875 ], [ - 2.83447265625 , 8.254982704877875 ], [ - 2.83447265625 , 4.12728532324537 ] ] ] } } ] } bounds = featureBounds ( geojson ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 ) geo_json = GeoJSON ( data = geojson ) m . add_layer ( geo_json ) m var element = $('#abaf7a5a-b419-43be-af3f-8e50fb6b1cf9'); {\"model_id\": \"9ac780585652404b9b894105ec0a50a5\", \"version_major\": 2, \"version_minor\": 0} Define dates and other filters In [91]: start = datetime . datetime . strptime ( \"2019-01-01\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T00:00:00Z\" ) end = datetime . datetime . strptime ( \"2019-12-11\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T23:59:59Z\" ) # POST body query = { \"collections\" : [ \"sentinel-s2-l2a-cogs\" ], \"datetime\" : f \" { start } / { end } \" , \"query\" : { \"eo:cloud_cover\" : { \"lt\" : 3 }, \"sentinel:data_coverage\" : { \"gt\" : 10 } }, \"intersects\" : geojson [ \"features\" ][ 0 ][ \"geometry\" ], \"limit\" : 1000 , \"fields\" : { 'include' : [ 'id' , 'properties.datetime' , 'properties.eo:cloud_cover' ], # This will limit the size of returned body 'exclude' : [ 'assets' , 'links' ] # This will limit the size of returned body }, \"sortby\" : [ { \"field\" : \"properties.eo:cloud_cover\" , \"direction\" : \"desc\" }, ] } # POST Headers headers = { \"Content-Type\" : \"application/json\" , \"Accept-Encoding\" : \"gzip\" , \"Accept\" : \"application/geo+json\" , } data = requests . post ( stac_endpoint , headers = headers , json = query ) . json () print ( \"Results context:\" ) print ( data [ \"context\" ]) sceneid = [ f [ \"id\" ] for f in data [ \"features\" ]] cloudcover = [ f [ \"properties\" ][ \"eo:cloud_cover\" ] for f in data [ \"features\" ]] dates = [ f [ \"properties\" ][ \"datetime\" ][ 0 : 10 ] for f in data [ \"features\" ]] Results context: {'page': 1, 'limit': 1000, 'matched': 380, 'returned': 380} In [92]: data [ \"features\" ][ 0 ] Out[92]: {'bbox': [0.2927641695171779, 4.429965030479934, 1.2856914562725514, 5.4257779507944806], 'geometry': {'coordinates': [[[0.2967780962947474, 4.429965030479934], [0.2927641695171779, 5.422153918603194], [1.28314366979741, 5.4257779507944806], [1.2856914562725514, 4.43292307525344], [0.2967780962947474, 4.429965030479934]]], 'type': 'Polygon'}, 'id': 'S2B_31NBF_20190109_0_L2A', 'collection': 'sentinel-s2-l2a-cogs', 'type': 'Feature', 'properties': {'datetime': '2019-01-09T10:29:38Z', 'eo:cloud_cover': 2.98}} In [93]: m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 8 ) geo_json = GeoJSON ( data = data , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m var element = $('#1c265d5c-ce1a-40a3-adc8-3103f4c75a34'); {\"model_id\": \"49890eb94ca04c2a8a6d2d0baa0408a3\", \"version_major\": 2, \"version_minor\": 0}","title":"3. Search Data"},{"location":"examples/Create_CustomSentinel2Tiler/#4-visualize-one-item","text":"In [94]: # Print what band are available from rio_tiler_pds.sentinel.aws.sentinel2 import default_l2a_bands print ( default_l2a_bands ) ('B01', 'B02', 'B03', 'B04', 'B05', 'B06', 'B07', 'B08', 'B09', 'B11', 'B12', 'B8A') In [95]: # Fetch TileJSON # For this example we use the first `sceneid` return from the STAC API # and we sent the Bands to B04,B03,B02 which are red,green,blue data = requests . get ( f \" { titiler_endpoint } /scenes/tilejson.json?sceneid= { sceneid [ 4 ] } &bands=B04,B03,B02&rescale=0,2000\" ) . json () print ( data ) {'tilejson': '2.2.0', 'name': 'S2B_31NCG_20190926_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['http://127.0.0.1:8000/scenes/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?sceneid=S2B_31NCG_20190926_0_L2A&bands=B04%2CB03%2CB02&rescale=0%2C2000'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [1.1920033127639242, 5.337108286531346, 2.1859046942193197, 6.332392577649882], 'center': [1.688954003491622, 5.834750432090614, 8]} In [96]: bounds = data [ \"bounds\" ] m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = data [ \"tiles\" ][ 0 ], min_zoom = data [ \"minzoom\" ], max_zoom = data [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#e732fe00-a7d5-4309-8d3f-9b08415bea0f'); {\"model_id\": \"19f5612766a140f884b91e4f8a28c594\", \"version_major\": 2, \"version_minor\": 0}","title":"4. Visualize One Item"},{"location":"examples/Create_CustomSentinel2Tiler/#5-mosaic","text":"Working with 1 scene is great, but working with 10s is better. Lets see how to create mosaics and use it with our new tiler.","title":"5. Mosaic"},{"location":"examples/Create_CustomSentinel2Tiler/#51-create-a-mosaicjson-document","text":"To create a mosaicJSON, we can use developmentseed/cogeo-mosaic python module. Within this module there is a backend which is able to work with STAC API directly to create mosaicJSON. In [97]: from cogeo_mosaic.backends import MosaicBackend def custom_accessor ( feature ): \"\"\"Return feature identifier.\"\"\" return feature [ \"id\" ] with MosaicBackend ( \"stac+https://earth-search.aws.element84.com/v0/search\" , query , minzoom = 8 , maxzoom = 15 , backend_options = { \"accessor\" : custom_accessor }, ) as mosaic : print ( mosaic . metadata ) mosaic_doc = mosaic . mosaic_def . dict ( exclude_none = True ) {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 15, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8)} In [98]: mosaic_doc Out[98]: {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 15, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8), 'tiles': {'03333103': ['S2A_30PWQ_20191126_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2A_30PWQ_20190410_0_L2A'], '03333112': ['S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2A_30PWQ_20190226_0_L2A', 'S2A_30PWQ_20191123_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30PWQ_20191126_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2A_30PWQ_20191113_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2B_30PWQ_20190502_0_L2A', 'S2A_30PWQ_20190107_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2A_30PWQ_20190117_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2B_30PWQ_20191128_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30PWQ_20191029_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30PWQ_20190303_0_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2A_30PWQ_20190216_0_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2B_30PWQ_20190122_1_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30PWQ_20190211_0_L2A', 'S2B_30PWQ_20190102_0_L2A', 'S2A_30PWQ_20190318_0_L2A', 'S2B_30PWQ_20191208_0_L2A', 'S2B_30PWQ_20190313_0_L2A', 'S2A_30PWQ_20190410_0_L2A', 'S2B_30PWQ_20190201_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2B_30PWQ_20190512_0_L2A'], '03333113': ['S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2A_30PYQ_20190417_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2A_30PYQ_20190507_0_L2A', 'S2B_30PYQ_20190512_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2A_30PYQ_20190318_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30PYQ_20190117_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2B_30PYQ_20190313_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2B_30PYQ_20190122_1_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2B_30PYQ_20190122_0_L2A', 'S2A_30PYQ_20191123_0_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30PYQ_20190102_0_L2A', 'S2B_30PYQ_20190303_0_L2A', 'S2B_30PYQ_20190211_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2A_30PYQ_20190507_1_L2A', 'S2A_30PYQ_20190216_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A'], '12222002': ['S2B_30PZQ_20190218_0_L2A', 'S2B_31PCK_20190330_0_L2A', 'S2B_31PBK_20191105_0_L2A', 'S2A_31PBK_20190328_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2B_31PBK_20190221_0_L2A', 'S2B_31PBK_20191115_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2A_30PZQ_20190305_0_L2A', 'S2A_31PBK_20190213_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2A_31PBK_20190124_0_L2A', 'S2A_30PZQ_20190114_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2A_31PBK_20190117_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2B_31PBK_20191118_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2B_31PBK_20190412_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2A_31PBK_20190114_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2A_30PZQ_20190124_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PBK_20190507_0_L2A', 'S2B_31PBK_20190102_0_L2A', 'S2B_31PBK_20190112_0_L2A', 'S2A_31PBK_20191123_0_L2A', 'S2A_30PZQ_20190104_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2B_31PBK_20190303_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_30PZQ_20190213_0_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2B_31PBK_20190122_0_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2A_31PBK_20190104_0_L2A', 'S2A_30PZQ_20191130_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2B_31PBK_20190211_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A', 'S2A_31PBK_20190507_1_L2A', 'S2A_31PBK_20190216_0_L2A', 'S2A_31PBK_20191130_0_L2A'], '12222003': ['S2B_31PCK_20190330_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2A_31PDK_20190124_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A'], '12222012': ['S2A_31PDK_20190124_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A'], '03333121': ['S2A_30PWQ_20191126_0_L2A', 'S2B_30NWP_20190105_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2A_30NWP_20190130_0_L2A', 'S2B_30NWN_20190214_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2B_30NWP_20190326_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30NWP_20190214_0_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2A_30PWQ_20190410_0_L2A'], '03333130': ['S2A_30NWN_20191123_0_L2A', 'S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2A_30PWQ_20190226_0_L2A', 'S2B_30NXP_20191029_0_L2A', 'S2A_30NWN_20190226_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2A_30NWP_20190226_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NWN_20191113_0_L2A', 'S2A_30PWQ_20191123_0_L2A', 'S2B_30NWP_20191029_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30NXP_20190117_0_L2A', 'S2A_30NWP_20191123_0_L2A', 'S2A_30PWQ_20191126_0_L2A', 'S2B_30NXP_20190313_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2B_30NWP_20190105_0_L2A', 'S2A_30NWP_20190216_0_L2A', 'S2A_30NXP_20191123_0_L2A', 'S2A_30NXP_20190216_0_L2A', 'S2A_30NXP_20190507_0_L2A', 'S2A_30PWQ_20191113_0_L2A', 'S2B_30PWQ_20190224_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2A_30NWP_20190130_0_L2A', 'S2B_30PWQ_20190502_0_L2A', 'S2A_30PWQ_20190107_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2A_30NXP_20190226_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2B_30NWN_20190214_0_L2A', 'S2B_30NWP_20191208_0_L2A', 'S2A_30PWQ_20190117_0_L2A', 'S2B_30NWN_20190102_0_L2A', 'S2A_30PWQ_20190110_0_L2A', 'S2B_30NWP_20190313_0_L2A', 'S2A_30PWQ_20190130_0_L2A', 'S2B_30NWP_20190512_0_L2A', 'S2B_30PWQ_20190204_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2B_30PWQ_20191128_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2B_30NWN_20190303_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2B_30PWQ_20191029_0_L2A', 'S2B_30NWP_20190326_0_L2A', 'S2B_30PWQ_20190115_0_L2A', 'S2B_30PWQ_20190303_0_L2A', 'S2A_30NXP_20190507_1_L2A', 'S2B_30NWP_20190214_0_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30NXP_20190303_0_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2B_30NWP_20190303_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2A_30PWQ_20190216_0_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2B_30NWP_20190122_0_L2A', 'S2B_30PWQ_20190122_1_L2A', 'S2B_30PWQ_20190214_0_L2A', 'S2B_30NXP_20190122_0_L2A', 'S2B_30PWQ_20190326_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30PWQ_20190211_0_L2A', 'S2B_30PWQ_20190102_0_L2A', 'S2A_30PWQ_20190318_0_L2A', 'S2B_30PWQ_20191208_0_L2A', 'S2B_30PWQ_20190313_0_L2A', 'S2B_30NXP_20190211_0_L2A', 'S2B_30NWN_20190211_0_L2A', 'S2A_30PWQ_20190410_0_L2A', 'S2B_30PWQ_20190201_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2A_30NWN_20190507_1_L2A', 'S2B_30NWP_20190211_0_L2A', 'S2B_30NWP_20190102_0_L2A', 'S2A_30NWP_20190507_1_L2A', 'S2B_30NXP_20190102_0_L2A', 'S2B_30PWQ_20190512_0_L2A'], '03333131': ['S2A_30PXQ_20191203_0_L2A', 'S2A_30PXQ_20191113_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2A_30NZN_20190216_0_L2A', 'S2B_30NYP_20191029_0_L2A', 'S2B_30NXP_20191029_0_L2A', 'S2B_30NZP_20191118_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2A_30NZP_20190213_0_L2A', 'S2A_30PYQ_20190417_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2A_30NYN_20190117_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2B_30NYP_20191108_0_L2A', 'S2A_30NYN_20191123_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NYN_20190216_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NZP_20190313_0_L2A', 'S2A_30PYQ_20190507_0_L2A', 'S2B_30NYN_20191118_0_L2A', 'S2B_30PYQ_20190512_0_L2A', 'S2A_30PXQ_20190507_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2A_30NXP_20190117_0_L2A', 'S2A_30NZP_20190305_0_L2A', 'S2A_30PYQ_20190318_0_L2A', 'S2B_30NXP_20190313_0_L2A', 'S2A_30NZP_20190117_0_L2A', 'S2A_30NZP_20191123_0_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2A_30PXQ_20190107_0_L2A', 'S2B_30NYP_20190313_0_L2A', 'S2A_30NXP_20191123_0_L2A', 'S2A_30NXP_20190216_0_L2A', 'S2A_30NXP_20190507_0_L2A', 'S2B_30NZP_20191115_0_L2A', 'S2B_30PXQ_20191128_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2B_30NYP_20190112_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2B_30NZP_20191108_0_L2A', 'S2A_30NZP_20190507_0_L2A', 'S2A_30NZP_20190104_0_L2A', 'S2A_30NYN_20190226_0_L2A', 'S2A_30NYP_20190117_0_L2A', 'S2B_30NYN_20190211_0_L2A', 'S2B_30NYP_20190102_0_L2A', 'S2B_30NYN_20190122_0_L2A', 'S2A_30NYP_20190507_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2B_30NYP_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2B_30PXQ_20190313_0_L2A', 'S2B_30NZP_20190112_0_L2A', 'S2A_30NXP_20190226_0_L2A', 'S2A_30PXQ_20190318_0_L2A', 'S2A_30NYP_20190216_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2A_30PYQ_20190117_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2A_30PXQ_20191123_0_L2A', 'S2A_30NYP_20190226_0_L2A', 'S2B_30PYQ_20190313_0_L2A', 'S2A_30NYP_20191123_0_L2A', 'S2B_30PXQ_20190512_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2B_30PZQ_20190122_1_L2A', 'S2A_30NXP_20190507_1_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2A_30PXQ_20190216_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2B_30NXP_20190303_0_L2A', 'S2B_30NYP_20190122_0_L2A', 'S2A_30NZP_20190226_0_L2A', 'S2B_30PYQ_20190122_1_L2A', 'S2B_30PXQ_20190303_0_L2A', 'S2A_30NYP_20191113_1_L2A', 'S2B_30NZP_20190211_0_L2A', 'S2A_30PXQ_20190507_1_L2A', 'S2B_30PXQ_20190122_1_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZP_20190507_1_L2A', 'S2B_30PYQ_20190122_0_L2A', 'S2B_30NXP_20190122_0_L2A', 'S2A_30PYQ_20191123_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2B_30PXQ_20190102_0_L2A', 'S2B_30NZP_20190122_1_L2A', 'S2B_30PYQ_20190102_0_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2B_30NXP_20190211_0_L2A', 'S2A_30NYP_20190507_1_L2A', 'S2B_30NYP_20190211_0_L2A', 'S2B_30PYQ_20190303_0_L2A', 'S2B_30PYQ_20190211_0_L2A', 'S2B_30PXQ_20190211_0_L2A', 'S2A_30NYN_20190507_1_L2A', 'S2A_30PYQ_20190507_1_L2A', 'S2A_30PYQ_20190216_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A', 'S2A_30NZP_20190216_0_L2A', 'S2B_30NZP_20190109_0_L2A', 'S2B_30NXP_20190102_0_L2A'], '12222020': ['S2A_30NZN_20190216_0_L2A', 'S2B_30PZQ_20190218_0_L2A', 'S2B_30NZP_20191118_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2B_31PCK_20190330_0_L2A', 'S2B_31PBK_20191105_0_L2A', 'S2A_31PBK_20190328_0_L2A', 'S2A_30NZP_20190213_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2B_31PBK_20190221_0_L2A', 'S2B_31PBK_20191115_0_L2A', 'S2B_30PZQ_20190221_0_L2A', 'S2A_30PZQ_20190305_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2A_31PBK_20190213_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2B_31NBH_20190129_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NZP_20190313_0_L2A', 'S2A_30PZQ_20190117_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2A_31PBK_20190124_0_L2A', 'S2A_30NZP_20190305_0_L2A', 'S2A_30PZQ_20190114_0_L2A', 'S2A_30NZP_20190117_0_L2A', 'S2A_30NZP_20191123_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2A_31PBK_20190117_0_L2A', 'S2A_31NBJ_20190305_0_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2A_31NCJ_20191210_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31PBK_20191118_0_L2A', 'S2A_31NCJ_20191130_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2B_31PBK_20190412_0_L2A', 'S2B_30NZP_20191115_0_L2A', 'S2B_31NBJ_20190109_0_L2A', 'S2A_31NBH_20190305_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30PZQ_20190313_0_L2A', 'S2A_31PBK_20190114_0_L2A', 'S2A_31NCJ_20190404_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2B_30NZP_20191108_0_L2A', 'S2A_30NZP_20190507_0_L2A', 'S2A_30NZP_20190104_0_L2A', 'S2B_31NBH_20190109_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2B_30NZP_20190112_0_L2A', 'S2A_30PZQ_20190124_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PBK_20190507_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2B_31NBJ_20191115_0_L2A', 'S2A_31NCJ_20190305_0_L2A', 'S2B_31PBK_20190102_0_L2A', 'S2B_31PBK_20190112_0_L2A', 'S2A_31PBK_20191123_0_L2A', 'S2A_30PZQ_20190104_0_L2A', 'S2B_30PZQ_20190122_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2B_30PZQ_20190122_1_L2A', 'S2B_31PBK_20190303_0_L2A', 'S2B_30PZQ_20190102_0_L2A', 'S2A_31NCJ_20190213_0_L2A', 'S2A_31NCJ_20190104_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_30NZP_20190226_0_L2A', 'S2B_30NZP_20190211_0_L2A', 'S2B_31NCJ_20190109_0_L2A', 'S2A_30PZQ_20190213_0_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZP_20190507_1_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2A_31NBJ_20190104_0_L2A', 'S2B_31PBK_20190122_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30PZQ_20190211_0_L2A', 'S2A_30PZQ_20190216_0_L2A', 'S2B_30NZP_20190122_1_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2A_31PBK_20190104_0_L2A', 'S2A_30PZQ_20191130_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2B_31PBK_20190211_0_L2A', 'S2A_30PZQ_20190507_1_L2A', 'S2B_30PZQ_20190303_0_L2A', 'S2A_30NZP_20190216_0_L2A', 'S2B_30NZP_20190109_0_L2A', 'S2A_31PBK_20190507_1_L2A', 'S2A_31PBK_20190216_0_L2A', 'S2A_31PBK_20191130_0_L2A', 'S2A_31NBJ_20190524_0_L2A'], '12222021': ['S2B_31PCK_20190330_0_L2A', 'S2A_31PCK_20190223_0_L2A', 'S2A_31PCK_20190124_0_L2A', 'S2A_31PDK_20190124_0_L2A', 'S2A_31PCK_20190213_0_L2A', 'S2B_31PCK_20191115_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2A_31NCJ_20191210_0_L2A', 'S2B_31NDH_20190109_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2A_31NCJ_20191130_0_L2A', 'S2A_31PCK_20190114_0_L2A', 'S2A_31NDJ_20190404_0_L2A', 'S2A_31NCJ_20190404_0_L2A', 'S2A_31PCK_20190404_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31NDJ_20191130_0_L2A', 'S2A_31NCJ_20190305_0_L2A', 'S2B_31NDJ_20190109_0_L2A', 'S2A_31NCJ_20190213_0_L2A', 'S2A_31NCJ_20190104_0_L2A', 'S2A_31PCK_20190203_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2B_31NCJ_20190109_0_L2A', 'S2A_31PCK_20190305_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PCK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A', 'S2A_31NDJ_20190104_0_L2A'], '12222030': ['S2A_31PDK_20190124_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31PDK_20191115_0_L2A', 'S2A_31NDJ_20190404_0_L2A', 'S2B_31PDK_20191205_0_L2A', 'S2A_31NDJ_20191130_0_L2A', 'S2B_31NDJ_20190109_0_L2A', 'S2A_31PDK_20190203_0_L2A', 'S2A_31PDK_20190213_1_L2A', 'S2A_31PDK_20190104_0_L2A', 'S2A_31PDK_20191130_0_L2A', 'S2A_31NDJ_20190104_0_L2A'], '03333123': ['S2A_30NWM_20190226_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWN_20190214_0_L2A'], '03333132': ['S2A_30NWN_20191123_0_L2A', 'S2B_30NXM_20190402_0_L2A', 'S2A_30NWN_20190226_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2A_30NWM_20190226_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NWN_20191113_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWN_20190214_0_L2A', 'S2B_30NWN_20190102_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2B_30NWN_20190303_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2B_30NWN_20190211_0_L2A', 'S2A_30NWN_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '03333133': ['S2B_30NXM_20190402_0_L2A', 'S2B_30NZM_20191029_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2A_30NZN_20190216_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2B_30NXN_20190402_0_L2A', 'S2B_30NYM_20190122_0_L2A', 'S2B_30NXN_20191029_0_L2A', 'S2A_30NYN_20190117_0_L2A', 'S2B_30NXN_20190313_0_L2A', 'S2B_30NYM_20191208_0_L2A', 'S2A_30NYN_20191123_0_L2A', 'S2B_30NXN_20190102_0_L2A', 'S2A_30NYN_20190216_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NYN_20191118_0_L2A', 'S2B_30NZM_20190422_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2A_30NYN_20190318_1_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2B_30NYM_20190109_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2A_30NYN_20190226_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NYN_20190211_0_L2A', 'S2B_30NYN_20190122_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2B_30NXN_20190211_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2B_30NZM_20190211_0_L2A', 'S2B_30NZM_20190122_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2A_30NXN_20190226_0_L2A', 'S2B_30NXN_20190122_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2A_30NXN_20190507_1_L2A', 'S2A_30NYM_20190507_1_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2A_30NZM_20190226_0_L2A', 'S2A_30NYN_20190507_1_L2A', 'S2A_30NZM_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222022': ['S2B_31NCG_20190926_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2B_30NZM_20191029_0_L2A', 'S2A_30NZN_20190216_0_L2A', 'S2B_30NZN_20190112_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_31NBG_20190812_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2B_31NBH_20190129_0_L2A', 'S2A_30NZN_20190117_0_L2A', 'S2B_30NZN_20191128_0_L2A', 'S2B_30NZN_20191118_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2A_31NBH_20190305_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30NZN_20190109_0_L2A', 'S2B_31NBH_20190109_0_L2A', 'S2A_30NZN_20190305_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2A_30NZN_20191123_0_L2A', 'S2B_30NZN_20190122_0_L2A', 'S2A_30NZN_20190226_0_L2A', 'S2A_30NZN_20190507_1_L2A', 'S2B_30NZN_20190211_0_L2A', 'S2A_30NZM_20190226_0_L2A'], '12222023': ['S2A_31NDG_20191130_0_L2A', 'S2B_31NCG_20190926_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2A_31NDG_20190223_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_31NDG_20191107_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2B_31NDG_20190916_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190807_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2A_31NDG_20191210_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2B_31NDH_20190109_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '12222032': ['S2A_31NDG_20191107_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '03333301': ['S2B_30NWK_20190313_0_L2A', 'S2A_30NWM_20190226_0_L2A', 'S2B_30NWL_20190214_0_L2A', 'S2A_30NWK_20191103_0_L2A', 'S2B_30NWK_20191118_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2B_30NWK_20190830_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWK_20190611_0_L2A', 'S2B_30NWK_20190731_0_L2A', 'S2A_30NWL_20190507_1_L2A', 'S2A_30NWK_20190507_1_L2A'], '03333310': ['S2B_30NXM_20190402_0_L2A', 'S2B_30NWK_20190313_0_L2A', 'S2B_30NXK_20190102_0_L2A', 'S2A_30NWM_20190226_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NWL_20190214_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2A_30NWK_20191103_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NWK_20191118_0_L2A', 'S2B_30NWM_20190211_0_L2A', 'S2A_30NWM_20190107_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NWK_20190830_0_L2A', 'S2A_30NWM_20190311_0_L2A', 'S2B_30NWK_20190611_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2B_30NWK_20190731_0_L2A', 'S2A_30NWL_20190507_1_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NWK_20190507_1_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '03333311': ['S2A_30NZK_20191021_0_L2A', 'S2B_30NZK_20191115_0_L2A', 'S2B_30NXM_20190402_0_L2A', 'S2B_30NZM_20191029_0_L2A', 'S2A_30NYL_20191123_0_L2A', 'S2B_30NYL_20191118_0_L2A', 'S2B_30NYL_20191108_0_L2A', 'S2B_30NYL_20190728_0_L2A', 'S2A_30NZL_20191210_0_L2A', 'S2A_30NZL_20191130_0_L2A', 'S2B_30NZK_20190109_0_L2A', 'S2B_30NZL_20191115_1_L2A', 'S2A_30NYL_20191203_0_L2A', 'S2B_30NYM_20190122_0_L2A', 'S2B_30NXK_20190102_0_L2A', 'S2B_30NYL_20191208_0_L2A', 'S2A_30NYK_20191203_0_L2A', 'S2A_30NYL_20190723_0_L2A', 'S2B_30NYL_20190611_0_L2A', 'S2A_30NZK_20190213_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NYM_20191208_0_L2A', 'S2B_30NZL_20190916_0_L2A', 'S2A_30NZL_20191031_0_L2A', 'S2A_30NZL_20190305_0_L2A', 'S2A_30NYL_20190223_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2A_30NZL_20190213_0_L2A', 'S2B_30NZL_20190218_0_L2A', 'S2A_30NYL_20191210_0_L2A', 'S2A_30NYL_20190812_0_L2A', 'S2B_30NZM_20190422_0_L2A', 'S2B_30NYK_20190102_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NYK_20191118_0_L2A', 'S2B_30NZL_20191115_0_L2A', 'S2B_30NZK_20190218_0_L2A', 'S2A_30NYK_20190517_0_L2A', 'S2B_30NYL_20190109_0_L2A', 'S2B_30NYK_20190611_0_L2A', 'S2B_30NYL_20190218_0_L2A', 'S2A_30NYK_20191123_0_L2A', 'S2B_30NYM_20190109_0_L2A', 'S2B_30NYL_20191105_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2A_30NZK_20191031_0_L2A', 'S2B_30NYL_20190618_0_L2A', 'S2A_30NXM_20190226_0_L2A', 'S2B_30NYL_20190916_0_L2A', 'S2A_30NZK_20191130_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2B_30NZM_20190211_0_L2A', 'S2B_30NZM_20190122_0_L2A', 'S2A_30NZK_20190104_0_L2A', 'S2A_30NYL_20190305_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2A_30NZL_20190812_0_L2A', 'S2A_30NYM_20190507_1_L2A', 'S2B_30NZL_20191105_0_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NZM_20190226_0_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NYK_20190815_0_L2A', 'S2A_30NZM_20190507_1_L2A', 'S2A_30NYL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222200': ['S2B_31NBF_20190109_0_L2A', 'S2A_30NZK_20191021_0_L2A', 'S2B_31NCG_20190926_0_L2A', 'S2B_30NZK_20191115_0_L2A', 'S2B_31NCF_20190208_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2A_30NZL_20191210_0_L2A', 'S2A_30NZL_20191130_0_L2A', 'S2B_30NZK_20190109_0_L2A', 'S2A_31NBE_20190812_0_L2A', 'S2B_30NZL_20191115_1_L2A', 'S2B_31NBE_20190916_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2B_31NBF_20191115_1_L2A', 'S2A_31NBG_20190812_0_L2A', 'S2B_31NCF_20190109_0_L2A', 'S2A_30NZK_20190213_0_L2A', 'S2B_31NBF_20190916_0_L2A', 'S2A_31NCF_20191130_0_L2A', 'S2B_30NZL_20190916_0_L2A', 'S2A_30NZL_20191031_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2A_30NZL_20190305_0_L2A', 'S2A_31NCF_20191210_0_L2A', 'S2B_31NBF_20190218_0_L2A', 'S2A_30NZL_20190213_0_L2A', 'S2B_30NZL_20190218_0_L2A', 'S2A_31NBE_20191130_0_L2A', 'S2A_31NBF_20191130_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2B_31NBE_20190817_0_L2A', 'S2B_30NZL_20191115_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2B_30NZK_20190218_0_L2A', 'S2B_31NBE_20190330_0_L2A', 'S2B_31NBE_20191115_0_L2A', 'S2A_30NZK_20191031_0_L2A', 'S2B_31NBE_20190218_0_L2A', 'S2A_31NBF_20190812_0_L2A', 'S2A_31NCF_20190305_0_L2A', 'S2A_31NBE_20190104_0_L2A', 'S2B_31NBF_20191105_0_L2A', 'S2A_30NZK_20191130_0_L2A', 'S2B_31NBE_20190208_0_L2A', 'S2A_30NZM_20190305_0_L2A', 'S2A_31NBE_20190305_0_L2A', 'S2B_31NBE_20191105_0_L2A', 'S2A_30NZK_20190104_0_L2A', 'S2A_30NZL_20190812_0_L2A', 'S2B_30NZL_20191105_0_L2A', 'S2A_31NCE_20190305_0_L2A', 'S2A_31NBE_20191031_0_L2A'], '12222201': ['S2A_31NDG_20191130_0_L2A', 'S2B_31NCG_20190926_0_L2A', 'S2B_31NCF_20190208_0_L2A', 'S2A_31NCG_20191031_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2B_31NDF_20190327_0_L2A', 'S2A_31NDG_20190223_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2B_31NCF_20190109_0_L2A', 'S2A_31NDG_20191107_0_L2A', 'S2B_31NDF_20190923_0_L2A', 'S2A_31NCF_20191130_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2B_31NCG_20190218_0_L2A', 'S2A_31NCF_20191210_0_L2A', 'S2B_31NDF_20190406_0_L2A', 'S2B_31NDG_20190916_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190807_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2A_31NDG_20191210_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2B_31NDF_20190218_0_L2A', 'S2A_31NDF_20191210_0_L2A', 'S2A_31NDF_20191107_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDF_20190101_0_L2A', 'S2A_31NCF_20190305_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2A_31NDF_20190223_0_L2A', 'S2B_31NDF_20191205_0_L2A', 'S2B_31NDF_20191013_0_L2A', 'S2A_31NDF_20190131_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2A_31NCE_20190305_0_L2A', 'S2B_31NDF_20190506_1_L2A', 'S2B_31NDF_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '12222210': ['S2B_31NDF_20190327_0_L2A', 'S2A_31NDG_20191107_0_L2A', 'S2B_31NDF_20190923_0_L2A', 'S2B_31NDF_20190406_0_L2A', 'S2A_31NDG_20190501_0_L2A', 'S2B_31NDG_20190327_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NDG_20191127_0_L2A', 'S2A_31NDF_20191107_0_L2A', 'S2B_31NDG_20190106_0_L2A', 'S2A_31NDF_20190101_0_L2A', 'S2A_31NDG_20190101_0_L2A', 'S2B_31NDF_20191013_0_L2A', 'S2A_31NDF_20190131_0_L2A', 'S2B_31NDG_20191112_0_L2A', 'S2B_31NDF_20190506_1_L2A', 'S2B_31NDF_20191112_0_L2A', 'S2B_31NDG_20190506_1_L2A'], '03333303': ['S2A_30NWK_20191103_0_L2A', 'S2B_30NWK_20190830_0_L2A'], '03333312': ['S2B_30NWK_20190313_0_L2A', 'S2B_30NXK_20190102_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2A_30NWK_20191103_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NWK_20191118_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2B_30NWK_20190830_0_L2A', 'S2B_30NWK_20190611_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2B_30NWK_20190731_0_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NWK_20190507_1_L2A'], '03333313': ['S2B_30NXK_20190102_0_L2A', 'S2A_30NYK_20191203_0_L2A', 'S2B_30NXK_20191118_0_L2A', 'S2B_30NXK_20190422_0_L2A', 'S2B_30NXK_20190830_0_L2A', 'S2B_30NYK_20190102_0_L2A', 'S2B_30NXK_20190731_0_L2A', 'S2B_30NYK_20191118_0_L2A', 'S2A_30NYK_20190517_0_L2A', 'S2B_30NYK_20190611_0_L2A', 'S2A_30NYK_20191123_0_L2A', 'S2A_30NXK_20190815_0_L2A', 'S2B_30NXK_20190313_0_L2A', 'S2B_30NXK_20190611_0_L2A', 'S2A_30NXK_20190507_1_L2A', 'S2A_30NYK_20190815_0_L2A'], '12222202': ['S2A_30NZK_20191021_0_L2A', 'S2B_30NZK_20191115_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2B_30NZK_20190109_0_L2A', 'S2A_31NBE_20190812_0_L2A', 'S2A_30NZK_20190213_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2A_31NBE_20191130_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2B_31NBE_20190817_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2B_31NBE_20190330_0_L2A', 'S2B_31NBE_20191115_0_L2A', 'S2A_30NZK_20191031_0_L2A', 'S2B_31NBE_20190218_0_L2A', 'S2A_31NBE_20190104_0_L2A', 'S2A_31NBE_20190305_0_L2A', 'S2B_31NBE_20191105_0_L2A', 'S2A_31NCE_20190305_0_L2A', 'S2A_31NBE_20191031_0_L2A'], '12222203': ['S2A_31NCE_20191021_0_L2A', 'S2B_31NCE_20190419_0_L2A', 'S2B_31NCE_20190109_0_L2A', 'S2A_31NCE_20191130_0_L2A', 'S2A_31NCE_20190305_0_L2A']}}","title":"5.1 Create a MosaicJSON document"},{"location":"examples/Create_CustomSentinel2Tiler/#52-custom-filter","text":"As we can see in the mosaicJSON, each quadkey index has 10s scenes. Because we want to build a visual mosaic, we don't need as many assets and maybe 1 or 2 scene per quadkey will be enought to create mercator tiles. To reduce the number of scenes per quadkey we need to apply a custom filter while building the mosaic. In [99]: from typing import Dict , List , Sequence , Optional from pygeos import polygons import mercantile def optimized_filter ( tile : mercantile . Tile , # noqa dataset : Sequence [ Dict ], geoms : Sequence [ polygons ], minimum_tile_cover = None , # noqa tile_cover_sort = False , # noqa maximum_items_per_tile : Optional [ int ] = None , ) -> List : \"\"\"Optimized filter that keeps only one item per grid ID.\"\"\" gridid : List [ str ] = [] selected_dataset : List [ Dict ] = [] for item in dataset : grid = item [ \"id\" ] . split ( \"_\" )[ 1 ] if grid not in gridid : gridid . append ( grid ) selected_dataset . append ( item ) dataset = selected_dataset indices = list ( range ( len ( dataset ))) if maximum_items_per_tile : indices = indices [: maximum_items_per_tile ] return [ dataset [ ind ] for ind in indices ] with MosaicBackend ( \"stac+https://earth-search.aws.element84.com/v0/search\" , optquery , minzoom = 8 , maxzoom = 14 , backend_options = { \"accessor\" : custom_accessor , \"asset_filter\" : optimized_filter }, ) as mosaic : print ( mosaic . metadata ) mosaic_doc = mosaic . mosaic_def . dict ( exclude_none = True ) {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 14, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8)} In [100]: mosaic_doc Out[100]: {'mosaicjson': '0.0.2', 'version': '1.0.0', 'minzoom': 8, 'maxzoom': 14, 'quadkey_zoom': 8, 'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': (0.044313056455806965, 6.305019725812759, 8), 'tiles': {'03333103': ['S2B_30PWQ_20191201_0_L2A'], '03333112': ['S2A_30PXQ_20191203_0_L2A', 'S2B_30PWQ_20191201_0_L2A'], '03333113': ['S2A_30PXQ_20191203_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A'], '12222002': ['S2A_31PBK_20191210_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_30PZQ_20191123_0_L2A'], '12222003': ['S2A_31PCK_20191210_0_L2A', 'S2A_31PDK_20191210_0_L2A'], '12222012': ['S2A_31PDK_20191210_0_L2A'], '03333121': ['S2B_30PWQ_20191201_0_L2A', 'S2B_30NWN_20190326_0_L2A', 'S2B_30NWP_20190326_0_L2A'], '03333130': ['S2B_30NWN_20191208_0_L2A', 'S2B_30NXN_20191208_0_L2A', 'S2B_30NXP_20191208_0_L2A', 'S2A_30PXQ_20191203_0_L2A', 'S2B_30PWQ_20191201_0_L2A', 'S2B_30NWP_20190326_0_L2A'], '03333131': ['S2B_30NXN_20191208_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2B_30NXP_20191208_0_L2A', 'S2A_30PXQ_20191203_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2B_30NYP_20191128_0_L2A', 'S2B_30NZP_20191128_0_L2A', 'S2B_30PYQ_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A'], '12222020': ['S2A_31NCJ_20191210_0_L2A', 'S2A_31PBK_20191210_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2B_30NZP_20191128_0_L2A', 'S2A_30PZQ_20191123_0_L2A', 'S2B_31NBJ_20191115_0_L2A', 'S2B_31NCH_20190109_0_L2A'], '12222021': ['S2A_31NCJ_20191210_0_L2A', 'S2A_31PCK_20191210_0_L2A', 'S2A_31PDK_20191210_0_L2A', 'S2B_31NDJ_20191205_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31NDH_20190109_0_L2A'], '12222030': ['S2A_31PDK_20191210_0_L2A', 'S2B_31NDJ_20191205_0_L2A'], '03333123': ['S2B_30NWN_20190326_0_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333132': ['S2B_30NWN_20191208_0_L2A', 'S2B_30NXN_20191208_0_L2A', 'S2A_30NXM_20190507_1_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333133': ['S2B_30NYM_20191208_0_L2A', 'S2B_30NXN_20191208_0_L2A', 'S2B_30NYN_20191208_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222022': ['S2A_31NCG_20191210_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_30NZN_20191130_0_L2A', 'S2A_31NBH_20191130_0_L2A', 'S2A_31NBG_20190812_0_L2A', 'S2B_31NCH_20190109_0_L2A'], '12222023': ['S2A_31NCG_20191210_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2B_31NCH_20190109_0_L2A', 'S2B_31NDH_20190109_0_L2A'], '12222032': ['S2A_31NDG_20191207_0_L2A'], '03333301': ['S2A_30NWL_20190507_1_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333310': ['S2B_30NXK_20191208_0_L2A', 'S2A_30NWL_20190507_1_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A', 'S2A_30NWM_20190226_0_L2A'], '03333311': ['S2A_30NZL_20191210_0_L2A', 'S2B_30NXK_20191208_0_L2A', 'S2B_30NYL_20191208_0_L2A', 'S2B_30NYM_20191208_0_L2A', 'S2A_30NYK_20191203_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_30NXL_20190507_1_L2A', 'S2A_30NXM_20190507_1_L2A'], '12222200': ['S2A_30NZL_20191210_0_L2A', 'S2A_31NBF_20191210_0_L2A', 'S2A_31NCF_20191210_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_30NZM_20191130_0_L2A', 'S2A_31NCE_20191021_0_L2A', 'S2A_31NBG_20190812_0_L2A'], '12222201': ['S2A_31NCF_20191210_0_L2A', 'S2A_31NCG_20191210_0_L2A', 'S2A_31NDF_20191207_0_L2A', 'S2A_31NDG_20191207_0_L2A', 'S2A_31NCE_20191021_0_L2A'], '12222210': ['S2A_31NDF_20191207_0_L2A', 'S2A_31NDG_20191207_0_L2A'], '03333312': ['S2B_30NXK_20191208_0_L2A'], '03333313': ['S2B_30NXK_20191208_0_L2A', 'S2A_30NYK_20191203_0_L2A'], '12222202': ['S2A_31NCE_20191021_0_L2A'], '12222203': ['S2A_31NCE_20191021_0_L2A']}}","title":"5.2 Custom Filter"},{"location":"examples/Create_CustomSentinel2Tiler/#53-save-mosaic","text":"In [101]: mosaic_file = \"mymosaic.json.gz\" with MosaicBackend ( mosaic_file , mosaic_def = mosaic_doc ) as mosaic : mosaic . write ( overwrite = True ) In [102]: # We need to pass absolute path to the tiler mosaic = str ( pathlib . Path ( mosaic_file ) . absolute ())","title":"5.3 Save Mosaic"},{"location":"examples/Create_CustomSentinel2Tiler/#54-use-it","text":"In [103]: data = requests . get ( f \" { titiler_endpoint } /mosaic/info?url=file:/// { mosaic } \" ) . json () print ( data ) {'bounds': [-3.000172884686006, 3.5633051316122546, 3.0887989975976198, 9.046734320013263], 'center': [0.044313056455806965, 6.305019725812759, 8], 'minzoom': 8, 'maxzoom': 14, 'name': 'mosaic', 'quadkeys': ['03333103', '03333112', '03333113', '12222002', '12222003', '12222012', '03333121', '03333130', '03333131', '12222020', '12222021', '12222030', '03333123', '03333132', '03333133', '12222022', '12222023', '12222032', '03333301', '03333310', '03333311', '12222200', '12222201', '12222210', '03333312', '03333313', '12222202', '12222203']} In [104]: data = requests . get ( f \" { titiler_endpoint } /mosaic/tilejson.json?url=file:/// { mosaic } &bands=B01&rescale=0,1000\" ) . json () bounds = data [ \"bounds\" ] m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = data [ \"tiles\" ][ 0 ], min_zoom = data [ \"minzoom\" ], max_zoom = data [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#f6981fca-2720-4eb5-8e4a-e7ee1a64e5ea'); {\"model_id\": \"8c121b17752a4c0398e5a87bc2ee6fe4\", \"version_major\": 2, \"version_minor\": 0} In [ ]:","title":"5.4 Use It"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } pre { line-height: 125%; margin: 0; } td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } .highlight-ipynb .hll { background-color: #ffffcc } .highlight-ipynb { background: #f8f8f8; } .highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */ .highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */ .highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: #666666 } /* Operator */ .highlight-ipynb .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight-ipynb .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */ .highlight-ipynb .ge { font-style: italic } /* Generic.Emph */ .highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */ .highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */ .highlight-ipynb .go { color: #888888 } /* Generic.Output */ .highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */ .highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */ .highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */ .highlight-ipynb .m { color: #666666 } /* Literal.Number */ .highlight-ipynb .s { color: #BA2121 } /* Literal.String */ .highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */ .highlight-ipynb .nb { color: #008000 } /* Name.Builtin */ .highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight-ipynb .no { color: #880000 } /* Name.Constant */ .highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */ .highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight-ipynb .nf { color: #0000FF } /* Name.Function */ .highlight-ipynb .nl { color: #A0A000 } /* Name.Label */ .highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight-ipynb .nv { color: #19177C } /* Name.Variable */ .highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */ .highlight-ipynb .mb { color: #666666 } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */ .highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */ .highlight-ipynb .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */ .highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */ .highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight-ipynb .fm { color: #0000FF } /* Name.Function.Magic */ .highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */ .highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */ .highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */ .highlight-ipynb .vm { color: #19177C } /* Name.Variable.Magic */ .highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */ .rendered_html a{text-decoration:inherit !important}.rendered_html :link{text-decoration:inherit !important}.rendered_html :visited{text-decoration:inherit !important}pre code{background-color:inherit !important}.highlight{color:#000000}.highlight code{color:#000000}.highlight .n{color:#333333}.highlight .p{color:#000000}.text_cell .prompt{display:none !important}div.input_prompt{padding:0.2em 0.4em}div.output_prompt{padding:0.4em}.text_cell{margin:0 !important;padding:0 !important;border:none !important}.text_cell_render{margin:0 !important;padding:0 !important;border:none !important}.rendered_html *+p{margin-top:inherit !important}.anchor-link{display:none !important}.code_cell{margin:0 !important;padding:5px 0 !important;border:none !important}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;box-pack:end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-flex}.celltoolbar .tags_button_container{display:-webkit-box;display:-ms-flexbox;display:flex}.celltoolbar .tags_button_container .tag-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;-webkit-box-shadow:none;box-shadow:none;width:inherit;font-size:13px;font-family:\"Helvetica Neue\", Helvetica, Arial, sans-serif;height:22px;line-height:22px;display:inline-block}div.input_area>div.highlight{margin:0.25em 0.4em !important}.code_cell pre{font-size:12px !important}.output_html table.dataframe{font-family:Arial, sans-serif;font-size:13px;line-height:20px}.output_html table.dataframe th,td{padding:4px;text-align:left}.bk-plot-wrapper tbody tr{background:none !important}.bk-plot-wrapper tbody tr:hover{background:none !important} /*# sourceMappingURL=jupyter-fixes.min.css.map */ MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Working With COG - At Scale \u00b6 For this demo we will use the new Ozone Monitoring Instrument (OMI) / Aura NO2 Tropospheric Column Density dataset hosted on AWS PDS: https://registry.opendata.aws/omi-no2-nasa/ Requirements \u00b6 AWS credentials rasterio ipyleaflet requests tqdm pip install rasterio[s3] ipyleaflet requests tqdm In [ ]: import os import json import urllib.parse from io import BytesIO from functools import partial from concurrent import futures import requests from boto3.session import Session as boto3_session from rasterio.plot import reshape_as_image from rasterio.features import bounds as featureBounds from tqdm.notebook import tqdm from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles % pylab inline In [ ]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint Define your area of interest (AOI) \u00b6 In [ ]: # use geojson.io geojson = { \"type\" : \"FeatureCollection\" , \"features\" : [ { \"type\" : \"Feature\" , \"properties\" : {}, \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ - 74.1796875 , 45.18978009667531 ], [ - 73.092041015625 , 45.18978009667531 ], [ - 73.092041015625 , 46.00459325574482 ], [ - 74.1796875 , 46.00459325574482 ], [ - 74.1796875 , 45.18978009667531 ] ] ] } } ] } bounds = featureBounds ( geojson ) In [ ]: Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 ) List available files on AWS S3 \u00b6 In [ ]: session = boto3_session ( region_name = \"us-west-2\" ) client = session . client ( \"s3\" ) bucket = \"omi-no2-nasa\" #https://registry.opendata.aws/omi-no2-nasa/ def list_objects ( bucket , prefix ): \"\"\"AWS s3 list objects.\"\"\" paginator = client . get_paginator ( 'list_objects_v2' ) files = [] for subset in paginator . paginate ( Bucket = bucket , Prefix = prefix ): files . extend ( subset . get ( \"Contents\" , [])) return [ r [ \"Key\" ] for r in files ] files = list_objects ( bucket , \"OMI-Aura_L3\" ) print ( f \"Found : { len ( files ) } \" ) In [ ]: print ( files [ 0 : 10 ]) file name structure is \"OMI-Aura_L3-OMNO2d_{YEAR}m{MONTH:02}{DAY:02}...\" We can then easily filter e.g In [ ]: files_2019 = list ( filter ( lambda x : x . split ( \"_\" )[ 2 ][ 0 : 4 ] == \"2019\" , files )) print ( len ( files_2019 )) In [ ]: files_Oct5 = list ( filter ( lambda x : ( x . split ( \"_\" )[ 2 ][ 5 : 7 ] == \"10\" ) & ( x . split ( \"_\" )[ 2 ][ 7 : 9 ] == \"05\" ), files )) print ( len ( files_Oct5 )) print ( files_Oct5 ) DATA Endpoint \u00b6 {endpoint}/cog/tiles/{z}/{x}/{y}.{format}?url={cog}&{otherquery params} {endpoint}/cog/crop/{minx},{miny},{maxx},{maxy}.{format}?url={cog}&{otherquery params} {endpoint}/cog/point/{minx},{miny}?url={cog}&{otherquery params} Visualize One Item \u00b6 In [ ]: def _url ( src_path ): return f \"s3://omi-no2-nasa/ { src_path } \" In [ ]: # Fetch File Metadata to get min/max rescaling values (because the file is stored as float32) r = requests . get ( f \" { titiler_endpoint } /cog/metadata\" , params = { \"url\" : _url ( files [ 0 ]), \"pmin\" : 20 , \"pmax\" : 98 , } ) . json () print ( json . dumps ( r , indent = 4 )) In [ ]: r = requests . get ( f \" { titiler_endpoint } /cog/tilejson.json\" , params = { \"url\" : _url ( files [ 2 ]), \"rescale\" : \"0,3000000000000000\" , \"color_map\" : \"viridis\" , } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 ) aod_layer = TileLayer ( url = r [ \"tiles\" ][ 0 ], opacity = 1 ) m . add_layer ( aod_layer ) m Create time series of NO2 \u00b6 In [ ]: def _stats ( data , mask ): arr = numpy . ma . array ( data ) arr . mask = mask == 0 return arr . min () . item (), arr . max () . item (), arr . mean () . item (), arr . std () . item () xmin , ymin , xmax , ymax = bounds def fetch_bbox ( file ): url = f \" { titiler_endpoint } cog/crop/ { xmin } , { ymin } , { xmax } , { ymax } .npy\" params = { \"url\" : _url ( file ), \"bidx\" : \"1\" , \"max_size\" : 128 , } r = requests . get ( url , params = params ) data , mask = numpy . load ( BytesIO ( r . content ), allow_pickle = True ) s = _stats ( data , mask ) return s [ 1 ], file . split ( \"_\" )[ 2 ] In [ ]: def _filter_futures ( tasks ): for future in tasks : try : yield future . result () except Exception : pass In [ ]: # Every 15 of each month for all the years files_15 = list ( filter ( lambda x : ( x . split ( \"_\" )[ 2 ][ 7 : 9 ] == \"15\" ), files )) In [ ]: with futures . ThreadPoolExecutor ( max_workers = 10 ) as executor : future_work = [ executor . submit ( fetch_bbox , file ) for file in files_15 ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass values , dates = zip ( * list ( _filter_futures ( future_work ))) fig , ax1 = plt . subplots ( dpi = 150 ) fig . autofmt_xdate () ax1 . plot ( dates , values , label = \"No2\" ) ax1 . set_xlabel ( \"Dates\" ) ax1 . set_ylabel ( \"No2\" ) ax1 . legend () In [ ]: # same for all the days for the last 16 years In [ ]: with futures . ThreadPoolExecutor ( max_workers = 50 ) as executor : future_work = [ executor . submit ( fetch_bbox , file ) for file in files ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass values , dates = zip ( * list ( _filter_futures ( future_work ))) fig , ax1 = plt . subplots ( dpi = 150 ) fig . autofmt_xdate () ax1 . plot ( dates , values , label = \"No2\" ) ax1 . set_xlabel ( \"Dates\" ) ax1 . set_ylabel ( \"No2\" ) ax1 . legend ()","title":"COG at scale"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/#working-with-cog-at-scale","text":"For this demo we will use the new Ozone Monitoring Instrument (OMI) / Aura NO2 Tropospheric Column Density dataset hosted on AWS PDS: https://registry.opendata.aws/omi-no2-nasa/","title":"Working With COG - At Scale"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/#requirements","text":"AWS credentials rasterio ipyleaflet requests tqdm pip install rasterio[s3] ipyleaflet requests tqdm In [ ]: import os import json import urllib.parse from io import BytesIO from functools import partial from concurrent import futures import requests from boto3.session import Session as boto3_session from rasterio.plot import reshape_as_image from rasterio.features import bounds as featureBounds from tqdm.notebook import tqdm from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles % pylab inline In [ ]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint","title":"Requirements"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/#define-your-area-of-interest-aoi","text":"In [ ]: # use geojson.io geojson = { \"type\" : \"FeatureCollection\" , \"features\" : [ { \"type\" : \"Feature\" , \"properties\" : {}, \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ - 74.1796875 , 45.18978009667531 ], [ - 73.092041015625 , 45.18978009667531 ], [ - 73.092041015625 , 46.00459325574482 ], [ - 74.1796875 , 46.00459325574482 ], [ - 74.1796875 , 45.18978009667531 ] ] ] } } ] } bounds = featureBounds ( geojson ) In [ ]: Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 )","title":"Define your area of interest (AOI)"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/#list-available-files-on-aws-s3","text":"In [ ]: session = boto3_session ( region_name = \"us-west-2\" ) client = session . client ( \"s3\" ) bucket = \"omi-no2-nasa\" #https://registry.opendata.aws/omi-no2-nasa/ def list_objects ( bucket , prefix ): \"\"\"AWS s3 list objects.\"\"\" paginator = client . get_paginator ( 'list_objects_v2' ) files = [] for subset in paginator . paginate ( Bucket = bucket , Prefix = prefix ): files . extend ( subset . get ( \"Contents\" , [])) return [ r [ \"Key\" ] for r in files ] files = list_objects ( bucket , \"OMI-Aura_L3\" ) print ( f \"Found : { len ( files ) } \" ) In [ ]: print ( files [ 0 : 10 ]) file name structure is \"OMI-Aura_L3-OMNO2d_{YEAR}m{MONTH:02}{DAY:02}...\" We can then easily filter e.g In [ ]: files_2019 = list ( filter ( lambda x : x . split ( \"_\" )[ 2 ][ 0 : 4 ] == \"2019\" , files )) print ( len ( files_2019 )) In [ ]: files_Oct5 = list ( filter ( lambda x : ( x . split ( \"_\" )[ 2 ][ 5 : 7 ] == \"10\" ) & ( x . split ( \"_\" )[ 2 ][ 7 : 9 ] == \"05\" ), files )) print ( len ( files_Oct5 )) print ( files_Oct5 )","title":"List available files on AWS S3"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/#data-endpoint","text":"{endpoint}/cog/tiles/{z}/{x}/{y}.{format}?url={cog}&{otherquery params} {endpoint}/cog/crop/{minx},{miny},{maxx},{maxy}.{format}?url={cog}&{otherquery params} {endpoint}/cog/point/{minx},{miny}?url={cog}&{otherquery params}","title":"DATA Endpoint"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/#visualize-one-item","text":"In [ ]: def _url ( src_path ): return f \"s3://omi-no2-nasa/ { src_path } \" In [ ]: # Fetch File Metadata to get min/max rescaling values (because the file is stored as float32) r = requests . get ( f \" { titiler_endpoint } /cog/metadata\" , params = { \"url\" : _url ( files [ 0 ]), \"pmin\" : 20 , \"pmax\" : 98 , } ) . json () print ( json . dumps ( r , indent = 4 )) In [ ]: r = requests . get ( f \" { titiler_endpoint } /cog/tilejson.json\" , params = { \"url\" : _url ( files [ 2 ]), \"rescale\" : \"0,3000000000000000\" , \"color_map\" : \"viridis\" , } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 ) aod_layer = TileLayer ( url = r [ \"tiles\" ][ 0 ], opacity = 1 ) m . add_layer ( aod_layer ) m","title":"Visualize One Item"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF/#create-time-series-of-no2","text":"In [ ]: def _stats ( data , mask ): arr = numpy . ma . array ( data ) arr . mask = mask == 0 return arr . min () . item (), arr . max () . item (), arr . mean () . item (), arr . std () . item () xmin , ymin , xmax , ymax = bounds def fetch_bbox ( file ): url = f \" { titiler_endpoint } cog/crop/ { xmin } , { ymin } , { xmax } , { ymax } .npy\" params = { \"url\" : _url ( file ), \"bidx\" : \"1\" , \"max_size\" : 128 , } r = requests . get ( url , params = params ) data , mask = numpy . load ( BytesIO ( r . content ), allow_pickle = True ) s = _stats ( data , mask ) return s [ 1 ], file . split ( \"_\" )[ 2 ] In [ ]: def _filter_futures ( tasks ): for future in tasks : try : yield future . result () except Exception : pass In [ ]: # Every 15 of each month for all the years files_15 = list ( filter ( lambda x : ( x . split ( \"_\" )[ 2 ][ 7 : 9 ] == \"15\" ), files )) In [ ]: with futures . ThreadPoolExecutor ( max_workers = 10 ) as executor : future_work = [ executor . submit ( fetch_bbox , file ) for file in files_15 ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass values , dates = zip ( * list ( _filter_futures ( future_work ))) fig , ax1 = plt . subplots ( dpi = 150 ) fig . autofmt_xdate () ax1 . plot ( dates , values , label = \"No2\" ) ax1 . set_xlabel ( \"Dates\" ) ax1 . set_ylabel ( \"No2\" ) ax1 . legend () In [ ]: # same for all the days for the last 16 years In [ ]: with futures . ThreadPoolExecutor ( max_workers = 50 ) as executor : future_work = [ executor . submit ( fetch_bbox , file ) for file in files ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass values , dates = zip ( * list ( _filter_futures ( future_work ))) fig , ax1 = plt . subplots ( dpi = 150 ) fig . autofmt_xdate () ax1 . plot ( dates , values , label = \"No2\" ) ax1 . set_xlabel ( \"Dates\" ) ax1 . set_ylabel ( \"No2\" ) ax1 . legend ()","title":"Create time series of NO2"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF_simple/","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } pre { line-height: 125%; margin: 0; } td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } .highlight-ipynb .hll { background-color: #ffffcc } .highlight-ipynb { background: #f8f8f8; } .highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */ .highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */ .highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: #666666 } /* Operator */ .highlight-ipynb .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight-ipynb .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */ .highlight-ipynb .ge { font-style: italic } /* Generic.Emph */ .highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */ .highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */ .highlight-ipynb .go { color: #888888 } /* Generic.Output */ .highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */ .highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */ .highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */ .highlight-ipynb .m { color: #666666 } /* Literal.Number */ .highlight-ipynb .s { color: #BA2121 } /* Literal.String */ .highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */ .highlight-ipynb .nb { color: #008000 } /* Name.Builtin */ .highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight-ipynb .no { color: #880000 } /* Name.Constant */ .highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */ .highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight-ipynb .nf { color: #0000FF } /* Name.Function */ .highlight-ipynb .nl { color: #A0A000 } /* Name.Label */ .highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight-ipynb .nv { color: #19177C } /* Name.Variable */ .highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */ .highlight-ipynb .mb { color: #666666 } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */ .highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */ .highlight-ipynb .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */ .highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */ .highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight-ipynb .fm { color: #0000FF } /* Name.Function.Magic */ .highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */ .highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */ .highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */ .highlight-ipynb .vm { color: #19177C } /* Name.Variable.Magic */ .highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */ .rendered_html a{text-decoration:inherit !important}.rendered_html :link{text-decoration:inherit !important}.rendered_html :visited{text-decoration:inherit !important}pre code{background-color:inherit !important}.highlight{color:#000000}.highlight code{color:#000000}.highlight .n{color:#333333}.highlight .p{color:#000000}.text_cell .prompt{display:none !important}div.input_prompt{padding:0.2em 0.4em}div.output_prompt{padding:0.4em}.text_cell{margin:0 !important;padding:0 !important;border:none !important}.text_cell_render{margin:0 !important;padding:0 !important;border:none !important}.rendered_html *+p{margin-top:inherit !important}.anchor-link{display:none !important}.code_cell{margin:0 !important;padding:5px 0 !important;border:none !important}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;box-pack:end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-flex}.celltoolbar .tags_button_container{display:-webkit-box;display:-ms-flexbox;display:flex}.celltoolbar .tags_button_container .tag-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;-webkit-box-shadow:none;box-shadow:none;width:inherit;font-size:13px;font-family:\"Helvetica Neue\", Helvetica, Arial, sans-serif;height:22px;line-height:22px;display:inline-block}div.input_area>div.highlight{margin:0.25em 0.4em !important}.code_cell pre{font-size:12px !important}.output_html table.dataframe{font-family:Arial, sans-serif;font-size:13px;line-height:20px}.output_html table.dataframe th,td{padding:4px;text-align:left}.bk-plot-wrapper tbody tr{background:none !important}.bk-plot-wrapper tbody tr:hover{background:none !important} /*# sourceMappingURL=jupyter-fixes.min.css.map */ MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Working With COG \u00b6 For this demo we will use the new DigitalGlobe OpenData dataset https://www.digitalglobe.com/ecosystem/open-data Requirements \u00b6 ipyleaflet requests pip install ipyleaflet requests In [5]: import json import requests from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint url = \"https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif\" Get COG Info \u00b6 In [20]: # Fetch File Metadata to get min/max rescaling values (because the file is stored as float32) r = requests . get ( f \" { titiler_endpoint } /cog/info\" , params = { \"url\" : url , } ) . json () bounds = r [ \"bounds\" ] print ( r ) {'bounds': [57.664053823239804, -20.55473177712791, 57.84021477996238, -20.25261582755764], 'band_metadata': [[1, {}], [2, {}], [3, {}]], 'band_descriptions': [[1, 'band1'], [2, 'band2'], [3, 'band3']], 'dtype': 'uint8', 'colorinterp': ['red', 'green', 'blue'], 'nodata_type': 'Mask'} Get COG Metadata \u00b6 In [21]: # Fetch File Metadata to get min/max rescaling values (because the file is stored as float32) r = requests . get ( f \" { titiler_endpoint } /cog/metadata\" , params = { \"url\" : url , } ) . json () print ( json . dumps ( r , indent = 4 )) { \"bounds\": [ 57.664053823239804, -20.55473177712791, 57.84021477996238, -20.25261582755764 ], \"band_metadata\": [ [ 1, {} ], [ 2, {} ], [ 3, {} ] ], \"band_descriptions\": [ [ 1, \"band1\" ], [ 2, \"band2\" ], [ 3, \"band3\" ] ], \"dtype\": \"uint8\", \"colorinterp\": [ \"red\", \"green\", \"blue\" ], \"nodata_type\": \"Mask\", \"statistics\": { \"1\": { \"pc\": [ 0.0, 171.0 ], \"min\": 0.0, \"max\": 255.0, \"std\": 48.282133573955264, \"histogram\": [ [ 330584.0, 54820.0, 67683.0, 57434.0, 30305.0, 14648.0, 9606.0, 5653.0, 2296.0, 1051.0 ], [ 0.0, 25.5, 51.0, 76.5, 102.0, 127.5, 153.0, 178.5, 204.0, 229.5, 255.0 ] ] }, \"2\": { \"pc\": [ 5.0, 180.0 ], \"min\": 0.0, \"max\": 255.0, \"std\": 56.300819175100656, \"histogram\": [ [ 271018.0, 34938.0, 54030.0, 69429.0, 70260.0, 32107.0, 29375.0, 9697.0, 2001.0, 1225.0 ], [ 0.0, 25.5, 51.0, 76.5, 102.0, 127.5, 153.0, 178.5, 204.0, 229.5, 255.0 ] ] }, \"3\": { \"pc\": [ 14.0, 158.0 ], \"min\": 0.0, \"max\": 255.0, \"std\": 39.65505035854822, \"histogram\": [ [ 203263.0, 150865.0, 104882.0, 42645.0, 30652.0, 25382.0, 12434.0, 2397.0, 1097.0, 463.0 ], [ 0.0, 25.5, 51.0, 76.5, 102.0, 127.5, 153.0, 178.5, 204.0, 229.5, 255.0 ] ] } } } Display Tiles \u00b6 In [24]: r = requests . get ( f \" { titiler_endpoint } /cog/tilejson.json\" , params = { \"url\" : url , } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 13 ) aod_layer = TileLayer ( url = r [ \"tiles\" ][ 0 ], opacity = 1 ) m . add_layer ( aod_layer ) m var element = $('#b7b7c54a-b9e8-49f6-b543-07755b896e45'); {\"model_id\": \"7527b7b58d504b56838ec6f0a8252cc9\", \"version_major\": 2, \"version_minor\": 0} In [ ]:","title":"COG"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF_simple/#working-with-cog","text":"For this demo we will use the new DigitalGlobe OpenData dataset https://www.digitalglobe.com/ecosystem/open-data","title":"Working With COG"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF_simple/#requirements","text":"ipyleaflet requests pip install ipyleaflet requests In [5]: import json import requests from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint url = \"https://opendata.digitalglobe.com/events/mauritius-oil-spill/post-event/2020-08-12/105001001F1B5B00/105001001F1B5B00.tif\"","title":"Requirements"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF_simple/#get-cog-info","text":"In [20]: # Fetch File Metadata to get min/max rescaling values (because the file is stored as float32) r = requests . get ( f \" { titiler_endpoint } /cog/info\" , params = { \"url\" : url , } ) . json () bounds = r [ \"bounds\" ] print ( r ) {'bounds': [57.664053823239804, -20.55473177712791, 57.84021477996238, -20.25261582755764], 'band_metadata': [[1, {}], [2, {}], [3, {}]], 'band_descriptions': [[1, 'band1'], [2, 'band2'], [3, 'band3']], 'dtype': 'uint8', 'colorinterp': ['red', 'green', 'blue'], 'nodata_type': 'Mask'}","title":"Get COG Info"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF_simple/#get-cog-metadata","text":"In [21]: # Fetch File Metadata to get min/max rescaling values (because the file is stored as float32) r = requests . get ( f \" { titiler_endpoint } /cog/metadata\" , params = { \"url\" : url , } ) . json () print ( json . dumps ( r , indent = 4 )) { \"bounds\": [ 57.664053823239804, -20.55473177712791, 57.84021477996238, -20.25261582755764 ], \"band_metadata\": [ [ 1, {} ], [ 2, {} ], [ 3, {} ] ], \"band_descriptions\": [ [ 1, \"band1\" ], [ 2, \"band2\" ], [ 3, \"band3\" ] ], \"dtype\": \"uint8\", \"colorinterp\": [ \"red\", \"green\", \"blue\" ], \"nodata_type\": \"Mask\", \"statistics\": { \"1\": { \"pc\": [ 0.0, 171.0 ], \"min\": 0.0, \"max\": 255.0, \"std\": 48.282133573955264, \"histogram\": [ [ 330584.0, 54820.0, 67683.0, 57434.0, 30305.0, 14648.0, 9606.0, 5653.0, 2296.0, 1051.0 ], [ 0.0, 25.5, 51.0, 76.5, 102.0, 127.5, 153.0, 178.5, 204.0, 229.5, 255.0 ] ] }, \"2\": { \"pc\": [ 5.0, 180.0 ], \"min\": 0.0, \"max\": 255.0, \"std\": 56.300819175100656, \"histogram\": [ [ 271018.0, 34938.0, 54030.0, 69429.0, 70260.0, 32107.0, 29375.0, 9697.0, 2001.0, 1225.0 ], [ 0.0, 25.5, 51.0, 76.5, 102.0, 127.5, 153.0, 178.5, 204.0, 229.5, 255.0 ] ] }, \"3\": { \"pc\": [ 14.0, 158.0 ], \"min\": 0.0, \"max\": 255.0, \"std\": 39.65505035854822, \"histogram\": [ [ 203263.0, 150865.0, 104882.0, 42645.0, 30652.0, 25382.0, 12434.0, 2397.0, 1097.0, 463.0 ], [ 0.0, 25.5, 51.0, 76.5, 102.0, 127.5, 153.0, 178.5, 204.0, 229.5, 255.0 ] ] } } }","title":"Get COG Metadata"},{"location":"examples/Working_with_CloudOptimizedGeoTIFF_simple/#display-tiles","text":"In [24]: r = requests . get ( f \" { titiler_endpoint } /cog/tilejson.json\" , params = { \"url\" : url , } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 13 ) aod_layer = TileLayer ( url = r [ \"tiles\" ][ 0 ], opacity = 1 ) m . add_layer ( aod_layer ) m var element = $('#b7b7c54a-b9e8-49f6-b543-07755b896e45'); {\"model_id\": \"7527b7b58d504b56838ec6f0a8252cc9\", \"version_major\": 2, \"version_minor\": 0} In [ ]:","title":"Display Tiles"},{"location":"examples/Working_with_MosaicJSON/","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } pre { line-height: 125%; margin: 0; } td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } .highlight-ipynb .hll { background-color: #ffffcc } .highlight-ipynb { background: #f8f8f8; } .highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */ .highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */ .highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: #666666 } /* Operator */ .highlight-ipynb .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight-ipynb .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */ .highlight-ipynb .ge { font-style: italic } /* Generic.Emph */ .highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */ .highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */ .highlight-ipynb .go { color: #888888 } /* Generic.Output */ .highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */ .highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */ .highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */ .highlight-ipynb .m { color: #666666 } /* Literal.Number */ .highlight-ipynb .s { color: #BA2121 } /* Literal.String */ .highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */ .highlight-ipynb .nb { color: #008000 } /* Name.Builtin */ .highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight-ipynb .no { color: #880000 } /* Name.Constant */ .highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */ .highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight-ipynb .nf { color: #0000FF } /* Name.Function */ .highlight-ipynb .nl { color: #A0A000 } /* Name.Label */ .highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight-ipynb .nv { color: #19177C } /* Name.Variable */ .highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */ .highlight-ipynb .mb { color: #666666 } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */ .highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */ .highlight-ipynb .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */ .highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */ .highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight-ipynb .fm { color: #0000FF } /* Name.Function.Magic */ .highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */ .highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */ .highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */ .highlight-ipynb .vm { color: #19177C } /* Name.Variable.Magic */ .highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */ .rendered_html a{text-decoration:inherit !important}.rendered_html :link{text-decoration:inherit !important}.rendered_html :visited{text-decoration:inherit !important}pre code{background-color:inherit !important}.highlight{color:#000000}.highlight code{color:#000000}.highlight .n{color:#333333}.highlight .p{color:#000000}.text_cell .prompt{display:none !important}div.input_prompt{padding:0.2em 0.4em}div.output_prompt{padding:0.4em}.text_cell{margin:0 !important;padding:0 !important;border:none !important}.text_cell_render{margin:0 !important;padding:0 !important;border:none !important}.rendered_html *+p{margin-top:inherit !important}.anchor-link{display:none !important}.code_cell{margin:0 !important;padding:5px 0 !important;border:none !important}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;box-pack:end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-flex}.celltoolbar .tags_button_container{display:-webkit-box;display:-ms-flexbox;display:flex}.celltoolbar .tags_button_container .tag-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;-webkit-box-shadow:none;box-shadow:none;width:inherit;font-size:13px;font-family:\"Helvetica Neue\", Helvetica, Arial, sans-serif;height:22px;line-height:22px;display:inline-block}div.input_area>div.highlight{margin:0.25em 0.4em !important}.code_cell pre{font-size:12px !important}.output_html table.dataframe{font-family:Arial, sans-serif;font-size:13px;line-height:20px}.output_html table.dataframe th,td{padding:4px;text-align:left}.bk-plot-wrapper tbody tr{background:none !important}.bk-plot-wrapper tbody tr:hover{background:none !important} /*# sourceMappingURL=jupyter-fixes.min.css.map */ MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Working With MosaicJSON \u00b6 MosaicJSON \u00b6 MosaicJSON is a specification created by DevelopmentSeed which aims to be an open standard for representing metadata about a mosaic of Cloud-Optimized GeoTIFF (COG) files. MosaicJSON can be seen as a Virtual raster (see GDAL's VRT) enabling spatial and temporal processing for a list of Cloud-Optimized GeoTIFF. Ref: https://github.com/developmentseed/mosaicjson-spec Data \u00b6 For this demo, we are going to use CloudOptimized GeoTIFF from Digitalglobe opendata: https://www.digitalglobe.com/ecosystem/open-data Endpoint \u00b6 By default, TiTiler has a complete mosaicjson endpoint. For this demo we are going to use a slightly modifed version hosted by developmentseed at https://api.cogeo.xyz Docs: https://api.cogeo.xyz/docs#/MosaicJSON Requirements \u00b6 To be able to run this notebook you'll need the following requirements: rasterio ipyleaflet requests tqdm BeautifullSoup (webpage parsing) rio-tiler (2.0b8) (Optional) cogeo-mosaic (Optional) !pip install rasterio ipyleaflet requests tqdm bs4 requests !pip install rio-tiler cogeo-mosaic --pre Get the Data \u00b6 In [1]: import os import json import rasterio import requests import bs4 as BeautifulSoup from concurrent import futures from rio_tiler.io import COGReader from rasterio.features import bounds as featureBounds import bs4 as BeautifulSoup from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON 1. Fetch page and find links \u00b6 In [2]: url = \"https://www.digitalglobe.com/ecosystem/open-data/california-colorado-fires\" # Read Page r = requests . get ( url ) soup = BeautifulSoup . BeautifulSoup ( r . text ) s = soup . findAll ( 'a' ) 2. Find GeoTIFF Urls \u00b6 In [3]: list_file = list ( set ([ l . get ( 'href' ) for l in s if l . get ( 'href' ) . endswith ( \".tif\" )])) files = [ dict ( date = l . split ( \"/\" )[ 6 ], tags = [ l . split ( \"/\" )[ 5 ]], path = l , sceneid = l . split ( \"/\" )[ 7 ], preview = f \"https://api.discover.digitalglobe.com/show?id= { l . split ( '/' )[ 7 ] } &f=jpeg\" , event = l . split ( \"/\" )[ 4 ], ) for l in list_file ] files = sorted ( files , key = lambda x : x [ \"date\" ]) print ( f \"Number of GeoTIFF: { len ( list_file ) } \" ) Number of GeoTIFF: 52 3. Pre/Post event \u00b6 In [4]: pre_event = list ( filter ( lambda x : x [ \"tags\" ] == [ \"pre-event\" ], files )) post_event = list ( filter ( lambda x : x [ \"tags\" ] == [ \"post-event\" ], files )) print ( f \"Number of Pre Event COG: { len ( pre_event ) } \" ) print ( f \"Number of Post Event COG: { len ( post_event ) } \" ) Number of Pre Event COG: 37 Number of Post Event COG: 15 4. Create Features and Viz(Optional) \u00b6 In [9]: def worker ( meta ): try : with COGReader ( meta [ \"path\" ]) as cog : wgs_bounds = cog . bounds except : return {} return { \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ wgs_bounds [ 0 ], wgs_bounds [ 3 ]], [ wgs_bounds [ 0 ], wgs_bounds [ 1 ]], [ wgs_bounds [ 2 ], wgs_bounds [ 1 ]], [ wgs_bounds [ 2 ], wgs_bounds [ 3 ]], [ wgs_bounds [ 0 ], wgs_bounds [ 3 ]] ] ] }, \"properties\" : meta , \"type\" : \"Feature\" } with futures . ThreadPoolExecutor ( max_workers = 5 ) as executor : responses = [ r for r in executor . map ( worker , post_event ) if r ] In [10]: geojson = { 'type' : 'FeatureCollection' , 'features' : responses } bounds = featureBounds ( geojson ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 ) geo_json = GeoJSON ( data = geojson , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m var element = $('#73e8e3f5-15b3-449e-82dd-29e7955cce85'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"81862f4fc239412d8eb878a42cc776dd\"} 5. Create Mosaic \u00b6 In [17]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint username = \"anonymous\" # Update this layername = \"dgopendata_CAfire_2020_post\" # WARNING, you can overwrite Mosaics 5.1. Create Token \u00b6 Note: Right now everyone can create a token to upload or create a mosaic in DevSeed infrastructure Docs: https://api.cogeo.xyz/docs#/Token/create_token_tokens_create_post In [13]: r = requests . post ( f \" { titiler_endpoint } /tokens/create\" , json = { \"username\" : username , \"scope\" : [ \"mosaic:read\" , \"mosaic:create\" ] } ) . json () token = r [ \"token\" ] print ( token ) eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJzY29wZSI6WyJtb3NhaWM6cmVhZCIsIm1vc2FpYzpjcmVhdGUiXSwiaWF0IjoxNTk5NTc1NTQxLCJleHAiOjE1OTk1NzkxNDF9.e7PfiNoiBEomGwrXPWwjZKPISsJJoBXweeEZCcDkdmE 5.2. Create Mosaic \u00b6 Docs: https://api.cogeo.xyz/docs#/MosaicJSON/create_mosaic_mosaicjson_create_post In [14]: r = requests . post ( f \" { titiler_endpoint } /mosaicjson/create\" , json = { \"username\" : username , \"layername\" : layername , \"files\" : [ f [ \"path\" ] for f in post_event ] }, params = { \"access_token\" : r [ \"token\" ] } ) . json () print ( r ) {'username': 'anonymous', 'layername': 'dgopendata_CAfire_2020_post', 'mosaic': 'anonymous.dgopendata_CAfire_2020_post'} You can also upload a mosaic \u00b6 In [15]: # from cogeo_mosaic.mosaic import MosaicJSON # mosaicdata = MosaicJSON.from_urls([f[\"path\"] for f in post_event]) # print(mosaicdata) # r = requests.post( # f\"{titiler_endpoint}/mosaicjson/upload\", # json={ # \"username\": username, # \"layername\": layername, # \"mosaic\": mosaicdata.dict(exclude_none=True) # }, # params={ # \"access_token\": token # } # ).json() 5.3. Display Tiles \u00b6 Docs: https://api.cogeo.xyz/docs#/MosaicJSON/tilejson_mosaicjson__layer__tilejson_json_get In [16]: r = requests . get ( f \" { titiler_endpoint } /mosaicjson/ { username } . { layername } /tilejson.json\" , ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) geo_json = GeoJSON ( data = geojson , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'anonymous.dgopendata_CAfire_2020_post', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/mosaicjson/anonymous.dgopendata_CAfire_2020_post/tiles/{z}/{x}/{y}@1x?'], 'minzoom': 10, 'maxzoom': 18, 'bounds': [-123.00645857801385, 36.254745572560125, -105.74089644974157, 40.65200026193052], 'center': [-114.37367751387771, 38.45337291724532, 10]} var element = $('#5ca6189c-539a-47a1-9807-9c8a5beb4a2a'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"3f58e1f2d1ed4771a675add725d68972\"}","title":"MosaicJSON"},{"location":"examples/Working_with_MosaicJSON/#working-with-mosaicjson","text":"","title":"Working With MosaicJSON"},{"location":"examples/Working_with_MosaicJSON/#mosaicjson","text":"MosaicJSON is a specification created by DevelopmentSeed which aims to be an open standard for representing metadata about a mosaic of Cloud-Optimized GeoTIFF (COG) files. MosaicJSON can be seen as a Virtual raster (see GDAL's VRT) enabling spatial and temporal processing for a list of Cloud-Optimized GeoTIFF. Ref: https://github.com/developmentseed/mosaicjson-spec","title":"MosaicJSON"},{"location":"examples/Working_with_MosaicJSON/#data","text":"For this demo, we are going to use CloudOptimized GeoTIFF from Digitalglobe opendata: https://www.digitalglobe.com/ecosystem/open-data","title":"Data"},{"location":"examples/Working_with_MosaicJSON/#endpoint","text":"By default, TiTiler has a complete mosaicjson endpoint. For this demo we are going to use a slightly modifed version hosted by developmentseed at https://api.cogeo.xyz Docs: https://api.cogeo.xyz/docs#/MosaicJSON","title":"Endpoint"},{"location":"examples/Working_with_MosaicJSON/#requirements","text":"To be able to run this notebook you'll need the following requirements: rasterio ipyleaflet requests tqdm BeautifullSoup (webpage parsing) rio-tiler (2.0b8) (Optional) cogeo-mosaic (Optional) !pip install rasterio ipyleaflet requests tqdm bs4 requests !pip install rio-tiler cogeo-mosaic --pre","title":"Requirements"},{"location":"examples/Working_with_MosaicJSON/#get-the-data","text":"In [1]: import os import json import rasterio import requests import bs4 as BeautifulSoup from concurrent import futures from rio_tiler.io import COGReader from rasterio.features import bounds as featureBounds import bs4 as BeautifulSoup from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON","title":"Get the Data"},{"location":"examples/Working_with_MosaicJSON/#1-fetch-page-and-find-links","text":"In [2]: url = \"https://www.digitalglobe.com/ecosystem/open-data/california-colorado-fires\" # Read Page r = requests . get ( url ) soup = BeautifulSoup . BeautifulSoup ( r . text ) s = soup . findAll ( 'a' )","title":"1. Fetch page and find links"},{"location":"examples/Working_with_MosaicJSON/#2-find-geotiff-urls","text":"In [3]: list_file = list ( set ([ l . get ( 'href' ) for l in s if l . get ( 'href' ) . endswith ( \".tif\" )])) files = [ dict ( date = l . split ( \"/\" )[ 6 ], tags = [ l . split ( \"/\" )[ 5 ]], path = l , sceneid = l . split ( \"/\" )[ 7 ], preview = f \"https://api.discover.digitalglobe.com/show?id= { l . split ( '/' )[ 7 ] } &f=jpeg\" , event = l . split ( \"/\" )[ 4 ], ) for l in list_file ] files = sorted ( files , key = lambda x : x [ \"date\" ]) print ( f \"Number of GeoTIFF: { len ( list_file ) } \" ) Number of GeoTIFF: 52","title":"2. Find GeoTIFF Urls"},{"location":"examples/Working_with_MosaicJSON/#3-prepost-event","text":"In [4]: pre_event = list ( filter ( lambda x : x [ \"tags\" ] == [ \"pre-event\" ], files )) post_event = list ( filter ( lambda x : x [ \"tags\" ] == [ \"post-event\" ], files )) print ( f \"Number of Pre Event COG: { len ( pre_event ) } \" ) print ( f \"Number of Post Event COG: { len ( post_event ) } \" ) Number of Pre Event COG: 37 Number of Post Event COG: 15","title":"3. Pre/Post event"},{"location":"examples/Working_with_MosaicJSON/#4-create-features-and-vizoptional","text":"In [9]: def worker ( meta ): try : with COGReader ( meta [ \"path\" ]) as cog : wgs_bounds = cog . bounds except : return {} return { \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ wgs_bounds [ 0 ], wgs_bounds [ 3 ]], [ wgs_bounds [ 0 ], wgs_bounds [ 1 ]], [ wgs_bounds [ 2 ], wgs_bounds [ 1 ]], [ wgs_bounds [ 2 ], wgs_bounds [ 3 ]], [ wgs_bounds [ 0 ], wgs_bounds [ 3 ]] ] ] }, \"properties\" : meta , \"type\" : \"Feature\" } with futures . ThreadPoolExecutor ( max_workers = 5 ) as executor : responses = [ r for r in executor . map ( worker , post_event ) if r ] In [10]: geojson = { 'type' : 'FeatureCollection' , 'features' : responses } bounds = featureBounds ( geojson ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 6 ) geo_json = GeoJSON ( data = geojson , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m var element = $('#73e8e3f5-15b3-449e-82dd-29e7955cce85'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"81862f4fc239412d8eb878a42cc776dd\"}","title":"4. Create Features and Viz(Optional)"},{"location":"examples/Working_with_MosaicJSON/#5-create-mosaic","text":"In [17]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint username = \"anonymous\" # Update this layername = \"dgopendata_CAfire_2020_post\" # WARNING, you can overwrite Mosaics","title":"5. Create Mosaic"},{"location":"examples/Working_with_MosaicJSON/#51-create-token","text":"Note: Right now everyone can create a token to upload or create a mosaic in DevSeed infrastructure Docs: https://api.cogeo.xyz/docs#/Token/create_token_tokens_create_post In [13]: r = requests . post ( f \" { titiler_endpoint } /tokens/create\" , json = { \"username\" : username , \"scope\" : [ \"mosaic:read\" , \"mosaic:create\" ] } ) . json () token = r [ \"token\" ] print ( token ) eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhbm9ueW1vdXMiLCJzY29wZSI6WyJtb3NhaWM6cmVhZCIsIm1vc2FpYzpjcmVhdGUiXSwiaWF0IjoxNTk5NTc1NTQxLCJleHAiOjE1OTk1NzkxNDF9.e7PfiNoiBEomGwrXPWwjZKPISsJJoBXweeEZCcDkdmE","title":"5.1. Create Token"},{"location":"examples/Working_with_MosaicJSON/#52-create-mosaic","text":"Docs: https://api.cogeo.xyz/docs#/MosaicJSON/create_mosaic_mosaicjson_create_post In [14]: r = requests . post ( f \" { titiler_endpoint } /mosaicjson/create\" , json = { \"username\" : username , \"layername\" : layername , \"files\" : [ f [ \"path\" ] for f in post_event ] }, params = { \"access_token\" : r [ \"token\" ] } ) . json () print ( r ) {'username': 'anonymous', 'layername': 'dgopendata_CAfire_2020_post', 'mosaic': 'anonymous.dgopendata_CAfire_2020_post'}","title":"5.2. Create Mosaic"},{"location":"examples/Working_with_MosaicJSON/#you-can-also-upload-a-mosaic","text":"In [15]: # from cogeo_mosaic.mosaic import MosaicJSON # mosaicdata = MosaicJSON.from_urls([f[\"path\"] for f in post_event]) # print(mosaicdata) # r = requests.post( # f\"{titiler_endpoint}/mosaicjson/upload\", # json={ # \"username\": username, # \"layername\": layername, # \"mosaic\": mosaicdata.dict(exclude_none=True) # }, # params={ # \"access_token\": token # } # ).json()","title":"You can also upload a mosaic"},{"location":"examples/Working_with_MosaicJSON/#53-display-tiles","text":"Docs: https://api.cogeo.xyz/docs#/MosaicJSON/tilejson_mosaicjson__layer__tilejson_json_get In [16]: r = requests . get ( f \" { titiler_endpoint } /mosaicjson/ { username } . { layername } /tilejson.json\" , ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) geo_json = GeoJSON ( data = geojson , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'anonymous.dgopendata_CAfire_2020_post', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/mosaicjson/anonymous.dgopendata_CAfire_2020_post/tiles/{z}/{x}/{y}@1x?'], 'minzoom': 10, 'maxzoom': 18, 'bounds': [-123.00645857801385, 36.254745572560125, -105.74089644974157, 40.65200026193052], 'center': [-114.37367751387771, 38.45337291724532, 10]} var element = $('#5ca6189c-539a-47a1-9807-9c8a5beb4a2a'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"3f58e1f2d1ed4771a675add725d68972\"}","title":"5.3. Display Tiles"},{"location":"examples/Working_with_STAC/","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } pre { line-height: 125%; margin: 0; } td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } .highlight-ipynb .hll { background-color: #ffffcc } .highlight-ipynb { background: #f8f8f8; } .highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */ .highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */ .highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: #666666 } /* Operator */ .highlight-ipynb .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight-ipynb .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */ .highlight-ipynb .ge { font-style: italic } /* Generic.Emph */ .highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */ .highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */ .highlight-ipynb .go { color: #888888 } /* Generic.Output */ .highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */ .highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */ .highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */ .highlight-ipynb .m { color: #666666 } /* Literal.Number */ .highlight-ipynb .s { color: #BA2121 } /* Literal.String */ .highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */ .highlight-ipynb .nb { color: #008000 } /* Name.Builtin */ .highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight-ipynb .no { color: #880000 } /* Name.Constant */ .highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */ .highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight-ipynb .nf { color: #0000FF } /* Name.Function */ .highlight-ipynb .nl { color: #A0A000 } /* Name.Label */ .highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight-ipynb .nv { color: #19177C } /* Name.Variable */ .highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */ .highlight-ipynb .mb { color: #666666 } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */ .highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */ .highlight-ipynb .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */ .highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */ .highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight-ipynb .fm { color: #0000FF } /* Name.Function.Magic */ .highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */ .highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */ .highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */ .highlight-ipynb .vm { color: #19177C } /* Name.Variable.Magic */ .highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */ .rendered_html a{text-decoration:inherit !important}.rendered_html :link{text-decoration:inherit !important}.rendered_html :visited{text-decoration:inherit !important}pre code{background-color:inherit !important}.highlight{color:#000000}.highlight code{color:#000000}.highlight .n{color:#333333}.highlight .p{color:#000000}.text_cell .prompt{display:none !important}div.input_prompt{padding:0.2em 0.4em}div.output_prompt{padding:0.4em}.text_cell{margin:0 !important;padding:0 !important;border:none !important}.text_cell_render{margin:0 !important;padding:0 !important;border:none !important}.rendered_html *+p{margin-top:inherit !important}.anchor-link{display:none !important}.code_cell{margin:0 !important;padding:5px 0 !important;border:none !important}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;box-pack:end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-flex}.celltoolbar .tags_button_container{display:-webkit-box;display:-ms-flexbox;display:flex}.celltoolbar .tags_button_container .tag-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;-webkit-box-shadow:none;box-shadow:none;width:inherit;font-size:13px;font-family:\"Helvetica Neue\", Helvetica, Arial, sans-serif;height:22px;line-height:22px;display:inline-block}div.input_area>div.highlight{margin:0.25em 0.4em !important}.code_cell pre{font-size:12px !important}.output_html table.dataframe{font-family:Arial, sans-serif;font-size:13px;line-height:20px}.output_html table.dataframe th,td{padding:4px;text-align:left}.bk-plot-wrapper tbody tr{background:none !important}.bk-plot-wrapper tbody tr:hover{background:none !important} /*# sourceMappingURL=jupyter-fixes.min.css.map */ MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Working With STAC - At Scale \u00b6 STAC: SpatioTemporal Asset Catalog \u00b6 The SpatioTemporal Asset Catalog (STAC) specification aims to standardize the way geospatial assets are exposed online and queried. A 'spatiotemporal asset' is any file that represents information about the earth captured in a certain space and time. The initial focus is primarily remotely-sensed imagery (from satellites, but also planes, drones, balloons, etc), but the core is designed to be extensible to SAR, full motion video, point clouds, hyperspectral, LiDAR and derived data like NDVI, Digital Elevation Models, mosaics, etc. Ref: https://github.com/radiantearth/stac-spechttps://github.com/radiantearth/stac-spec Using STAC makes data indexation and discovery really easy. In addition to the Collection/Item/Asset (data) specifications, data providers are also encouraged to follow a STAC API specification: https://github.com/radiantearth/stac-api-spec The API is compliant with the OGC API - Features standard (formerly known as OGC Web Feature Service 3), in that it defines many of the endpoints that STAC uses. A STAC API should be compatible and usable with any OGC API - Features clients. The STAC API can be thought of as a specialized Features API to search STAC Catalogs, where the features returned are STAC Items, that have common properties, links to their assets and geometries that represent the footprints of the geospatial assets. Sentinel 2 \u00b6 Thanks to Digital Earth Africa and in collaboration with Sinergise, Element 84, Amazon Web Services (AWS) and the Committee on Earth Observation Satellites (CEOS), Sentinel 2 (Level 2) data over Africa, usually stored as JPEG2000, has been translated to COG more important a STAC database and API has been setup. https://www.digitalearthafrica.org/news/operational-and-ready-use-satellite-data-now-available-across-africa The API is provided by @element84 and follows the latest specification: https://earth-search.aws.element84.com/v0 TiTiler: STAC + COG \u00b6 Docs: https://github.com/developmentseed/titiler/blob/master/docs/endpoints/stac.md TiTiler was first designed to work with single COG by passing the file URL to the tiler. e.g : https://myendpoint/cog/tiles/1/2/3?url=https://somewhere.com/mycog.tif With STAC is a bit different because we first have to read the STAC items and then know which assets to read. Example of STAC Item { \"type\": \"Feature\", \"id\": \"S2A_34SGA_20200318_0_L2A\", \"geometry\": {...}, \"properties\": { \"datetime\": \"2020-03-18T09:11:33Z\", ... }, \"collection\": \"sentinel-s2-l2a-cogs\", \"assets\": { \"thumbnail\": { \"title\": \"Thumbnail\", \"type\": \"image/png\", \"href\": \"https://myurl.com/preview.jpg\" }, ... \"B03\": { \"title\": \"Band 3 (green)\", \"type\": \"image/tiff; application=geotiff; profile=cloud-optimized\", \"href\": \"https://myurl.com/B03.tif\", \"proj:shape\": [ 10980, 10980 ], \"proj:transform\": [ 10, 0, 699960, 0, -10, 3600000, 0,-* 0, 1 ] }, ... }, \"links\": [...] } To be able to create Web Map tile from the B03 asset you'll need to pass the STAC Item url and the asset name: https://myendpoint/stac/tiles/1/2/3?url=https://somewhere.com/item.json&assets=B03 Requirements \u00b6 To be able to run this notebook you'll need the following requirements: rasterio ipyleaflet requests tqdm !pip install rasterio ipyleaflet requests tqdm In [1]: import os import json import base64 import requests import datetime import itertools import urllib.parse from io import BytesIO from functools import partial from concurrent import futures from tqdm.notebook import tqdm from rasterio.plot import reshape_as_image from rasterio.features import bounds as featureBounds from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: # Endpoint variables titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint stac_endpoint = \"https://earth-search.aws.element84.com/v0/search\" Search for STAC Items \u00b6 See https://github.com/radiantearth/stac-api-spec for more documentation about the stac API AOI You can use geojson.io to define your search AOI In [3]: geojson = { \"type\" : \"FeatureCollection\" , \"features\" : [ { \"type\" : \"Feature\" , \"properties\" : {}, \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ 30.810813903808594 , 29.454247067148533 ], [ 30.88600158691406 , 29.454247067148533 ], [ 30.88600158691406 , 29.51879923863822 ], [ 30.810813903808594 , 29.51879923863822 ], [ 30.810813903808594 , 29.454247067148533 ] ] ] } } ] } bounds = featureBounds ( geojson ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 11 ) geo_json = GeoJSON ( data = geojson ) m . add_layer ( geo_json ) m var element = $('#31f949c9-ad1f-4cd9-aaa3-f8ee81e1c85a'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"7325e1bd9a0848508a51c3c48d78299b\"} Define dates and other filters In [4]: start = datetime . datetime . strptime ( \"2019-01-01\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T00:00:00Z\" ) end = datetime . datetime . strptime ( \"2019-12-11\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T23:59:59Z\" ) # POST body query = { \"collections\" : [ \"sentinel-s2-l2a-cogs\" ], \"datetime\" : f \" { start } / { end } \" , \"query\" : { \"eo:cloud_cover\" : { \"lt\" : 5 } }, \"intersects\" : geojson [ \"features\" ][ 0 ][ \"geometry\" ], \"limit\" : 100 , \"fields\" : { 'include' : [ 'id' , 'properties.datetime' , 'properties.eo:cloud_cover' ], # This will limit the size of returned body 'exclude' : [ 'assets' , 'links' ] # This will limit the size of returned body } } # POST Headers headers = { \"Content-Type\" : \"application/json\" , \"Accept-Encoding\" : \"gzip\" , \"Accept\" : \"application/geo+json\" , } data = requests . post ( stac_endpoint , headers = headers , json = query ) . json () print ( \"Results context:\" ) print ( data [ \"context\" ]) print () print ( \"Example of item:\" ) print ( json . dumps ( data [ \"features\" ][ 0 ], indent = 4 )) sceneid = [ f [ \"id\" ] for f in data [ \"features\" ]] cloudcover = [ f [ \"properties\" ][ \"eo:cloud_cover\" ] for f in data [ \"features\" ]] dates = [ f [ \"properties\" ][ \"datetime\" ][ 0 : 10 ] for f in data [ \"features\" ]] Results context: {'page': 1, 'limit': 100, 'matched': 84, 'returned': 84} Example of item: { \"bbox\": [ 30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527 ], \"geometry\": { \"coordinates\": [ [ [ 30.155974613579858, 28.80949327971016 ], [ 30.407037927198104, 29.805008695373978 ], [ 31.031551610920825, 29.815791988006527 ], [ 31.050481437029678, 28.825387639743422 ], [ 30.155974613579858, 28.80949327971016 ] ] ], \"type\": \"Polygon\" }, \"id\": \"S2B_36RTT_20191205_0_L2A\", \"collection\": \"sentinel-s2-l2a-cogs\", \"type\": \"Feature\", \"properties\": { \"datetime\": \"2019-12-05T08:42:04Z\", \"eo:cloud_cover\": 2.75 } } In [5]: m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 8 ) geo_json = GeoJSON ( data = data , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m var element = $('#0b6aa23b-7591-411b-8cd1-c4a9c37fe5fb'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"b39d3b9f21554f02b8d1f50b179dad3f\"} Plot Date / Cloud Cover In [6]: fig = plt . figure ( dpi = 100 ) fig . autofmt_xdate () ax = fig . add_subplot ( 1 , 1 , 1 ) ax . plot ( dates , cloudcover , label = \"Cloud Cover\" , color = \"tab:red\" , linewidth = 0.4 , linestyle = \"-.\" ) ax . legend () Out[6]: <matplotlib.legend.Legend at 0x120997ed0> *{stroke-linecap:butt;stroke-linejoin:round;} Use Titiler endpoint \u00b6 https://api.cogeo.xyz/docs#/SpatioTemporal%20Asset%20Catalog {endpoint}/stac/tiles/{z}/{x}/{y}.{format}?url={stac_item}&{otherquery params} {endpoint}/stac/crop/{minx},{miny},{maxx},{maxy}.{format}?url={stac_item}&{otherquery params} {endpoint}/stac/point/{minx},{miny}?url={stac_item}&{otherquery params} In [7]: url_template = \"https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/ {id} \" Visualize One Item \u00b6 In [8]: # Get Tile URL r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : url_template . format ( id = sceneid [ 0 ]), \"assets\" : \"B04,B03,B02\" , # Simple RGB combination (True Color) \"color_formula\" : \"Gamma RGB 3.5 Saturation 1.7 Sigmoidal RGB 15 0.35\" , # We use a rio-color formula to make the tiles look nice \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'S2B_36RTT_20191205_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_36RTT_20191205_0_L2A&assets=B04%2CB03%2CB02&color_formula=Gamma+RGB+3.5+Saturation+1.7+Sigmoidal+RGB+15+0.35'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527], 'center': [30.603228025304766, 29.312642633858346, 8]} var element = $('#e9c79bc9-6486-42f3-8a53-457549b400e5'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"c87a9ca3bcb64dd2a2fae5d7e3890059\"} In [9]: r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : url_template . format ( id = sceneid [ 0 ]), \"assets\" : \"B08,B04,B03\" , # False Color Infrared \"color_formula\" : \"Gamma RGB 3.5 Saturation 1.7 Sigmoidal RGB 15 0.35\" , \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'S2B_36RTT_20191205_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_36RTT_20191205_0_L2A&assets=B08%2CB04%2CB03&color_formula=Gamma+RGB+3.5+Saturation+1.7+Sigmoidal+RGB+15+0.35'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527], 'center': [30.603228025304766, 29.312642633858346, 8]} var element = $('#7134783d-429c-4dec-a81a-115db8183218'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"ebb43c8fd90646b59b49a254913c4d8d\"} In [10]: r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : url_template . format ( id = sceneid [ 0 ]), \"expression\" : \"(B08-B04)/(B08+B04)\" , # NDVI \"rescale\" : \"-1,1\" , \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 \"color_map\" : \"viridis\" , } ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'S2B_36RTT_20191205_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_36RTT_20191205_0_L2A&expression=%28B08-B04%29%2F%28B08%2BB04%29&rescale=-1%2C1&color_map=viridis'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527], 'center': [30.603228025304766, 29.312642633858346, 8]} var element = $('#ed2fba7d-cb5f-4351-956f-63940bc63ac8'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"971ff4c3342c44aa877155c66280c18c\"} More \u00b6 titiler doesn't return only png or jpeg but can also return Numpy array directly In [11]: def fetch_bbox_array ( sceneid , bbox , assets = None , expression = None , ** kwargs ): \"\"\"Helper function to fetch and decode Numpy array using Titiler endpoint.\"\"\" # STAC ITEM URL stac_item = f \"https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/ { sceneid } \" xmin , ymin , xmax , ymax = bbox # TiTiler required URL + asset or expression parameters params = { \"url\" : stac_item } if assets : params . update ( dict ( assets = \",\" . join ( assets ))) elif expression : params . update ( dict ( expression = expression )) else : raise Exception ( \"Missing band or expression input\" ) params . update ( ** kwargs ) # TITILER ENDPOINT url = f \" { titiler_endpoint } stac/crop/ { xmin } , { ymin } , { xmax } , { ymax } .npy\" r = requests . get ( url , params = params ) data , mask = numpy . load ( BytesIO ( r . content ), allow_pickle = True ) return sceneid , data , mask def _filter_futures ( tasks ): for future in tasks : try : yield future . result () except Exception : pass def _stats ( data , mask ): arr = numpy . ma . array ( data ) arr . mask = mask == 0 return arr . min () . item (), arr . max () . item (), arr . mean () . item (), arr . std () . item () In [13]: # Fetch one data _ , data , mask = fetch_bbox_array ( sceneid [ 0 ], bounds , assets = [ \"B02\" ], width = 128 , height = 128 ) print ( data . shape ) print ( mask . shape ) imshow ( data [ 0 ]) (1, 128, 128) (128, 128) Out[13]: <matplotlib.image.AxesImage at 0x1237baa10> *{stroke-linecap:butt;stroke-linejoin:round;} In [14]: # Let's fetch the data over our AOI for all our Items # Here we use `futures.ThreadPoolExecutor` to run the requests in parallel # Note: it takes more time for the notebook to display the results than to fetch the data bbox_worker = partial ( fetch_bbox_array , bbox = bounds , assets = ( \"B04\" , \"B03\" , \"B02\" ), color_formula = \"gamma RGB 3.5, saturation 1.7, sigmoidal RGB 15 0.35\" , width = 64 , height = 64 , ) with futures . ThreadPoolExecutor ( max_workers = 10 ) as executor : future_work = [ executor . submit ( bbox_worker , scene ) for scene in sceneid ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass results_rgb = list ( _filter_futures ( future_work )) print ( \"diplay all results\" ) fig = plt . figure ( figsize = ( 10 , 20 )) col = 5 row = math . ceil ( len ( dates ) / col ) for i in range ( 1 , len ( results_rgb ) + 1 ): fig . add_subplot ( row , col , i ) plt . imshow ( reshape_as_image ( results_rgb [ i - 1 ][ 1 ])) var element = $('#0accb7fc-2fd3-44db-9957-738e3378a03a'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"7ea6e8d3349243688f28f70d6016091d\"} diplay all results *{stroke-linecap:butt;stroke-linejoin:round;} In [15]: ## Fetch NDVI bbox_worker = partial ( fetch_bbox_array , bbox = bounds , expression = \"(B08-B04)/(B08+B04)\" , width = 64 , height = 64 , ) with futures . ThreadPoolExecutor ( max_workers = 10 ) as executor : future_work = [ executor . submit ( bbox_worker , scene ) for scene in sceneid ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass results_ndvi = list ( _filter_futures ( future_work )) fig = plt . figure ( figsize = ( 10 , 20 )) col = 5 row = math . ceil ( len ( dates ) / col ) for i in range ( 1 , len ( results_rgb ) + 1 ): fig . add_subplot ( row , col , i ) plt . imshow ( results_ndvi [ i - 1 ][ 1 ][ 0 ]) var element = $('#9af64a90-66e1-402f-acf5-c90dff277820'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"7dfa7548360a4092a8703ccb1e142b5a\"} *{stroke-linecap:butt;stroke-linejoin:round;} In [16]: stats = [ _stats ( data , mask ) for _ , data , mask in results_ndvi ] fig , ax1 = plt . subplots ( dpi = 150 ) fig . autofmt_xdate () ax1 . plot ( dates , [ s [ 0 ] for s in stats ], label = \"Min\" ) ax1 . plot ( dates , [ s [ 1 ] for s in stats ], label = \"Max\" ) ax1 . plot ( dates , [ s [ 2 ] for s in stats ], label = \"Mean\" ) ax1 . set_xlabel ( \"Dates\" ) ax1 . set_ylabel ( \"Normalized Difference Vegetation Index\" ) ax1 . legend () Out[16]: <matplotlib.legend.Legend at 0x123da7650> *{stroke-linecap:butt;stroke-linejoin:round;} In [ ]:","title":"STAC at scale"},{"location":"examples/Working_with_STAC/#working-with-stac-at-scale","text":"","title":"Working With STAC - At Scale"},{"location":"examples/Working_with_STAC/#stac-spatiotemporal-asset-catalog","text":"The SpatioTemporal Asset Catalog (STAC) specification aims to standardize the way geospatial assets are exposed online and queried. A 'spatiotemporal asset' is any file that represents information about the earth captured in a certain space and time. The initial focus is primarily remotely-sensed imagery (from satellites, but also planes, drones, balloons, etc), but the core is designed to be extensible to SAR, full motion video, point clouds, hyperspectral, LiDAR and derived data like NDVI, Digital Elevation Models, mosaics, etc. Ref: https://github.com/radiantearth/stac-spechttps://github.com/radiantearth/stac-spec Using STAC makes data indexation and discovery really easy. In addition to the Collection/Item/Asset (data) specifications, data providers are also encouraged to follow a STAC API specification: https://github.com/radiantearth/stac-api-spec The API is compliant with the OGC API - Features standard (formerly known as OGC Web Feature Service 3), in that it defines many of the endpoints that STAC uses. A STAC API should be compatible and usable with any OGC API - Features clients. The STAC API can be thought of as a specialized Features API to search STAC Catalogs, where the features returned are STAC Items, that have common properties, links to their assets and geometries that represent the footprints of the geospatial assets.","title":"STAC: SpatioTemporal Asset Catalog"},{"location":"examples/Working_with_STAC/#sentinel-2","text":"Thanks to Digital Earth Africa and in collaboration with Sinergise, Element 84, Amazon Web Services (AWS) and the Committee on Earth Observation Satellites (CEOS), Sentinel 2 (Level 2) data over Africa, usually stored as JPEG2000, has been translated to COG more important a STAC database and API has been setup. https://www.digitalearthafrica.org/news/operational-and-ready-use-satellite-data-now-available-across-africa The API is provided by @element84 and follows the latest specification: https://earth-search.aws.element84.com/v0","title":"Sentinel 2"},{"location":"examples/Working_with_STAC/#titiler-stac-cog","text":"Docs: https://github.com/developmentseed/titiler/blob/master/docs/endpoints/stac.md TiTiler was first designed to work with single COG by passing the file URL to the tiler. e.g : https://myendpoint/cog/tiles/1/2/3?url=https://somewhere.com/mycog.tif With STAC is a bit different because we first have to read the STAC items and then know which assets to read. Example of STAC Item { \"type\": \"Feature\", \"id\": \"S2A_34SGA_20200318_0_L2A\", \"geometry\": {...}, \"properties\": { \"datetime\": \"2020-03-18T09:11:33Z\", ... }, \"collection\": \"sentinel-s2-l2a-cogs\", \"assets\": { \"thumbnail\": { \"title\": \"Thumbnail\", \"type\": \"image/png\", \"href\": \"https://myurl.com/preview.jpg\" }, ... \"B03\": { \"title\": \"Band 3 (green)\", \"type\": \"image/tiff; application=geotiff; profile=cloud-optimized\", \"href\": \"https://myurl.com/B03.tif\", \"proj:shape\": [ 10980, 10980 ], \"proj:transform\": [ 10, 0, 699960, 0, -10, 3600000, 0,-* 0, 1 ] }, ... }, \"links\": [...] } To be able to create Web Map tile from the B03 asset you'll need to pass the STAC Item url and the asset name: https://myendpoint/stac/tiles/1/2/3?url=https://somewhere.com/item.json&assets=B03","title":"TiTiler: STAC + COG"},{"location":"examples/Working_with_STAC/#requirements","text":"To be able to run this notebook you'll need the following requirements: rasterio ipyleaflet requests tqdm !pip install rasterio ipyleaflet requests tqdm In [1]: import os import json import base64 import requests import datetime import itertools import urllib.parse from io import BytesIO from functools import partial from concurrent import futures from tqdm.notebook import tqdm from rasterio.plot import reshape_as_image from rasterio.features import bounds as featureBounds from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: # Endpoint variables titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint stac_endpoint = \"https://earth-search.aws.element84.com/v0/search\"","title":"Requirements"},{"location":"examples/Working_with_STAC/#search-for-stac-items","text":"See https://github.com/radiantearth/stac-api-spec for more documentation about the stac API AOI You can use geojson.io to define your search AOI In [3]: geojson = { \"type\" : \"FeatureCollection\" , \"features\" : [ { \"type\" : \"Feature\" , \"properties\" : {}, \"geometry\" : { \"type\" : \"Polygon\" , \"coordinates\" : [ [ [ 30.810813903808594 , 29.454247067148533 ], [ 30.88600158691406 , 29.454247067148533 ], [ 30.88600158691406 , 29.51879923863822 ], [ 30.810813903808594 , 29.51879923863822 ], [ 30.810813903808594 , 29.454247067148533 ] ] ] } } ] } bounds = featureBounds ( geojson ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 11 ) geo_json = GeoJSON ( data = geojson ) m . add_layer ( geo_json ) m var element = $('#31f949c9-ad1f-4cd9-aaa3-f8ee81e1c85a'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"7325e1bd9a0848508a51c3c48d78299b\"} Define dates and other filters In [4]: start = datetime . datetime . strptime ( \"2019-01-01\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T00:00:00Z\" ) end = datetime . datetime . strptime ( \"2019-12-11\" , \"%Y-%m- %d \" ) . strftime ( \"%Y-%m- %d T23:59:59Z\" ) # POST body query = { \"collections\" : [ \"sentinel-s2-l2a-cogs\" ], \"datetime\" : f \" { start } / { end } \" , \"query\" : { \"eo:cloud_cover\" : { \"lt\" : 5 } }, \"intersects\" : geojson [ \"features\" ][ 0 ][ \"geometry\" ], \"limit\" : 100 , \"fields\" : { 'include' : [ 'id' , 'properties.datetime' , 'properties.eo:cloud_cover' ], # This will limit the size of returned body 'exclude' : [ 'assets' , 'links' ] # This will limit the size of returned body } } # POST Headers headers = { \"Content-Type\" : \"application/json\" , \"Accept-Encoding\" : \"gzip\" , \"Accept\" : \"application/geo+json\" , } data = requests . post ( stac_endpoint , headers = headers , json = query ) . json () print ( \"Results context:\" ) print ( data [ \"context\" ]) print () print ( \"Example of item:\" ) print ( json . dumps ( data [ \"features\" ][ 0 ], indent = 4 )) sceneid = [ f [ \"id\" ] for f in data [ \"features\" ]] cloudcover = [ f [ \"properties\" ][ \"eo:cloud_cover\" ] for f in data [ \"features\" ]] dates = [ f [ \"properties\" ][ \"datetime\" ][ 0 : 10 ] for f in data [ \"features\" ]] Results context: {'page': 1, 'limit': 100, 'matched': 84, 'returned': 84} Example of item: { \"bbox\": [ 30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527 ], \"geometry\": { \"coordinates\": [ [ [ 30.155974613579858, 28.80949327971016 ], [ 30.407037927198104, 29.805008695373978 ], [ 31.031551610920825, 29.815791988006527 ], [ 31.050481437029678, 28.825387639743422 ], [ 30.155974613579858, 28.80949327971016 ] ] ], \"type\": \"Polygon\" }, \"id\": \"S2B_36RTT_20191205_0_L2A\", \"collection\": \"sentinel-s2-l2a-cogs\", \"type\": \"Feature\", \"properties\": { \"datetime\": \"2019-12-05T08:42:04Z\", \"eo:cloud_cover\": 2.75 } } In [5]: m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 8 ) geo_json = GeoJSON ( data = data , style = { 'opacity' : 1 , 'dashArray' : '1' , 'fillOpacity' : 0 , 'weight' : 1 }, ) m . add_layer ( geo_json ) m var element = $('#0b6aa23b-7591-411b-8cd1-c4a9c37fe5fb'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"b39d3b9f21554f02b8d1f50b179dad3f\"} Plot Date / Cloud Cover In [6]: fig = plt . figure ( dpi = 100 ) fig . autofmt_xdate () ax = fig . add_subplot ( 1 , 1 , 1 ) ax . plot ( dates , cloudcover , label = \"Cloud Cover\" , color = \"tab:red\" , linewidth = 0.4 , linestyle = \"-.\" ) ax . legend () Out[6]: <matplotlib.legend.Legend at 0x120997ed0> *{stroke-linecap:butt;stroke-linejoin:round;}","title":"Search for STAC Items"},{"location":"examples/Working_with_STAC/#use-titiler-endpoint","text":"https://api.cogeo.xyz/docs#/SpatioTemporal%20Asset%20Catalog {endpoint}/stac/tiles/{z}/{x}/{y}.{format}?url={stac_item}&{otherquery params} {endpoint}/stac/crop/{minx},{miny},{maxx},{maxy}.{format}?url={stac_item}&{otherquery params} {endpoint}/stac/point/{minx},{miny}?url={stac_item}&{otherquery params} In [7]: url_template = \"https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/ {id} \"","title":"Use Titiler endpoint"},{"location":"examples/Working_with_STAC/#visualize-one-item","text":"In [8]: # Get Tile URL r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : url_template . format ( id = sceneid [ 0 ]), \"assets\" : \"B04,B03,B02\" , # Simple RGB combination (True Color) \"color_formula\" : \"Gamma RGB 3.5 Saturation 1.7 Sigmoidal RGB 15 0.35\" , # We use a rio-color formula to make the tiles look nice \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'S2B_36RTT_20191205_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_36RTT_20191205_0_L2A&assets=B04%2CB03%2CB02&color_formula=Gamma+RGB+3.5+Saturation+1.7+Sigmoidal+RGB+15+0.35'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527], 'center': [30.603228025304766, 29.312642633858346, 8]} var element = $('#e9c79bc9-6486-42f3-8a53-457549b400e5'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"c87a9ca3bcb64dd2a2fae5d7e3890059\"} In [9]: r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : url_template . format ( id = sceneid [ 0 ]), \"assets\" : \"B08,B04,B03\" , # False Color Infrared \"color_formula\" : \"Gamma RGB 3.5 Saturation 1.7 Sigmoidal RGB 15 0.35\" , \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'S2B_36RTT_20191205_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_36RTT_20191205_0_L2A&assets=B08%2CB04%2CB03&color_formula=Gamma+RGB+3.5+Saturation+1.7+Sigmoidal+RGB+15+0.35'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527], 'center': [30.603228025304766, 29.312642633858346, 8]} var element = $('#7134783d-429c-4dec-a81a-115db8183218'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"ebb43c8fd90646b59b49a254913c4d8d\"} In [10]: r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : url_template . format ( id = sceneid [ 0 ]), \"expression\" : \"(B08-B04)/(B08+B04)\" , # NDVI \"rescale\" : \"-1,1\" , \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 \"color_map\" : \"viridis\" , } ) . json () print ( r ) m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m {'tilejson': '2.2.0', 'name': 'S2B_36RTT_20191205_0_L2A', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/stac/tiles/WebMercatorQuad/{z}/{x}/{y}@1x?url=https%3A%2F%2Fearth-search.aws.element84.com%2Fv0%2Fcollections%2Fsentinel-s2-l2a-cogs%2Fitems%2FS2B_36RTT_20191205_0_L2A&expression=%28B08-B04%29%2F%28B08%2BB04%29&rescale=-1%2C1&color_map=viridis'], 'minzoom': 8, 'maxzoom': 14, 'bounds': [30.155974613579858, 28.80949327971016, 31.050481437029678, 29.815791988006527], 'center': [30.603228025304766, 29.312642633858346, 8]} var element = $('#ed2fba7d-cb5f-4351-956f-63940bc63ac8'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"971ff4c3342c44aa877155c66280c18c\"}","title":"Visualize One Item"},{"location":"examples/Working_with_STAC/#more","text":"titiler doesn't return only png or jpeg but can also return Numpy array directly In [11]: def fetch_bbox_array ( sceneid , bbox , assets = None , expression = None , ** kwargs ): \"\"\"Helper function to fetch and decode Numpy array using Titiler endpoint.\"\"\" # STAC ITEM URL stac_item = f \"https://earth-search.aws.element84.com/v0/collections/sentinel-s2-l2a-cogs/items/ { sceneid } \" xmin , ymin , xmax , ymax = bbox # TiTiler required URL + asset or expression parameters params = { \"url\" : stac_item } if assets : params . update ( dict ( assets = \",\" . join ( assets ))) elif expression : params . update ( dict ( expression = expression )) else : raise Exception ( \"Missing band or expression input\" ) params . update ( ** kwargs ) # TITILER ENDPOINT url = f \" { titiler_endpoint } stac/crop/ { xmin } , { ymin } , { xmax } , { ymax } .npy\" r = requests . get ( url , params = params ) data , mask = numpy . load ( BytesIO ( r . content ), allow_pickle = True ) return sceneid , data , mask def _filter_futures ( tasks ): for future in tasks : try : yield future . result () except Exception : pass def _stats ( data , mask ): arr = numpy . ma . array ( data ) arr . mask = mask == 0 return arr . min () . item (), arr . max () . item (), arr . mean () . item (), arr . std () . item () In [13]: # Fetch one data _ , data , mask = fetch_bbox_array ( sceneid [ 0 ], bounds , assets = [ \"B02\" ], width = 128 , height = 128 ) print ( data . shape ) print ( mask . shape ) imshow ( data [ 0 ]) (1, 128, 128) (128, 128) Out[13]: <matplotlib.image.AxesImage at 0x1237baa10> *{stroke-linecap:butt;stroke-linejoin:round;} In [14]: # Let's fetch the data over our AOI for all our Items # Here we use `futures.ThreadPoolExecutor` to run the requests in parallel # Note: it takes more time for the notebook to display the results than to fetch the data bbox_worker = partial ( fetch_bbox_array , bbox = bounds , assets = ( \"B04\" , \"B03\" , \"B02\" ), color_formula = \"gamma RGB 3.5, saturation 1.7, sigmoidal RGB 15 0.35\" , width = 64 , height = 64 , ) with futures . ThreadPoolExecutor ( max_workers = 10 ) as executor : future_work = [ executor . submit ( bbox_worker , scene ) for scene in sceneid ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass results_rgb = list ( _filter_futures ( future_work )) print ( \"diplay all results\" ) fig = plt . figure ( figsize = ( 10 , 20 )) col = 5 row = math . ceil ( len ( dates ) / col ) for i in range ( 1 , len ( results_rgb ) + 1 ): fig . add_subplot ( row , col , i ) plt . imshow ( reshape_as_image ( results_rgb [ i - 1 ][ 1 ])) var element = $('#0accb7fc-2fd3-44db-9957-738e3378a03a'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"7ea6e8d3349243688f28f70d6016091d\"} diplay all results *{stroke-linecap:butt;stroke-linejoin:round;} In [15]: ## Fetch NDVI bbox_worker = partial ( fetch_bbox_array , bbox = bounds , expression = \"(B08-B04)/(B08+B04)\" , width = 64 , height = 64 , ) with futures . ThreadPoolExecutor ( max_workers = 10 ) as executor : future_work = [ executor . submit ( bbox_worker , scene ) for scene in sceneid ] for f in tqdm ( futures . as_completed ( future_work ), total = len ( future_work )): pass results_ndvi = list ( _filter_futures ( future_work )) fig = plt . figure ( figsize = ( 10 , 20 )) col = 5 row = math . ceil ( len ( dates ) / col ) for i in range ( 1 , len ( results_rgb ) + 1 ): fig . add_subplot ( row , col , i ) plt . imshow ( results_ndvi [ i - 1 ][ 1 ][ 0 ]) var element = $('#9af64a90-66e1-402f-acf5-c90dff277820'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"7dfa7548360a4092a8703ccb1e142b5a\"} *{stroke-linecap:butt;stroke-linejoin:round;} In [16]: stats = [ _stats ( data , mask ) for _ , data , mask in results_ndvi ] fig , ax1 = plt . subplots ( dpi = 150 ) fig . autofmt_xdate () ax1 . plot ( dates , [ s [ 0 ] for s in stats ], label = \"Min\" ) ax1 . plot ( dates , [ s [ 1 ] for s in stats ], label = \"Max\" ) ax1 . plot ( dates , [ s [ 2 ] for s in stats ], label = \"Mean\" ) ax1 . set_xlabel ( \"Dates\" ) ax1 . set_ylabel ( \"Normalized Difference Vegetation Index\" ) ax1 . legend () Out[16]: <matplotlib.legend.Legend at 0x123da7650> *{stroke-linecap:butt;stroke-linejoin:round;} In [ ]:","title":"More"},{"location":"examples/Working_with_STAC_simple/","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } pre { line-height: 125%; margin: 0; } td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } .highlight-ipynb .hll { background-color: #ffffcc } .highlight-ipynb { background: #f8f8f8; } .highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */ .highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */ .highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: #666666 } /* Operator */ .highlight-ipynb .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight-ipynb .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */ .highlight-ipynb .ge { font-style: italic } /* Generic.Emph */ .highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */ .highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */ .highlight-ipynb .go { color: #888888 } /* Generic.Output */ .highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */ .highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */ .highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */ .highlight-ipynb .m { color: #666666 } /* Literal.Number */ .highlight-ipynb .s { color: #BA2121 } /* Literal.String */ .highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */ .highlight-ipynb .nb { color: #008000 } /* Name.Builtin */ .highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight-ipynb .no { color: #880000 } /* Name.Constant */ .highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */ .highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight-ipynb .nf { color: #0000FF } /* Name.Function */ .highlight-ipynb .nl { color: #A0A000 } /* Name.Label */ .highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight-ipynb .nv { color: #19177C } /* Name.Variable */ .highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */ .highlight-ipynb .mb { color: #666666 } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */ .highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */ .highlight-ipynb .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */ .highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */ .highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight-ipynb .fm { color: #0000FF } /* Name.Function.Magic */ .highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */ .highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */ .highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */ .highlight-ipynb .vm { color: #19177C } /* Name.Variable.Magic */ .highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */ .rendered_html a{text-decoration:inherit !important}.rendered_html :link{text-decoration:inherit !important}.rendered_html :visited{text-decoration:inherit !important}pre code{background-color:inherit !important}.highlight{color:#000000}.highlight code{color:#000000}.highlight .n{color:#333333}.highlight .p{color:#000000}.text_cell .prompt{display:none !important}div.input_prompt{padding:0.2em 0.4em}div.output_prompt{padding:0.4em}.text_cell{margin:0 !important;padding:0 !important;border:none !important}.text_cell_render{margin:0 !important;padding:0 !important;border:none !important}.rendered_html *+p{margin-top:inherit !important}.anchor-link{display:none !important}.code_cell{margin:0 !important;padding:5px 0 !important;border:none !important}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;box-pack:end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-flex}.celltoolbar .tags_button_container{display:-webkit-box;display:-ms-flexbox;display:flex}.celltoolbar .tags_button_container .tag-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;-webkit-box-shadow:none;box-shadow:none;width:inherit;font-size:13px;font-family:\"Helvetica Neue\", Helvetica, Arial, sans-serif;height:22px;line-height:22px;display:inline-block}div.input_area>div.highlight{margin:0.25em 0.4em !important}.code_cell pre{font-size:12px !important}.output_html table.dataframe{font-family:Arial, sans-serif;font-size:13px;line-height:20px}.output_html table.dataframe th,td{padding:4px;text-align:left}.bk-plot-wrapper tbody tr{background:none !important}.bk-plot-wrapper tbody tr:hover{background:none !important} /*# sourceMappingURL=jupyter-fixes.min.css.map */ MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Working With STAC \u00b6 STAC: SpatioTemporal Asset Catalog \u00b6 The SpatioTemporal Asset Catalog (STAC) specification aims to standardize the way geospatial assets are exposed online and queried. A 'spatiotemporal asset' is any file that represents information about the earth captured in a certain space and time. The initial focus is primarily remotely-sensed imagery (from satellites, but also planes, drones, balloons, etc), but the core is designed to be extensible to SAR, full motion video, point clouds, hyperspectral, LiDAR and derived data like NDVI, Digital Elevation Models, mosaics, etc. Ref: https://github.com/radiantearth/stac-spechttps://github.com/radiantearth/stac-spec Using STAC makes data indexation and discovery really easy. In addition to the Collection/Item/Asset (data) specifications, data providers are also encouraged to follow a STAC API specification: https://github.com/radiantearth/stac-api-spec The API is compliant with the OGC API - Features standard (formerly known as OGC Web Feature Service 3), in that it defines many of the endpoints that STAC uses. A STAC API should be compatible and usable with any OGC API - Features clients. The STAC API can be thought of as a specialized Features API to search STAC Catalogs, where the features returned are STAC Items, that have common properties, links to their assets and geometries that represent the footprints of the geospatial assets. Requirements \u00b6 To be able to run this notebook you'll need the following requirements: ipyleaflet requests rasterio !pip install ipyleaflet requests rasterio In [1]: import requests from rasterio.features import bounds as featureBounds from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint stac_item = \"https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json\" In [3]: item = requests . get ( stac_item ) . json () print ( item ) {'type': 'Feature', 'stac_version': '0.8.1', 'id': 'S5_11055_6057_20070622', 'properties': {'eo:gsd': 20, 'eo:bands': [{'name': 'Panchromatic', 'common_name': 'panchromatic', 'description': 'Panchromatic: 480-710 nm'}, {'name': 'Green', 'common_name': 'green', 'description': 'Green: 500-590 nm'}, {'name': 'Red', 'common_name': 'red', 'description': 'Red: 610-680 nm'}, {'name': 'Near Infrared', 'common_name': 'nir', 'description': 'Near Infrared: 780-890 nm'}, {'name': 'ShortWave Infrared', 'common_name': 'swir', 'description': 'ShortWave Infrared: 1580-1750 nm'}], 'proj:epsg': 3979, 'datetime': '2007-06-22T00:00:00Z'}, 'geometry': {'type': 'Polygon', 'coordinates': [[[-111.6453245, 60.81065789999892], [-111.2296762, 61.30928879999903], [-110.1583693, 61.093875199999], [-110.5877877, 60.59892389999882], [-111.6453245, 60.81065789999892]]]}, 'bbox': [-111.6453245, 60.59892389999882, -110.1583693, 61.30928879999903], 'links': [{'rel': 'collection', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/collection.json', 'type': 'application/json'}, {'rel': 'self', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json', 'type': 'application/json'}, {'rel': 'root', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/catalog.json', 'type': 'application/json'}, {'rel': 'parent', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/catalog.json', 'type': 'application/json'}], 'assets': {'pan': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_p10_1_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'pan'}, 'B1': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_1_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B1'}, 'B2': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_2_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B2'}, 'thumbnail': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_tn.jpg', 'type': 'image/jpeg', 'title': 'thumbnail'}, 'B3': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_3_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B3'}, 'B4': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_4_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B4'}}, 'collection': 'canada_spot5_orthoimages'} In [4]: print ( list ( item [ \"assets\" ])) for it , asset in item [ \"assets\" ] . items (): print ( asset [ \"type\" ]) ['pan', 'B1', 'B2', 'thumbnail', 'B3', 'B4'] image/tiff; application=geotiff; profile=cloud-optimized image/tiff; application=geotiff; profile=cloud-optimized image/tiff; application=geotiff; profile=cloud-optimized image/jpeg image/tiff; application=geotiff; profile=cloud-optimized image/tiff; application=geotiff; profile=cloud-optimized In [5]: bounds = featureBounds ( item ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 8 ) geo_json = GeoJSON ( data = item ) m . add_layer ( geo_json ) m var element = $('#ade30f52-b997-4223-80cf-24e92978a57b'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"da18375998e14dba895126755f4a1c67\"} In [6]: # Get Tile URL r = requests . get ( f \" { titiler_endpoint } /stac/info\" , params = { \"url\" : stac_item , } ) . json () print ( r ) ['pan', 'B1', 'B2', 'B3', 'B4'] Display one asset \u00b6 In [7]: r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : stac_item , \"assets\" : \"pan\" , \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#45108906-08ee-4907-b0a7-a5ffe3834dde'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"38d5e41e4d67476dbf1da4ad2f58a648\"} Merge Assets \u00b6 In [8]: # Get Tile URL r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : stac_item , \"assets\" : \"B3,B2,B1\" , # Simple RGB combination \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#68690b39-d197-4914-a457-468ba2fe92c9'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"0201ed911c3341aca94dd8f5036fd726\"}","title":"STAC"},{"location":"examples/Working_with_STAC_simple/#working-with-stac","text":"","title":"Working With STAC"},{"location":"examples/Working_with_STAC_simple/#stac-spatiotemporal-asset-catalog","text":"The SpatioTemporal Asset Catalog (STAC) specification aims to standardize the way geospatial assets are exposed online and queried. A 'spatiotemporal asset' is any file that represents information about the earth captured in a certain space and time. The initial focus is primarily remotely-sensed imagery (from satellites, but also planes, drones, balloons, etc), but the core is designed to be extensible to SAR, full motion video, point clouds, hyperspectral, LiDAR and derived data like NDVI, Digital Elevation Models, mosaics, etc. Ref: https://github.com/radiantearth/stac-spechttps://github.com/radiantearth/stac-spec Using STAC makes data indexation and discovery really easy. In addition to the Collection/Item/Asset (data) specifications, data providers are also encouraged to follow a STAC API specification: https://github.com/radiantearth/stac-api-spec The API is compliant with the OGC API - Features standard (formerly known as OGC Web Feature Service 3), in that it defines many of the endpoints that STAC uses. A STAC API should be compatible and usable with any OGC API - Features clients. The STAC API can be thought of as a specialized Features API to search STAC Catalogs, where the features returned are STAC Items, that have common properties, links to their assets and geometries that represent the footprints of the geospatial assets.","title":"STAC: SpatioTemporal Asset Catalog"},{"location":"examples/Working_with_STAC_simple/#requirements","text":"To be able to run this notebook you'll need the following requirements: ipyleaflet requests rasterio !pip install ipyleaflet requests rasterio In [1]: import requests from rasterio.features import bounds as featureBounds from ipyleaflet import Map , basemaps , TileLayer , basemap_to_tiles , GeoJSON % pylab inline Populating the interactive namespace from numpy and matplotlib In [2]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint stac_item = \"https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json\" In [3]: item = requests . get ( stac_item ) . json () print ( item ) {'type': 'Feature', 'stac_version': '0.8.1', 'id': 'S5_11055_6057_20070622', 'properties': {'eo:gsd': 20, 'eo:bands': [{'name': 'Panchromatic', 'common_name': 'panchromatic', 'description': 'Panchromatic: 480-710 nm'}, {'name': 'Green', 'common_name': 'green', 'description': 'Green: 500-590 nm'}, {'name': 'Red', 'common_name': 'red', 'description': 'Red: 610-680 nm'}, {'name': 'Near Infrared', 'common_name': 'nir', 'description': 'Near Infrared: 780-890 nm'}, {'name': 'ShortWave Infrared', 'common_name': 'swir', 'description': 'ShortWave Infrared: 1580-1750 nm'}], 'proj:epsg': 3979, 'datetime': '2007-06-22T00:00:00Z'}, 'geometry': {'type': 'Polygon', 'coordinates': [[[-111.6453245, 60.81065789999892], [-111.2296762, 61.30928879999903], [-110.1583693, 61.093875199999], [-110.5877877, 60.59892389999882], [-111.6453245, 60.81065789999892]]]}, 'bbox': [-111.6453245, 60.59892389999882, -110.1583693, 61.30928879999903], 'links': [{'rel': 'collection', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/collection.json', 'type': 'application/json'}, {'rel': 'self', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json', 'type': 'application/json'}, {'rel': 'root', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/catalog.json', 'type': 'application/json'}, {'rel': 'parent', 'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/catalog.json', 'type': 'application/json'}], 'assets': {'pan': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_p10_1_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'pan'}, 'B1': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_1_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B1'}, 'B2': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_2_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B2'}, 'thumbnail': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_tn.jpg', 'type': 'image/jpeg', 'title': 'thumbnail'}, 'B3': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_3_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B3'}, 'B4': {'href': 'https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/s5_11055_6057_20070622_m20_4_lcc00_cog.tif', 'type': 'image/tiff; application=geotiff; profile=cloud-optimized', 'title': 'B4'}}, 'collection': 'canada_spot5_orthoimages'} In [4]: print ( list ( item [ \"assets\" ])) for it , asset in item [ \"assets\" ] . items (): print ( asset [ \"type\" ]) ['pan', 'B1', 'B2', 'thumbnail', 'B3', 'B4'] image/tiff; application=geotiff; profile=cloud-optimized image/tiff; application=geotiff; profile=cloud-optimized image/tiff; application=geotiff; profile=cloud-optimized image/jpeg image/tiff; application=geotiff; profile=cloud-optimized image/tiff; application=geotiff; profile=cloud-optimized In [5]: bounds = featureBounds ( item ) m = Map ( basemap = basemaps . OpenStreetMap . Mapnik , center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 8 ) geo_json = GeoJSON ( data = item ) m . add_layer ( geo_json ) m var element = $('#ade30f52-b997-4223-80cf-24e92978a57b'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"da18375998e14dba895126755f4a1c67\"} In [6]: # Get Tile URL r = requests . get ( f \" { titiler_endpoint } /stac/info\" , params = { \"url\" : stac_item , } ) . json () print ( r ) ['pan', 'B1', 'B2', 'B3', 'B4']","title":"Requirements"},{"location":"examples/Working_with_STAC_simple/#display-one-asset","text":"In [7]: r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : stac_item , \"assets\" : \"pan\" , \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#45108906-08ee-4907-b0a7-a5ffe3834dde'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"38d5e41e4d67476dbf1da4ad2f58a648\"}","title":"Display one asset"},{"location":"examples/Working_with_STAC_simple/#merge-assets","text":"In [8]: # Get Tile URL r = requests . get ( f \" { titiler_endpoint } /stac/tilejson.json\" , params = { \"url\" : stac_item , \"assets\" : \"B3,B2,B1\" , # Simple RGB combination \"minzoom\" : 8 , # By default titiler will use 0 \"maxzoom\" : 14 , # By default titiler will use 24 } ) . json () m = Map ( center = (( bounds [ 1 ] + bounds [ 3 ]) / 2 ,( bounds [ 0 ] + bounds [ 2 ]) / 2 ), zoom = 10 ) tiles = TileLayer ( url = r [ \"tiles\" ][ 0 ], min_zoom = r [ \"minzoom\" ], max_zoom = r [ \"maxzoom\" ], opacity = 1 ) m . add_layer ( tiles ) m var element = $('#68690b39-d197-4914-a457-468ba2fe92c9'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"0201ed911c3341aca94dd8f5036fd726\"}","title":"Merge Assets"},{"location":"examples/Working_with_nonWebMercatorTMS/","text":"/*! * * IPython notebook * */ /* CSS font colors for translated ANSI escape sequences */ /* The color values are a mix of http://www.xcolors.net/dl/baskerville-ivorylight and http://www.xcolors.net/dl/euphrasia */ .ansi-black-fg { color: #3E424D; } .ansi-black-bg { background-color: #3E424D; } .ansi-black-intense-fg { color: #282C36; } .ansi-black-intense-bg { background-color: #282C36; } .ansi-red-fg { color: #E75C58; } .ansi-red-bg { background-color: #E75C58; } .ansi-red-intense-fg { color: #B22B31; } .ansi-red-intense-bg { background-color: #B22B31; } .ansi-green-fg { color: #00A250; } .ansi-green-bg { background-color: #00A250; } .ansi-green-intense-fg { color: #007427; } .ansi-green-intense-bg { background-color: #007427; } .ansi-yellow-fg { color: #DDB62B; } .ansi-yellow-bg { background-color: #DDB62B; } .ansi-yellow-intense-fg { color: #B27D12; } .ansi-yellow-intense-bg { background-color: #B27D12; } .ansi-blue-fg { color: #208FFB; } .ansi-blue-bg { background-color: #208FFB; } .ansi-blue-intense-fg { color: #0065CA; } .ansi-blue-intense-bg { background-color: #0065CA; } .ansi-magenta-fg { color: #D160C4; } .ansi-magenta-bg { background-color: #D160C4; } .ansi-magenta-intense-fg { color: #A03196; } .ansi-magenta-intense-bg { background-color: #A03196; } .ansi-cyan-fg { color: #60C6C8; } .ansi-cyan-bg { background-color: #60C6C8; } .ansi-cyan-intense-fg { color: #258F8F; } .ansi-cyan-intense-bg { background-color: #258F8F; } .ansi-white-fg { color: #C5C1B4; } .ansi-white-bg { background-color: #C5C1B4; } .ansi-white-intense-fg { color: #A1A6B2; } .ansi-white-intense-bg { background-color: #A1A6B2; } .ansi-default-inverse-fg { color: #FFFFFF; } .ansi-default-inverse-bg { background-color: #000000; } .ansi-bold { font-weight: bold; } .ansi-underline { text-decoration: underline; } /* The following styles are deprecated an will be removed in a future version */ .ansibold { font-weight: bold; } .ansi-inverse { outline: 0.5px dotted; } /* use dark versions for foreground, to improve visibility */ .ansiblack { color: black; } .ansired { color: darkred; } .ansigreen { color: darkgreen; } .ansiyellow { color: #c4a000; } .ansiblue { color: darkblue; } .ansipurple { color: darkviolet; } .ansicyan { color: steelblue; } .ansigray { color: gray; } /* and light for background, for the same reason */ .ansibgblack { background-color: black; } .ansibgred { background-color: red; } .ansibggreen { background-color: green; } .ansibgyellow { background-color: yellow; } .ansibgblue { background-color: blue; } .ansibgpurple { background-color: magenta; } .ansibgcyan { background-color: cyan; } .ansibggray { background-color: gray; } div.cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; border-radius: 2px; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; border-width: 1px; border-style: solid; border-color: transparent; width: 100%; padding: 5px; /* This acts as a spacer between cells, that is outside the border */ margin: 0px; outline: none; position: relative; overflow: visible; } div.cell:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: transparent; } div.cell.jupyter-soft-selected { border-left-color: #E3F2FD; border-left-width: 1px; padding-left: 5px; border-right-color: #E3F2FD; border-right-width: 1px; background: #E3F2FD; } @media print { div.cell.jupyter-soft-selected { border-color: transparent; } } div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: #ababab; } div.cell.selected:before, div.cell.selected.jupyter-soft-selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #42A5F5; } @media print { div.cell.selected, div.cell.selected.jupyter-soft-selected { border-color: transparent; } } .edit_mode div.cell.selected { border-color: #66BB6A; } .edit_mode div.cell.selected:before { position: absolute; display: block; top: -1px; left: -1px; width: 5px; height: calc(100% + 2px); content: ''; background: #66BB6A; } @media print { .edit_mode div.cell.selected { border-color: transparent; } } .prompt { /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */ min-width: 14ex; /* This padding is tuned to match the padding on the CodeMirror editor. */ padding: 0.4em; margin: 0px; font-family: monospace; text-align: right; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; /* Don't highlight prompt number selection */ -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; /* Use default cursor */ cursor: default; } @media (max-width: 540px) { .prompt { text-align: left; } } div.inner_cell { min-width: 0; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_area { border: 1px solid #cfcfcf; border-radius: 2px; background: #f7f7f7; line-height: 1.21429em; } /* This is needed so that empty prompt areas can collapse to zero height when there is no content in the output_subarea and the prompt. The main purpose of this is to make sure that empty JavaScript output_subareas have no height. */ div.prompt:empty { padding-top: 0; padding-bottom: 0; } div.unrecognized_cell { padding: 5px 5px 5px 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.unrecognized_cell .inner_cell { border-radius: 2px; padding: 5px; font-weight: bold; color: red; border: 1px solid #cfcfcf; background: #eaeaea; } div.unrecognized_cell .inner_cell a { color: inherit; text-decoration: none; } div.unrecognized_cell .inner_cell a:hover { color: inherit; text-decoration: none; } @media (max-width: 540px) { div.unrecognized_cell > div.prompt { display: none; } } div.code_cell { /* avoid page breaking on code cells when printing */ } @media print { div.code_cell { page-break-inside: avoid; } } /* any special styling for code cells that are currently running goes here */ div.input { page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.input { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } /* input_area and input_prompt must match in top border and margin for alignment */ div.input_prompt { color: #303F9F; border-top: 1px solid transparent; } div.input_area > div.highlight { margin: 0.4em; border: none; padding: 0px; background-color: transparent; } div.input_area > div.highlight > pre { margin: 0px; border: none; padding: 0px; background-color: transparent; } /* The following gets added to the <head> if it is detected that the user has a * monospace font with inconsistent normal/bold/italic height. See * notebookmain.js. Such fonts will have keywords vertically offset with * respect to the rest of the text. The user should select a better font. * See: https://github.com/ipython/ipython/issues/1503 * * .CodeMirror span { * vertical-align: bottom; * } */ .CodeMirror { line-height: 1.21429em; /* Changed from 1em to our global default */ font-size: 14px; height: auto; /* Changed to auto to autogrow */ background: none; /* Changed from white to allow our bg to show through */ } .CodeMirror-scroll { /* The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/ /* We have found that if it is visible, vertical scrollbars appear with font size changes.*/ overflow-y: hidden; overflow-x: auto; } .CodeMirror-lines { /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */ /* we have set a different line-height and want this to scale with that. */ /* Note that this should set vertical padding only, since CodeMirror assumes that horizontal padding will be set on CodeMirror pre */ padding: 0.4em 0; } .CodeMirror-linenumber { padding: 0 8px 0 4px; } .CodeMirror-gutters { border-bottom-left-radius: 2px; border-top-left-radius: 2px; } .CodeMirror pre { /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only, use .CodeMirror-lines for vertical */ padding: 0 0.4em; border: 0; border-radius: 0; } .CodeMirror-cursor { border-left: 1.4px solid black; } @media screen and (min-width: 2138px) and (max-width: 4319px) { .CodeMirror-cursor { border-left: 2px solid black; } } @media screen and (min-width: 4320px) { .CodeMirror-cursor { border-left: 4px solid black; } } /* Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org> Adapted from GitHub theme */ .highlight-base { color: #000; } .highlight-variable { color: #000; } .highlight-variable-2 { color: #1a1a1a; } .highlight-variable-3 { color: #333333; } .highlight-string { color: #BA2121; } .highlight-comment { color: #408080; font-style: italic; } .highlight-number { color: #080; } .highlight-atom { color: #88F; } .highlight-keyword { color: #008000; font-weight: bold; } .highlight-builtin { color: #008000; } .highlight-error { color: #f00; } .highlight-operator { color: #AA22FF; font-weight: bold; } .highlight-meta { color: #AA22FF; } /* previously not defined, copying from default codemirror */ .highlight-def { color: #00f; } .highlight-string-2 { color: #f50; } .highlight-qualifier { color: #555; } .highlight-bracket { color: #997; } .highlight-tag { color: #170; } .highlight-attribute { color: #00c; } .highlight-header { color: blue; } .highlight-quote { color: #090; } .highlight-link { color: #00c; } /* apply the same style to codemirror */ .cm-s-ipython span.cm-keyword { color: #008000; font-weight: bold; } .cm-s-ipython span.cm-atom { color: #88F; } .cm-s-ipython span.cm-number { color: #080; } .cm-s-ipython span.cm-def { color: #00f; } .cm-s-ipython span.cm-variable { color: #000; } .cm-s-ipython span.cm-operator { color: #AA22FF; font-weight: bold; } .cm-s-ipython span.cm-variable-2 { color: #1a1a1a; } .cm-s-ipython span.cm-variable-3 { color: #333333; } .cm-s-ipython span.cm-comment { color: #408080; font-style: italic; } .cm-s-ipython span.cm-string { color: #BA2121; } .cm-s-ipython span.cm-string-2 { color: #f50; } .cm-s-ipython span.cm-meta { color: #AA22FF; } .cm-s-ipython span.cm-qualifier { color: #555; } .cm-s-ipython span.cm-builtin { color: #008000; } .cm-s-ipython span.cm-bracket { color: #997; } .cm-s-ipython span.cm-tag { color: #170; } .cm-s-ipython span.cm-attribute { color: #00c; } .cm-s-ipython span.cm-header { color: blue; } .cm-s-ipython span.cm-quote { color: #090; } .cm-s-ipython span.cm-link { color: #00c; } .cm-s-ipython span.cm-error { color: #f00; } .cm-s-ipython span.cm-tab { background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=); background-position: right; background-repeat: no-repeat; } div.output_wrapper { /* this position must be relative to enable descendents to be absolute within it */ position: relative; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; z-index: 1; } /* class for the output area when it should be height-limited */ div.output_scroll { /* ideally, this would be max-height, but FF barfs all over that */ height: 24em; /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */ width: 100%; overflow: auto; border-radius: 2px; -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8); display: block; } /* output div while it is collapsed */ div.output_collapsed { margin: 0px; padding: 0px; /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } div.out_prompt_overlay { height: 100%; padding: 0px 0.4em; position: absolute; border-radius: 2px; } div.out_prompt_overlay:hover { /* use inner shadow to get border that is computed the same on WebKit/FF */ -webkit-box-shadow: inset 0 0 1px #000; box-shadow: inset 0 0 1px #000; background: rgba(240, 240, 240, 0.5); } div.output_prompt { color: #D84315; } /* This class is the outer container of all output sections. */ div.output_area { padding: 0px; page-break-inside: avoid; /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } div.output_area .MathJax_Display { text-align: left !important; } div.output_area div.output_area div.output_area img, div.output_area svg { max-width: 100%; height: auto; } div.output_area img.unconfined, div.output_area svg.unconfined { max-width: none; } div.output_area .mglyph > img { max-width: none; } /* This is needed to protect the pre formating from global settings such as that of bootstrap */ .output { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } @media (max-width: 540px) { div.output_area { /* Old browsers */ display: -webkit-box; -webkit-box-orient: vertical; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: vertical; -moz-box-align: stretch; display: box; box-orient: vertical; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: column; align-items: stretch; } } div.output_area pre { margin: 0; padding: 1px 0 1px 0; border: 0; vertical-align: baseline; color: black; background-color: transparent; border-radius: 0; } /* This class is for the output subarea inside the output_area and after the prompt div. */ div.output_subarea { overflow-x: auto; padding: 0.4em; /* Old browsers */ -webkit-box-flex: 1; -moz-box-flex: 1; box-flex: 1; /* Modern browsers */ flex: 1; max-width: calc(100% - 14ex); } div.output_scroll div.output_subarea { overflow-x: visible; } /* The rest of the output_* classes are for special styling of the different output types */ /* all text output has this class: */ div.output_text { text-align: left; color: #000; /* This has to match that of the the CodeMirror class line-height below */ line-height: 1.21429em; } /* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */ div.output_stderr { background: #fdd; /* very light red background for stderr */ } div.output_latex { text-align: left; } /* Empty output_javascript divs should have no height */ div.output_javascript:empty { padding: 0; } .js-error { color: darkred; } /* raw_input styles */ div.raw_input_container { line-height: 1.21429em; padding-top: 5px; } pre.raw_input_prompt { /* nothing needed here. */ } input.raw_input { font-family: monospace; font-size: inherit; color: inherit; width: auto; /* make sure input baseline aligns with prompt */ vertical-align: baseline; /* padding + margin = 0.5em between prompt and cursor */ padding: 0em 0.25em; margin: 0em 0.25em; } input.raw_input:focus { box-shadow: none; } p.p-space { margin-bottom: 10px; } div.output_unrecognized { padding: 5px; font-weight: bold; color: red; } div.output_unrecognized a { color: inherit; text-decoration: none; } div.output_unrecognized a:hover { color: inherit; text-decoration: none; } .rendered_html { color: #000; /* any extras will just be numbers: */ } .rendered_html :link { text-decoration: underline; } .rendered_html :visited { text-decoration: underline; } .rendered_html h1:first-child { margin-top: 0.538em; } .rendered_html h2:first-child { margin-top: 0.636em; } .rendered_html h3:first-child { margin-top: 0.777em; } .rendered_html h4:first-child { margin-top: 1em; } .rendered_html h5:first-child { margin-top: 1em; } .rendered_html h6:first-child { margin-top: 1em; } .rendered_html ul:not(.list-inline), .rendered_html ol:not(.list-inline) { padding-left: 2em; } .rendered_html * + ul { margin-top: 1em; } .rendered_html * + ol { margin-top: 1em; } .rendered_html pre, .rendered_html tr, .rendered_html th, .rendered_html tbody tr:nth-child(odd) { background: #f5f5f5; } .rendered_html tbody tr:hover { background: rgba(66, 165, 245, 0.2); } .rendered_html * + table { margin-top: 1em; } .rendered_html * + p { margin-top: 1em; } .rendered_html * + img { margin-top: 1em; } .rendered_html img, .rendered_html img.unconfined, .rendered_html * + .alert { margin-top: 1em; } [dir=\"rtl\"] div.text_cell { /* Old browsers */ display: -webkit-box; -webkit-box-orient: horizontal; -webkit-box-align: stretch; display: -moz-box; -moz-box-orient: horizontal; -moz-box-align: stretch; display: box; box-orient: horizontal; box-align: stretch; /* Modern browsers */ display: flex; flex-direction: row; align-items: stretch; } @media (max-width: 540px) { div.text_cell > div.prompt { display: none; } } div.text_cell_render { /*font-family: \"Helvetica Neue\", Arial, Helvetica, Geneva, sans-serif;*/ outline: none; resize: none; width: inherit; border-style: none; padding: 0.5em 0.5em 0.5em 0.4em; color: #000; box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; } a.anchor-link:link { text-decoration: none; padding: 0px 20px; visibility: hidden; } h1:hover .anchor-link, h2:hover .anchor-link, h3:hover .anchor-link, h4:hover .anchor-link, h5:hover .anchor-link, h6:hover .anchor-link { visibility: visible; } .text_cell.rendered .input_area { display: none; } .text_cell.rendered .text_cell.rendered .rendered_html tr, .text_cell.rendered .rendered_html th, .text_cell.rendered .text_cell.unrendered .text_cell_render { display: none; } .text_cell .dropzone .input_area { border: 2px dashed #bababa; margin: -1px; } .cm-header-1, .cm-header-2, .cm-header-3, .cm-header-4, .cm-header-5, .cm-header-6 { font-weight: bold; font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif; } .cm-header-1 { font-size: 185.7%; } .cm-header-2 { font-size: 157.1%; } .cm-header-3 { font-size: 128.6%; } .cm-header-4 { font-size: 110%; } .cm-header-5 { font-size: 100%; font-style: italic; } .cm-header-6 { font-size: 100%; font-style: italic; } pre { line-height: 125%; margin: 0; } td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; } td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; } .highlight-ipynb .hll { background-color: #ffffcc } .highlight-ipynb { background: #f8f8f8; } .highlight-ipynb .c { color: #408080; font-style: italic } /* Comment */ .highlight-ipynb .err { border: 1px solid #FF0000 } /* Error */ .highlight-ipynb .k { color: #008000; font-weight: bold } /* Keyword */ .highlight-ipynb .o { color: #666666 } /* Operator */ .highlight-ipynb .ch { color: #408080; font-style: italic } /* Comment.Hashbang */ .highlight-ipynb .cm { color: #408080; font-style: italic } /* Comment.Multiline */ .highlight-ipynb .cp { color: #BC7A00 } /* Comment.Preproc */ .highlight-ipynb .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */ .highlight-ipynb .c1 { color: #408080; font-style: italic } /* Comment.Single */ .highlight-ipynb .cs { color: #408080; font-style: italic } /* Comment.Special */ .highlight-ipynb .gd { color: #A00000 } /* Generic.Deleted */ .highlight-ipynb .ge { font-style: italic } /* Generic.Emph */ .highlight-ipynb .gr { color: #FF0000 } /* Generic.Error */ .highlight-ipynb .gh { color: #000080; font-weight: bold } /* Generic.Heading */ .highlight-ipynb .gi { color: #00A000 } /* Generic.Inserted */ .highlight-ipynb .go { color: #888888 } /* Generic.Output */ .highlight-ipynb .gp { color: #000080; font-weight: bold } /* Generic.Prompt */ .highlight-ipynb .gs { font-weight: bold } /* Generic.Strong */ .highlight-ipynb .gu { color: #800080; font-weight: bold } /* Generic.Subheading */ .highlight-ipynb .gt { color: #0044DD } /* Generic.Traceback */ .highlight-ipynb .kc { color: #008000; font-weight: bold } /* Keyword.Constant */ .highlight-ipynb .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */ .highlight-ipynb .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */ .highlight-ipynb .kp { color: #008000 } /* Keyword.Pseudo */ .highlight-ipynb .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */ .highlight-ipynb .kt { color: #B00040 } /* Keyword.Type */ .highlight-ipynb .m { color: #666666 } /* Literal.Number */ .highlight-ipynb .s { color: #BA2121 } /* Literal.String */ .highlight-ipynb .na { color: #7D9029 } /* Name.Attribute */ .highlight-ipynb .nb { color: #008000 } /* Name.Builtin */ .highlight-ipynb .nc { color: #0000FF; font-weight: bold } /* Name.Class */ .highlight-ipynb .no { color: #880000 } /* Name.Constant */ .highlight-ipynb .nd { color: #AA22FF } /* Name.Decorator */ .highlight-ipynb .ni { color: #999999; font-weight: bold } /* Name.Entity */ .highlight-ipynb .ne { color: #D2413A; font-weight: bold } /* Name.Exception */ .highlight-ipynb .nf { color: #0000FF } /* Name.Function */ .highlight-ipynb .nl { color: #A0A000 } /* Name.Label */ .highlight-ipynb .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */ .highlight-ipynb .nt { color: #008000; font-weight: bold } /* Name.Tag */ .highlight-ipynb .nv { color: #19177C } /* Name.Variable */ .highlight-ipynb .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */ .highlight-ipynb .w { color: #bbbbbb } /* Text.Whitespace */ .highlight-ipynb .mb { color: #666666 } /* Literal.Number.Bin */ .highlight-ipynb .mf { color: #666666 } /* Literal.Number.Float */ .highlight-ipynb .mh { color: #666666 } /* Literal.Number.Hex */ .highlight-ipynb .mi { color: #666666 } /* Literal.Number.Integer */ .highlight-ipynb .mo { color: #666666 } /* Literal.Number.Oct */ .highlight-ipynb .sa { color: #BA2121 } /* Literal.String.Affix */ .highlight-ipynb .sb { color: #BA2121 } /* Literal.String.Backtick */ .highlight-ipynb .sc { color: #BA2121 } /* Literal.String.Char */ .highlight-ipynb .dl { color: #BA2121 } /* Literal.String.Delimiter */ .highlight-ipynb .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */ .highlight-ipynb .s2 { color: #BA2121 } /* Literal.String.Double */ .highlight-ipynb .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */ .highlight-ipynb .sh { color: #BA2121 } /* Literal.String.Heredoc */ .highlight-ipynb .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */ .highlight-ipynb .sx { color: #008000 } /* Literal.String.Other */ .highlight-ipynb .sr { color: #BB6688 } /* Literal.String.Regex */ .highlight-ipynb .s1 { color: #BA2121 } /* Literal.String.Single */ .highlight-ipynb .ss { color: #19177C } /* Literal.String.Symbol */ .highlight-ipynb .bp { color: #008000 } /* Name.Builtin.Pseudo */ .highlight-ipynb .fm { color: #0000FF } /* Name.Function.Magic */ .highlight-ipynb .vc { color: #19177C } /* Name.Variable.Class */ .highlight-ipynb .vg { color: #19177C } /* Name.Variable.Global */ .highlight-ipynb .vi { color: #19177C } /* Name.Variable.Instance */ .highlight-ipynb .vm { color: #19177C } /* Name.Variable.Magic */ .highlight-ipynb .il { color: #666666 } /* Literal.Number.Integer.Long */ .rendered_html a{text-decoration:inherit !important}.rendered_html :link{text-decoration:inherit !important}.rendered_html :visited{text-decoration:inherit !important}pre code{background-color:inherit !important}.highlight{color:#000000}.highlight code{color:#000000}.highlight .n{color:#333333}.highlight .p{color:#000000}.text_cell .prompt{display:none !important}div.input_prompt{padding:0.2em 0.4em}div.output_prompt{padding:0.4em}.text_cell{margin:0 !important;padding:0 !important;border:none !important}.text_cell_render{margin:0 !important;padding:0 !important;border:none !important}.rendered_html *+p{margin-top:inherit !important}.anchor-link{display:none !important}.code_cell{margin:0 !important;padding:5px 0 !important;border:none !important}.celltoolbar{border:thin solid #CFCFCF;border-bottom:none;background:#EEE;border-radius:2px 2px 0px 0px;width:100%;height:29px;padding-right:4px;box-orient:horizontal;box-align:stretch;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;box-pack:end;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;display:-webkit-flex}.celltoolbar .tags_button_container{display:-webkit-box;display:-ms-flexbox;display:flex}.celltoolbar .tags_button_container .tag-container{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1;overflow:hidden;position:relative}.celltoolbar .tags_button_container .tag-container .cell-tag{background-color:#fff;white-space:nowrap;margin:3px 4px;padding:0 4px;border-radius:1px;border:1px solid #ccc;-webkit-box-shadow:none;box-shadow:none;width:inherit;font-size:13px;font-family:\"Helvetica Neue\", Helvetica, Arial, sans-serif;height:22px;line-height:22px;display:inline-block}div.input_area>div.highlight{margin:0.25em 0.4em !important}.code_cell pre{font-size:12px !important}.output_html table.dataframe{font-family:Arial, sans-serif;font-size:13px;line-height:20px}.output_html table.dataframe th,td{padding:4px;text-align:left}.bk-plot-wrapper tbody tr{background:none !important}.bk-plot-wrapper tbody tr:hover{background:none !important} /*# sourceMappingURL=jupyter-fixes.min.css.map */ MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], [\"\\\\(\",\"\\\\)\"] ], displayMath: [ ['$$','$$'], [\"\\\\[\",\"\\\\]\"] ], processEscapes: true, processEnvironments: true }, // Center justify equations in code and markdown cells. Elsewhere // we use CSS to left justify single line equations in code cells. displayAlign: 'center', \"HTML-CSS\": { styles: {'.MathJax_Display': {\"margin\": 0}}, linebreaks: { automatic: true } } }); Working With TileMatrixSets (other than WebMercator) \u00b6 Requirements \u00b6 ipyleaflet requests pip install ipyleaflet requests In [1]: import json import requests from ipyleaflet import ( Map , basemaps , basemap_to_tiles , TileLayer , WMSLayer , GeoJSON , projections ) In [2]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint url = \"https://s3.amazonaws.com/opendata.remotepixel.ca/cogs/natural_earth/world.tif\" In [3]: r = requests . get ( \"https://api.cogeo.xyz/cog/EPSG3413/tilejson.json\" , params = { \"url\" : url , } ) . json () print ( r ) # note that we need to use the same projection for the our layer and the map. m = Map ( center = ( 90 , 0 ), zoom = 0 , basemap = {}, crs = projections . EPSG3413 ) layer = TileLayer ( url = r [ \"tiles\" ][ 0 ], opacity = 1 ) m . add_layer ( layer ) m {'tilejson': '2.2.0', 'name': 'world.tif', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/cog/tiles/EPSG3413/{z}/{x}/{y}@1x?url=https%3A%2F%2Fs3.amazonaws.com%2Fopendata.remotepixel.ca%2Fcogs%2Fnatural_earth%2Fworld.tif'], 'minzoom': 0, 'maxzoom': 0, 'bounds': [-179.8333333333333, -89.8333333333693, 179.8333333334053, 89.83333333333331], 'center': [3.601030584832188e-11, -1.7990942069445737e-11, 0]} var element = $('#6abe7a53-acd9-451c-846d-4947f96f5af5'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"dfe7cd75905f422e81f5e52b639bc6eb\"}","title":"Non-WebMercator TMS"},{"location":"examples/Working_with_nonWebMercatorTMS/#working-with-tilematrixsets-other-than-webmercator","text":"","title":"Working With TileMatrixSets (other than WebMercator)"},{"location":"examples/Working_with_nonWebMercatorTMS/#requirements","text":"ipyleaflet requests pip install ipyleaflet requests In [1]: import json import requests from ipyleaflet import ( Map , basemaps , basemap_to_tiles , TileLayer , WMSLayer , GeoJSON , projections ) In [2]: titiler_endpoint = \"https://api.cogeo.xyz/\" # Devseed temporary endpoint url = \"https://s3.amazonaws.com/opendata.remotepixel.ca/cogs/natural_earth/world.tif\" In [3]: r = requests . get ( \"https://api.cogeo.xyz/cog/EPSG3413/tilejson.json\" , params = { \"url\" : url , } ) . json () print ( r ) # note that we need to use the same projection for the our layer and the map. m = Map ( center = ( 90 , 0 ), zoom = 0 , basemap = {}, crs = projections . EPSG3413 ) layer = TileLayer ( url = r [ \"tiles\" ][ 0 ], opacity = 1 ) m . add_layer ( layer ) m {'tilejson': '2.2.0', 'name': 'world.tif', 'version': '1.0.0', 'scheme': 'xyz', 'tiles': ['https://api.cogeo.xyz/cog/tiles/EPSG3413/{z}/{x}/{y}@1x?url=https%3A%2F%2Fs3.amazonaws.com%2Fopendata.remotepixel.ca%2Fcogs%2Fnatural_earth%2Fworld.tif'], 'minzoom': 0, 'maxzoom': 0, 'bounds': [-179.8333333333333, -89.8333333333693, 179.8333333334053, 89.83333333333331], 'center': [3.601030584832188e-11, -1.7990942069445737e-11, 0]} var element = $('#6abe7a53-acd9-451c-846d-4947f96f5af5'); {\"version_major\": 2, \"version_minor\": 0, \"model_id\": \"dfe7cd75905f422e81f5e52b639bc6eb\"}","title":"Requirements"}]}